<script>
  function onLoad() {
    gTocItems = gBookToc;
    gBookTitle = "{{ .Book.TitleLong }}";

    app.httpsMaybeRedirect();

    if (window.g_is_404) {
      app.do404();
      return;
    }

    const opts = {
      target: document.getElementById("toc"),
      props: {
        parentIdx: -1,
        level: 0,
      },
    };
    // console.log("gBookToc:", gBookToc3);
    new app.toc(opts);

    const opts2 = {
      target: document.getElementById("search-parent"),
      props: {
        bookTitle: gBookTitle,
      },
    };
    new app.searchInput(opts2);
  }
  document.addEventListener('DOMContentLoaded', onLoad);
</script>