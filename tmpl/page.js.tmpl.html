<script>
  function onLoad() {
    gBookTitle = "{{ .Book.TitleLong }}";

    httpsMaybeRedirect();

    let opts = {
      target: document.getElementById("toc"),
      props: {
        parentIdx: -1,
        level: 0,
      },
    };
    new app.toc(opts);

    opts = {
      target: document.getElementById("search-parent"),
      props: {
        bookTitle: gBookTitle,
      },
    };
    new app.searchInput(opts);

    opts = {
      target: document.getElementById("toc-mini"),
    }
    new app.pageTocMini(opts);
  }
  document.addEventListener('DOMContentLoaded', onLoad);
</script>