<script>
  function onLoad() {
    gBookTitle = "{{ .Book.TitleLong }}";

    app.httpsMaybeRedirect();

    const opts = {
      target: document.getElementById("toc"),
      props: {
        parentIdx: -1,
        level: 0,
      },
    };
    new app.toc(opts);

    const opts2 = {
      target: document.getElementById("search-parent"),
      props: {
        bookTitle: gBookTitle,
      },
    };
    new app.searchInput(opts2);
  }
  document.addEventListener('DOMContentLoaded', onLoad);
</script>