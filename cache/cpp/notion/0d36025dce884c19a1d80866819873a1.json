{
  "ID": "0d36025d-ce88-4c19-a1d8-0866819873a1",
  "Root": {
    "alive": true,
    "content": [
      "54adfdf9-7978-4017-8e4a-607b7f9efa34",
      "e769a054-6d4c-4026-9272-90e435f5ff7a",
      "46390f60-0ed7-40ef-bbfa-5a9d0e41ce01",
      "cc8b1b71-1d7e-4476-bf23-4104294522f7",
      "023aeaa9-8127-42b4-a658-f06e7c7d1a3c",
      "330cf40e-8473-4aa4-af1f-a6c7beead160",
      "e7ec459f-fb0e-4ade-8eb5-bbcfbb3bcade",
      "250efb5d-ff47-45c5-8b85-7837d0a9015e",
      "53b584eb-2b57-4819-99ad-5956e6edc213",
      "0c732770-a2fb-40c1-a69e-d830ebe13765",
      "dea896a8-1dcd-4807-b3d4-29ebee0e0eaa",
      "1df72f1a-3f82-4fd1-bd45-76da4784458d",
      "a3ae4f6e-5973-4af6-b04a-efa3c4969694",
      "120e0141-9127-4a6d-9a3c-3471ecad41b1",
      "5d4a967d-1c35-489b-ba96-54ce0593a7c5",
      "32c11efb-7350-4774-bcda-1ed0f535dedf"
    ],
    "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
    "created_time": 1550522982273,
    "id": "0d36025d-ce88-4c19-a1d8-0866819873a1",
    "ignore_block_count": true,
    "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
    "last_edited_time": 1550522982273,
    "parent_id": "ea4c768f-8ffd-48a6-bc20-bd19b214545c",
    "parent_table": "block",
    "properties": {
      "title": [
        [
          "000 Bit fields"
        ]
      ]
    },
    "type": "page",
    "version": 1,
    "content_resolved": [
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550522982268,
        "id": "54adfdf9-7978-4017-8e4a-607b7f9efa34",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550522982268,
        "parent_id": "0d36025d-ce88-4c19-a1d8-0866819873a1",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Introduction"
            ]
          ]
        },
        "type": "sub_header",
        "version": 1,
        "inline_content": [
          {
            "Text": "Introduction"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550522982271,
        "id": "e769a054-6d4c-4026-9272-90e435f5ff7a",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550522982271,
        "parent_id": "0d36025d-ce88-4c19-a1d8-0866819873a1",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Bit fields tightly pack C and C++ structures to reduce size. This appears painless: specify the number of bits for members, and compiler does the work of co-mingling bits. The restriction is inability to take the address of a bit field member, since it is stored co-mingled. "
            ],
            [
              "sizeof()",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " is also disallowed."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Bit fields tightly pack C and C++ structures to reduce size. This appears painless: specify the number of bits for members, and compiler does the work of co-mingling bits. The restriction is inability to take the address of a bit field member, since it is stored co-mingled. "
          },
          {
            "Text": "sizeof()",
            "AttrFlags": 2
          },
          {
            "Text": " is also disallowed."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550522982271,
        "id": "46390f60-0ed7-40ef-bbfa-5a9d0e41ce01",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550522982271,
        "parent_id": "0d36025d-ce88-4c19-a1d8-0866819873a1",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "The cost of bit fields is slower access, as memory must be retrieved and bitwise operations applied to extract or modify member values. These operations also add to executable size."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "The cost of bit fields is slower access, as memory must be retrieved and bitwise operations applied to extract or modify member values. These operations also add to executable size."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550522982271,
        "id": "cc8b1b71-1d7e-4476-bf23-4104294522f7",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550522982271,
        "parent_id": "0d36025d-ce88-4c19-a1d8-0866819873a1",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Remarks"
            ]
          ]
        },
        "type": "sub_header",
        "version": 1,
        "inline_content": [
          {
            "Text": "Remarks"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550522982271,
        "id": "023aeaa9-8127-42b4-a658-f06e7c7d1a3c",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550522982271,
        "parent_id": "0d36025d-ce88-4c19-a1d8-0866819873a1",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "How expensive are the bitwise operations? Suppose a simple non-bit field structure:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "How expensive are the bitwise operations? Suppose a simple non-bit field structure:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550522982271,
        "id": "330cf40e-8473-4aa4-af1f-a6c7beead160",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550522982271,
        "parent_id": "0d36025d-ce88-4c19-a1d8-0866819873a1",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "struct foo {\n    unsigned x;\n    unsigned y;\n}\nstatic struct foo my_var;"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "struct foo {\n    unsigned x;\n    unsigned y;\n}\nstatic struct foo my_var;",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550522982271,
        "id": "e7ec459f-fb0e-4ade-8eb5-bbcfbb3bcade",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550522982271,
        "parent_id": "0d36025d-ce88-4c19-a1d8-0866819873a1",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "In some later code:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "In some later code:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550522982271,
        "id": "250efb5d-ff47-45c5-8b85-7837d0a9015e",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550522982271,
        "parent_id": "0d36025d-ce88-4c19-a1d8-0866819873a1",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "my_var.y = 5;"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "my_var.y = 5;",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550522982272,
        "id": "53b584eb-2b57-4819-99ad-5956e6edc213",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550522982272,
        "parent_id": "0d36025d-ce88-4c19-a1d8-0866819873a1",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "If "
            ],
            [
              "sizeof (unsigned) == 4",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              ", then x is stored at the start of the structure, and y is stored 4 bytes in. Assembly code generated may resemble:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "If "
          },
          {
            "Text": "sizeof (unsigned) == 4",
            "AttrFlags": 2
          },
          {
            "Text": ", then x is stored at the start of the structure, and y is stored 4 bytes in. Assembly code generated may resemble:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550522982272,
        "id": "0c732770-a2fb-40c1-a69e-d830ebe13765",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550522982272,
        "parent_id": "0d36025d-ce88-4c19-a1d8-0866819873a1",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "loada register1,#myvar     ; get the address of the structure\nstorei register1[4],#0x05  ; put the value '5' at offset 4, e.g., set y=5"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "loada register1,#myvar     ; get the address of the structure\nstorei register1[4],#0x05  ; put the value '5' at offset 4, e.g., set y=5",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550522982272,
        "id": "dea896a8-1dcd-4807-b3d4-29ebee0e0eaa",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550522982272,
        "parent_id": "0d36025d-ce88-4c19-a1d8-0866819873a1",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "This is straightforward because x is not co-mingled with y. But imagine redefining the structure with bit fields:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "This is straightforward because x is not co-mingled with y. But imagine redefining the structure with bit fields:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550522982272,
        "id": "1df72f1a-3f82-4fd1-bd45-76da4784458d",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550522982272,
        "parent_id": "0d36025d-ce88-4c19-a1d8-0866819873a1",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "struct foo {\n    unsigned x : 4; /* Range 0-0x0f, or 0 through 15 */\n    unsigned y : 4;\n}"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "struct foo {\n    unsigned x : 4; /* Range 0-0x0f, or 0 through 15 */\n    unsigned y : 4;\n}",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550522982272,
        "id": "a3ae4f6e-5973-4af6-b04a-efa3c4969694",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550522982272,
        "parent_id": "0d36025d-ce88-4c19-a1d8-0866819873a1",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Both "
            ],
            [
              "x",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " and "
            ],
            [
              "y",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " will be allocated 4 bits, sharing a single byte. The structure thus takes up 1 byte, instead of 8. Consider the assembly to set "
            ],
            [
              "y",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " now, assuming it ends up in the upper nibble:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Both "
          },
          {
            "Text": "x",
            "AttrFlags": 2
          },
          {
            "Text": " and "
          },
          {
            "Text": "y",
            "AttrFlags": 2
          },
          {
            "Text": " will be allocated 4 bits, sharing a single byte. The structure thus takes up 1 byte, instead of 8. Consider the assembly to set "
          },
          {
            "Text": "y",
            "AttrFlags": 2
          },
          {
            "Text": " now, assuming it ends up in the upper nibble:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550522982272,
        "id": "120e0141-9127-4a6d-9a3c-3471ecad41b1",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550522982272,
        "parent_id": "0d36025d-ce88-4c19-a1d8-0866819873a1",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "loada  register1,#myvar        ; get the address of the structure\nloadb  register2,register1[0]  ; get the byte from memory\nandb   register2,#0x0f         ; zero out y in the byte, leaving x alone\norb    register2,#0x50         ; put the 5 into the 'y' portion of the byte\nstb    register1[0],register2  ; put the modified byte back into memory"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "loada  register1,#myvar        ; get the address of the structure\nloadb  register2,register1[0]  ; get the byte from memory\nandb   register2,#0x0f         ; zero out y in the byte, leaving x alone\norb    register2,#0x50         ; put the 5 into the 'y' portion of the byte\nstb    register1[0],register2  ; put the modified byte back into memory",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550522982272,
        "id": "5d4a967d-1c35-489b-ba96-54ce0593a7c5",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550522982272,
        "parent_id": "0d36025d-ce88-4c19-a1d8-0866819873a1",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "This may be a good trade-off if we have thousands or millions of these structures, and it helps keeps memory in cache or prevents swapping—or could bloat the executable to worsen these problems and slow processing. As with all things, use good judgement."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "This may be a good trade-off if we have thousands or millions of these structures, and it helps keeps memory in cache or prevents swapping—or could bloat the executable to worsen these problems and slow processing. As with all things, use good judgement."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550522982273,
        "id": "32c11efb-7350-4774-bcda-1ed0f535dedf",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550522982273,
        "parent_id": "0d36025d-ce88-4c19-a1d8-0866819873a1",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Device driver use:",
              [
                [
                  "i"
                ]
              ]
            ],
            [
              " Avoid bit fields as a clever implementation strategy for device drivers. Bit field storage layouts are not necessarily consistent between compilers, making such implementations non-portable. The read-modify-write to set values may not do what devices expect, causing unexpected behaviors."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Device driver use:",
            "AttrFlags": 4
          },
          {
            "Text": " Avoid bit fields as a clever implementation strategy for device drivers. Bit field storage layouts are not necessarily consistent between compilers, making such implementations non-portable. The read-modify-write to set values may not do what devices expect, causing unexpected behaviors."
          }
        ]
      }
    ],
    "title": "000 Bit fields"
  },
  "Users": [
    {
      "email": "kkowalczyk@gmail.com",
      "family_name": "Kowalczyk",
      "given_name": "Krzysztof",
      "id": "bb760e2d-d679-4b64-b2a9-03005b21870a",
      "locale": "en",
      "mobile_onboarding_completed": true,
      "onboarding_completed": true,
      "profile_photo": "https://s3-us-west-2.amazonaws.com/public.notion-static.com/2dcaa66c-7674-4ff6-9924-601785b63561/head-bw-640x960.png",
      "time_zone": "America/Los_Angeles",
      "version": 18
    }
  ],
  "Tables": null
}