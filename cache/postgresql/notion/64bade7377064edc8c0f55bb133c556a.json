{
  "ID": "64bade73-7706-4edc-8c0f-55bb133c556a",
  "Root": {
    "alive": true,
    "content": [
      "13eeb8d5-faf7-4694-902c-3ce2a478c0d3",
      "cbf0fd76-a4f3-40f8-ae17-551255ed8876",
      "29d80c3f-4636-408b-aedb-52b92aef1498",
      "85592d51-96c7-4014-b615-a2d2a9e90057",
      "df46bf5e-94ba-4d42-9031-5dedac84b7c6",
      "b57b21e5-b639-4957-8ac5-12cc8904a62d",
      "05b635d1-b609-4ae3-b66a-0e3d98da22a8"
    ],
    "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
    "created_time": 1550385074264,
    "id": "64bade73-7706-4edc-8c0f-55bb133c556a",
    "ignore_block_count": true,
    "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
    "last_edited_time": 1550480520000,
    "parent_id": "1b89e574-5d0d-4bdf-ab44-b5312db9e0c9",
    "parent_table": "block",
    "properties": {
      "title": [
        [
          "UPSERT - INSERT ... ON CONFLICT DO UPDATE..."
        ]
      ]
    },
    "type": "page",
    "version": 6,
    "content_resolved": [
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550385074263,
        "id": "13eeb8d5-faf7-4694-902c-3ce2a478c0d3",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550385074263,
        "parent_id": "64bade73-7706-4edc-8c0f-55bb133c556a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "since "
            ],
            [
              "version 9.5",
              [
                [
                  "a",
                  "https://www.postgresql.org/docs/9.5/static/sql-insert.html"
                ]
              ]
            ],
            [
              " postgres offers "
            ],
            [
              "UPSERT",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " functionality with "
            ],
            [
              "INSERT",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " statement."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "since "
          },
          {
            "Text": "version 9.5",
            "Link": "https://www.postgresql.org/docs/9.5/static/sql-insert.html"
          },
          {
            "Text": " postgres offers "
          },
          {
            "Text": "UPSERT",
            "AttrFlags": 2
          },
          {
            "Text": " functionality with "
          },
          {
            "Text": "INSERT",
            "AttrFlags": 2
          },
          {
            "Text": " statement."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550385074263,
        "id": "cbf0fd76-a4f3-40f8-ae17-551255ed8876",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550385074263,
        "parent_id": "64bade73-7706-4edc-8c0f-55bb133c556a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Say you have a table called my_table, created in several previous examples. We insert a row, returning PK value of inserted row:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Say you have a table called my_table, created in several previous examples. We insert a row, returning PK value of inserted row:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550385074264,
        "id": "29d80c3f-4636-408b-aedb-52b92aef1498",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550385074264,
        "parent_id": "64bade73-7706-4edc-8c0f-55bb133c556a",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "b=# INSERT INTO my_table (name,contact_number) values ('one',333) RETURNING id;\n id\n----\n  2\n(1 row)\n\nINSERT 0 1"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "b=# INSERT INTO my_table (name,contact_number) values ('one',333) RETURNING id;\n id\n----\n  2\n(1 row)\n\nINSERT 0 1",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550385074264,
        "id": "85592d51-96c7-4014-b615-a2d2a9e90057",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550385074264,
        "parent_id": "64bade73-7706-4edc-8c0f-55bb133c556a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Now if we try to insert row with existing unique key it will raise an exception:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Now if we try to insert row with existing unique key it will raise an exception:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550385074264,
        "id": "df46bf5e-94ba-4d42-9031-5dedac84b7c6",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550385074264,
        "parent_id": "64bade73-7706-4edc-8c0f-55bb133c556a",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "b=# INSERT INTO my_table values (2,'one',333);\nERROR:  duplicate key value violates unique constraint \"my_table_pkey\"\nDETAIL:  Key (id)=(2) already exists."
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "b=# INSERT INTO my_table values (2,'one',333);\nERROR:  duplicate key value violates unique constraint \"my_table_pkey\"\nDETAIL:  Key (id)=(2) already exists.",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550385074264,
        "id": "b57b21e5-b639-4957-8ac5-12cc8904a62d",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550385074264,
        "parent_id": "64bade73-7706-4edc-8c0f-55bb133c556a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Upsert functionality offers ability to insert it anyway, solving the conflict:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Upsert functionality offers ability to insert it anyway, solving the conflict:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550385074264,
        "id": "05b635d1-b609-4ae3-b66a-0e3d98da22a8",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550385074264,
        "parent_id": "64bade73-7706-4edc-8c0f-55bb133c556a",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "b=# INSERT INTO my_table values (2,'one',333) ON CONFLICT (id) DO UPDATE SET name = my_table.name||' changed to: \"two\" at '||now() returning *;\n id |                       name                             | contact_number\n----+-----------------------------------------------------------------------------------------------------------+----------------\n  2 | one changed to: \"two\" at 2016-11-23 08:32:17.105179+00 |            333\n(1 row)\n\nINSERT 0 1"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "b=# INSERT INTO my_table values (2,'one',333) ON CONFLICT (id) DO UPDATE SET name = my_table.name||' changed to: \"two\" at '||now() returning *;\n id |                       name                             | contact_number\n----+-----------------------------------------------------------------------------------------------------------+----------------\n  2 | one changed to: \"two\" at 2016-11-23 08:32:17.105179+00 |            333\n(1 row)\n\nINSERT 0 1",
        "code_language": "Plain Text"
      }
    ],
    "title": "UPSERT - INSERT ... ON CONFLICT DO UPDATE..."
  },
  "Users": [
    {
      "email": "kkowalczyk@gmail.com",
      "family_name": "Kowalczyk",
      "given_name": "Krzysztof",
      "id": "bb760e2d-d679-4b64-b2a9-03005b21870a",
      "locale": "en",
      "mobile_onboarding_completed": true,
      "onboarding_completed": true,
      "profile_photo": "https://s3-us-west-2.amazonaws.com/public.notion-static.com/2dcaa66c-7674-4ff6-9924-601785b63561/head-bw-640x960.png",
      "time_zone": "America/Los_Angeles",
      "version": 18
    }
  ],
  "Tables": null
}