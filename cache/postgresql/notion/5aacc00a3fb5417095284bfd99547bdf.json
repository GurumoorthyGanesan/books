{
  "ID": "5aacc00a-3fb5-4170-9528-4bfd99547bdf",
  "Root": {
    "alive": true,
    "content": [
      "f297256a-8a01-47c6-879f-012fad70cee4",
      "c675d831-0b06-4703-9cad-2d624908c6f1",
      "e87a0c45-c97c-4899-a810-7a109f04f15b",
      "30a746d4-894b-457f-882a-7818ddc5978c",
      "b59563f9-ceef-48a7-8624-1163c49094a6",
      "e8b6cea5-7187-4f04-855f-df444debdd21",
      "0f9a66e9-7091-4a4d-82bf-120beb14f4d2",
      "83092872-9c10-4e64-a7ca-9b23619feb6e",
      "c8cbc44c-821f-4462-a3b5-e5f8496f885f",
      "2317fc0c-029a-4c18-a560-256f22a254cf",
      "e06ee5dd-9b4c-422b-abf0-aa6899a30c63",
      "7b0beafd-37e2-4d56-b17f-81293e78f062",
      "5d0bf516-ea46-41c9-9692-36a3452acb31"
    ],
    "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
    "created_time": 1550387159012,
    "id": "5aacc00a-3fb5-4170-9528-4bfd99547bdf",
    "ignore_block_count": true,
    "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
    "last_edited_time": 1550480820000,
    "parent_id": "66100120-d0d2-4226-ab23-554ee203d7db",
    "parent_table": "block",
    "properties": {
      "title": [
        [
          "generic example"
        ]
      ]
    },
    "type": "page",
    "version": 6,
    "content_resolved": [
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550387159008,
        "id": "f297256a-8a01-47c6-879f-012fad70cee4",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550387159008,
        "parent_id": "5aacc00a-3fb5-4170-9528-4bfd99547bdf",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Preparing data:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Preparing data:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550387159010,
        "id": "c675d831-0b06-4703-9cad-2d624908c6f1",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550480820000,
        "parent_id": "5aacc00a-3fb5-4170-9528-4bfd99547bdf",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "SQL"
            ]
          ],
          "title": [
            [
              "create table wf_example(i int, t text,ts timestamptz,b boolean);\ninsert into wf_example select 1,'a','1970.01.01',true;\ninsert into wf_example select 1,'a','1970.01.01',false;\ninsert into wf_example select 1,'b','1970.01.01',false;\ninsert into wf_example select 2,'b','1970.01.01',false;\ninsert into wf_example select 3,'b','1970.01.01',false;\ninsert into wf_example select 4,'b','1970.02.01',false;\ninsert into wf_example select 5,'b','1970.03.01',false;\ninsert into wf_example select 2,'c','1970.03.01',true;"
            ]
          ]
        },
        "type": "code",
        "version": 3,
        "code": "create table wf_example(i int, t text,ts timestamptz,b boolean);\ninsert into wf_example select 1,'a','1970.01.01',true;\ninsert into wf_example select 1,'a','1970.01.01',false;\ninsert into wf_example select 1,'b','1970.01.01',false;\ninsert into wf_example select 2,'b','1970.01.01',false;\ninsert into wf_example select 3,'b','1970.01.01',false;\ninsert into wf_example select 4,'b','1970.02.01',false;\ninsert into wf_example select 5,'b','1970.03.01',false;\ninsert into wf_example select 2,'c','1970.03.01',true;",
        "code_language": "SQL"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550387159011,
        "id": "e87a0c45-c97c-4899-a810-7a109f04f15b",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550387159011,
        "parent_id": "5aacc00a-3fb5-4170-9528-4bfd99547bdf",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Running:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Running:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550387159011,
        "id": "30a746d4-894b-457f-882a-7818ddc5978c",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550480820000,
        "parent_id": "5aacc00a-3fb5-4170-9528-4bfd99547bdf",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "SQL"
            ]
          ],
          "title": [
            [
              "select *\n  , dense_rank() over (order by i) dist_by_i \n  , lag(t) over () prev_t \n  , nth_value(i, 6) over () nth\n  , count(true) over (partition by i) num_by_i \n  , count(true) over () num_all\n  , ntile(3) over() ntile\nfrom wf_example\n;"
            ]
          ]
        },
        "type": "code",
        "version": 3,
        "code": "select *\n  , dense_rank() over (order by i) dist_by_i \n  , lag(t) over () prev_t \n  , nth_value(i, 6) over () nth\n  , count(true) over (partition by i) num_by_i \n  , count(true) over () num_all\n  , ntile(3) over() ntile\nfrom wf_example\n;",
        "code_language": "SQL"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550387159011,
        "id": "b59563f9-ceef-48a7-8624-1163c49094a6",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550387159011,
        "parent_id": "5aacc00a-3fb5-4170-9528-4bfd99547bdf",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Result:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Result:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550387159011,
        "id": "e8b6cea5-7187-4f04-855f-df444debdd21",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550387159011,
        "parent_id": "5aacc00a-3fb5-4170-9528-4bfd99547bdf",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "i | t |           ts           | b | dist_by_i | prev_t | nth | num_by_i | num_all | ntile\n---+---+------------------------+---+-----------+--------+-----+----------+---------+-------\n1 | a | 1970-01-01 00:00:00+01 | f |         1 |        |   3 |        3 |       8 |     1\n1 | a | 1970-01-01 00:00:00+01 | t |         1 | a      |   3 |        3 |       8 |     1\n1 | b | 1970-01-01 00:00:00+01 | f |         1 | a      |   3 |        3 |       8 |     1\n2 | c | 1970-03-01 00:00:00+01 | t |         2 | b      |   3 |        2 |       8 |     2\n2 | b | 1970-01-01 00:00:00+01 | f |         2 | c      |   3 |        2 |       8 |     2\n3 | b | 1970-01-01 00:00:00+01 | f |         3 | b      |   3 |        1 |       8 |     2\n4 | b | 1970-02-01 00:00:00+01 | f |         4 | b      |   3 |        1 |       8 |     3\n5 | b | 1970-03-01 00:00:00+01 | f |         5 | b      |   3 |        1 |       8 |     3\n(8 rows)"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "i | t |           ts           | b | dist_by_i | prev_t | nth | num_by_i | num_all | ntile\n---+---+------------------------+---+-----------+--------+-----+----------+---------+-------\n1 | a | 1970-01-01 00:00:00+01 | f |         1 |        |   3 |        3 |       8 |     1\n1 | a | 1970-01-01 00:00:00+01 | t |         1 | a      |   3 |        3 |       8 |     1\n1 | b | 1970-01-01 00:00:00+01 | f |         1 | a      |   3 |        3 |       8 |     1\n2 | c | 1970-03-01 00:00:00+01 | t |         2 | b      |   3 |        2 |       8 |     2\n2 | b | 1970-01-01 00:00:00+01 | f |         2 | c      |   3 |        2 |       8 |     2\n3 | b | 1970-01-01 00:00:00+01 | f |         3 | b      |   3 |        1 |       8 |     2\n4 | b | 1970-02-01 00:00:00+01 | f |         4 | b      |   3 |        1 |       8 |     3\n5 | b | 1970-03-01 00:00:00+01 | f |         5 | b      |   3 |        1 |       8 |     3\n(8 rows)",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550387159011,
        "id": "0f9a66e9-7091-4a4d-82bf-120beb14f4d2",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550387159011,
        "parent_id": "5aacc00a-3fb5-4170-9528-4bfd99547bdf",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Explanation:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Explanation:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550387159011,
        "id": "83092872-9c10-4e64-a7ca-9b23619feb6e",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550387159011,
        "parent_id": "5aacc00a-3fb5-4170-9528-4bfd99547bdf",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "dist_by_i",
              [
                [
                  "i"
                ]
              ]
            ],
            [
              ": "
            ],
            [
              "dense_rank() over (order by i)",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " is like a row_number per distinct values. Can be used for the number of distinct values of i ("
            ],
            [
              "count(DISTINCT i)",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " wold not work). Just use the maximum value."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "dist_by_i",
            "AttrFlags": 4
          },
          {
            "Text": ": "
          },
          {
            "Text": "dense_rank() over (order by i)",
            "AttrFlags": 2
          },
          {
            "Text": " is like a row_number per distinct values. Can be used for the number of distinct values of i ("
          },
          {
            "Text": "count(DISTINCT i)",
            "AttrFlags": 2
          },
          {
            "Text": " wold not work). Just use the maximum value."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550387159011,
        "id": "c8cbc44c-821f-4462-a3b5-e5f8496f885f",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550387159011,
        "parent_id": "5aacc00a-3fb5-4170-9528-4bfd99547bdf",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "prev_t",
              [
                [
                  "i"
                ]
              ]
            ],
            [
              ": "
            ],
            [
              "lag(t) over ()",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " is a previous value of t over the whole window. mind that it is null for the first row."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "prev_t",
            "AttrFlags": 4
          },
          {
            "Text": ": "
          },
          {
            "Text": "lag(t) over ()",
            "AttrFlags": 2
          },
          {
            "Text": " is a previous value of t over the whole window. mind that it is null for the first row."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550387159012,
        "id": "2317fc0c-029a-4c18-a560-256f22a254cf",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550387159012,
        "parent_id": "5aacc00a-3fb5-4170-9528-4bfd99547bdf",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "nth",
              [
                [
                  "i"
                ]
              ]
            ],
            [
              ": "
            ],
            [
              "nth_value(i, 6) over ()",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " is the value of sixth rows column i over the whole window"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "nth",
            "AttrFlags": 4
          },
          {
            "Text": ": "
          },
          {
            "Text": "nth_value(i, 6) over ()",
            "AttrFlags": 2
          },
          {
            "Text": " is the value of sixth rows column i over the whole window"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550387159012,
        "id": "e06ee5dd-9b4c-422b-abf0-aa6899a30c63",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550387159012,
        "parent_id": "5aacc00a-3fb5-4170-9528-4bfd99547bdf",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "num_by_i",
              [
                [
                  "i"
                ]
              ]
            ],
            [
              ": "
            ],
            [
              "count(true) over (partition by i)",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " is an amount of rows for each value of i"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "num_by_i",
            "AttrFlags": 4
          },
          {
            "Text": ": "
          },
          {
            "Text": "count(true) over (partition by i)",
            "AttrFlags": 2
          },
          {
            "Text": " is an amount of rows for each value of i"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550387159012,
        "id": "7b0beafd-37e2-4d56-b17f-81293e78f062",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550387159012,
        "parent_id": "5aacc00a-3fb5-4170-9528-4bfd99547bdf",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "num_all",
              [
                [
                  "i"
                ]
              ]
            ],
            [
              ": "
            ],
            [
              "count(true) over ()",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " is an amount of rows over a whole window"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "num_all",
            "AttrFlags": 4
          },
          {
            "Text": ": "
          },
          {
            "Text": "count(true) over ()",
            "AttrFlags": 2
          },
          {
            "Text": " is an amount of rows over a whole window"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550387159012,
        "id": "5d0bf516-ea46-41c9-9692-36a3452acb31",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550387159012,
        "parent_id": "5aacc00a-3fb5-4170-9528-4bfd99547bdf",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "ntile",
              [
                [
                  "i"
                ]
              ]
            ],
            [
              ": "
            ],
            [
              "ntile(3) over()",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " splits the whole window to 3 (as much as possible) equal in quantity parts"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "ntile",
            "AttrFlags": 4
          },
          {
            "Text": ": "
          },
          {
            "Text": "ntile(3) over()",
            "AttrFlags": 2
          },
          {
            "Text": " splits the whole window to 3 (as much as possible) equal in quantity parts"
          }
        ]
      }
    ],
    "title": "generic example"
  },
  "Users": [
    {
      "email": "kkowalczyk@gmail.com",
      "family_name": "Kowalczyk",
      "given_name": "Krzysztof",
      "id": "bb760e2d-d679-4b64-b2a9-03005b21870a",
      "locale": "en",
      "mobile_onboarding_completed": true,
      "onboarding_completed": true,
      "profile_photo": "https://s3-us-west-2.amazonaws.com/public.notion-static.com/2dcaa66c-7674-4ff6-9924-601785b63561/head-bw-640x960.png",
      "time_zone": "America/Los_Angeles",
      "version": 18
    }
  ],
  "Tables": null
}