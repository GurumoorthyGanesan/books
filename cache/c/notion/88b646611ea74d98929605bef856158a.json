{
  "ID": "88b64661-1ea7-4d98-9296-05bef856158a",
  "Root": {
    "alive": true,
    "content": [
      "272303c8-0f19-44f0-8872-82115cfad71b",
      "b73488a7-61cf-4977-8123-0828cd904b14",
      "98e4cef7-ac55-42f8-842f-231e7f603b1c",
      "5978a781-3a63-4367-ae11-794eca24dc5f",
      "a38d0a1c-58b5-44e4-abcb-ad1c30d2eb02",
      "ddf8ecfd-dc23-41a5-a8fc-3d14d036ff4c",
      "b8a45425-1675-44ae-9859-60dcecbd12c8",
      "74ab03ad-4c85-4d28-a3c1-827dfb468380",
      "c7ed0dd3-5944-40fa-b8dd-298650f05cfb",
      "09fff77a-2185-4cc1-a5bb-48fc500a413f",
      "b5e51fcf-bc86-4749-8b30-a1663f91b2ec",
      "fa12c0bd-3416-4098-9b16-35c6004845a3",
      "9755b70e-f2c2-4c6d-9dd3-ec25aabf0917",
      "00da3f77-3a2e-46d9-ad7a-df3bc5472a74"
    ],
    "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
    "created_time": 1551936376971,
    "format": {
      "page_full_width": true,
      "page_small_text": true
    },
    "id": "88b64661-1ea7-4d98-9296-05bef856158a",
    "ignore_block_count": true,
    "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
    "last_edited_time": 1551936376971,
    "parent_id": "3615ca16-3d26-4800-98f4-4da1a5c4bef4",
    "parent_table": "block",
    "properties": {
      "title": [
        [
          "Volatile variables"
        ]
      ]
    },
    "type": "page",
    "version": 3,
    "content_resolved": [
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551936376966,
        "id": "272303c8-0f19-44f0-8872-82115cfad71b",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551936376966,
        "parent_id": "88b64661-1ea7-4d98-9296-05bef856158a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "The "
            ],
            [
              "volatile",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " keyword tells the compiler that the value of the variable may change at any time as a result of external conditions, not only as a result of program control flow."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "The "
          },
          {
            "Text": "volatile",
            "AttrFlags": 2
          },
          {
            "Text": " keyword tells the compiler that the value of the variable may change at any time as a result of external conditions, not only as a result of program control flow."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551936376968,
        "id": "b73488a7-61cf-4977-8123-0828cd904b14",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551936376968,
        "parent_id": "88b64661-1ea7-4d98-9296-05bef856158a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "The compiler will not optimize anything that has to do with the volatile variable."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "The compiler will not optimize anything that has to do with the volatile variable."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551936376968,
        "id": "98e4cef7-ac55-42f8-842f-231e7f603b1c",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551936376968,
        "parent_id": "88b64661-1ea7-4d98-9296-05bef856158a",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "volatile int foo; /* Different ways to declare a volatile variable */\nint volatile foo;\n\nvolatile uint8_t * pReg; /* Pointers to volatile variable */\nuint8_t volatile * pReg;"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "volatile int foo; /* Different ways to declare a volatile variable */\nint volatile foo;\n\nvolatile uint8_t * pReg; /* Pointers to volatile variable */\nuint8_t volatile * pReg;",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551936376968,
        "id": "5978a781-3a63-4367-ae11-794eca24dc5f",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551936376968,
        "parent_id": "88b64661-1ea7-4d98-9296-05bef856158a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "There are two main reasons to uses volatile variables:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "There are two main reasons to uses volatile variables:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551936376969,
        "id": "a38d0a1c-58b5-44e4-abcb-ad1c30d2eb02",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551936376969,
        "parent_id": "88b64661-1ea7-4d98-9296-05bef856158a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "To interface with hardware that has memory-mapped I/O registers."
            ]
          ]
        },
        "type": "bulleted_list",
        "version": 1,
        "inline_content": [
          {
            "Text": "To interface with hardware that has memory-mapped I/O registers."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551936376970,
        "id": "ddf8ecfd-dc23-41a5-a8fc-3d14d036ff4c",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551936376970,
        "parent_id": "88b64661-1ea7-4d98-9296-05bef856158a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "When using variables that are modified outside the program control flow (e.g., in an interrupt service routine)"
            ]
          ]
        },
        "type": "bulleted_list",
        "version": 1,
        "inline_content": [
          {
            "Text": "When using variables that are modified outside the program control flow (e.g., in an interrupt service routine)"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551936376970,
        "id": "b8a45425-1675-44ae-9859-60dcecbd12c8",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551936376970,
        "parent_id": "88b64661-1ea7-4d98-9296-05bef856158a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Let’s see this example:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Let’s see this example:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551936376970,
        "id": "74ab03ad-4c85-4d28-a3c1-827dfb468380",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551936376970,
        "parent_id": "88b64661-1ea7-4d98-9296-05bef856158a",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "int quit = false;\n\nvoid main() \n{\n    ... \n    while (!quit) {\n      // Do something that does not modify the quit variable\n    } \n    ...\n}\n\nvoid interrupt_handler(void) \n{\n  quit = true;\n}"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "int quit = false;\n\nvoid main() \n{\n    ... \n    while (!quit) {\n      // Do something that does not modify the quit variable\n    } \n    ...\n}\n\nvoid interrupt_handler(void) \n{\n  quit = true;\n}",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551936376970,
        "id": "c7ed0dd3-5944-40fa-b8dd-298650f05cfb",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551936376970,
        "parent_id": "88b64661-1ea7-4d98-9296-05bef856158a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "The compiler is allowed to notice the while loop does not modify the "
            ],
            [
              "quit",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " variable and convert the loop to a endless "
            ],
            [
              "while (true)",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " loop. Even if the "
            ],
            [
              "quit",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " variable is set on the signal handler for "
            ],
            [
              "SIGINT",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " and "
            ],
            [
              "SIGTERM",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              ", the compiler does not know that."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "The compiler is allowed to notice the while loop does not modify the "
          },
          {
            "Text": "quit",
            "AttrFlags": 2
          },
          {
            "Text": " variable and convert the loop to a endless "
          },
          {
            "Text": "while (true)",
            "AttrFlags": 2
          },
          {
            "Text": " loop. Even if the "
          },
          {
            "Text": "quit",
            "AttrFlags": 2
          },
          {
            "Text": " variable is set on the signal handler for "
          },
          {
            "Text": "SIGINT",
            "AttrFlags": 2
          },
          {
            "Text": " and "
          },
          {
            "Text": "SIGTERM",
            "AttrFlags": 2
          },
          {
            "Text": ", the compiler does not know that."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551936376970,
        "id": "09fff77a-2185-4cc1-a5bb-48fc500a413f",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551936376970,
        "parent_id": "88b64661-1ea7-4d98-9296-05bef856158a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Declaring "
            ],
            [
              "quit",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " as "
            ],
            [
              "volatile",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " will tell the compiler to not optimize the loop and the problem will be solved."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Declaring "
          },
          {
            "Text": "quit",
            "AttrFlags": 2
          },
          {
            "Text": " as "
          },
          {
            "Text": "volatile",
            "AttrFlags": 2
          },
          {
            "Text": " will tell the compiler to not optimize the loop and the problem will be solved."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551936376970,
        "id": "b5e51fcf-bc86-4749-8b30-a1663f91b2ec",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551936376970,
        "parent_id": "88b64661-1ea7-4d98-9296-05bef856158a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "The same problem happens when accessing hardware, as we see in this example:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "The same problem happens when accessing hardware, as we see in this example:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551936376971,
        "id": "fa12c0bd-3416-4098-9b16-35c6004845a3",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551936376971,
        "parent_id": "88b64661-1ea7-4d98-9296-05bef856158a",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "uint8_t * pReg = (uint8_t *) 0x1717;\n\n// Wait for register to become non-zero \nwhile (*pReg == 0) { } // Do something else"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "uint8_t * pReg = (uint8_t *) 0x1717;\n\n// Wait for register to become non-zero \nwhile (*pReg == 0) { } // Do something else",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551936376971,
        "id": "9755b70e-f2c2-4c6d-9dd3-ec25aabf0917",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551936376971,
        "parent_id": "88b64661-1ea7-4d98-9296-05bef856158a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "The behavior of the optimizer is to read the variable’s value once, there is no need to reread it, since the value will always be the same. So we end up with an infinite loop. To force the compiler to do what we want, we modify the declaration to:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "The behavior of the optimizer is to read the variable’s value once, there is no need to reread it, since the value will always be the same. So we end up with an infinite loop. To force the compiler to do what we want, we modify the declaration to:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551936376971,
        "id": "00da3f77-3a2e-46d9-ad7a-df3bc5472a74",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551936376971,
        "parent_id": "88b64661-1ea7-4d98-9296-05bef856158a",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "uint8_t volatile * pReg = (uint8_t volatile *) 0x1717;"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "uint8_t volatile * pReg = (uint8_t volatile *) 0x1717;",
        "code_language": "Plain Text"
      }
    ],
    "title": "Volatile variables",
    "format_page": {
      "page_cover": "",
      "page_cover_position": 0,
      "page_font": "",
      "page_full_width": true,
      "page_icon": "",
      "page_small_text": true
    }
  },
  "Users": [
    {
      "email": "kkowalczyk@gmail.com",
      "family_name": "Kowalczyk",
      "given_name": "Krzysztof",
      "id": "bb760e2d-d679-4b64-b2a9-03005b21870a",
      "locale": "en",
      "mobile_onboarding_completed": true,
      "onboarding_completed": true,
      "profile_photo": "https://s3-us-west-2.amazonaws.com/public.notion-static.com/2dcaa66c-7674-4ff6-9924-601785b63561/head-bw-640x960.png",
      "time_zone": "America/Los_Angeles",
      "version": 18
    }
  ],
  "Tables": null
}