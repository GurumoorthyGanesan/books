{
  "ID": "6219d19e-589b-4bb9-a989-a084c02e600d",
  "Root": {
    "alive": true,
    "content": [
      "ee1df9ab-f065-445d-b1bb-5dab420bcf36",
      "ea1dfacc-208f-4e74-88e9-87dc01506e80",
      "b5ee8b5c-71dc-4255-a6e0-47b42db9ff78",
      "19a642e1-2a9b-4970-8b6a-10b528f2cf74",
      "7386acb4-3e6b-4821-9c43-2fc3fb00affe",
      "ef0ca43c-2ed9-4720-b012-1f645690fb86",
      "ef3a3b04-c7b8-4d92-ace1-b779cb5aaf54",
      "33ac2685-9632-4854-ab0f-06d18d4fd484",
      "e7a0ced9-7693-4822-a27f-be874ab20372",
      "af9b5635-4944-4867-a847-305a6bce6997",
      "69320533-3855-4613-9488-b69d11dd7b9a",
      "2c37926a-2189-4080-9734-90788cefabf6",
      "f9533f7c-a120-4cb3-8fb1-5f6f4db9b009"
    ],
    "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
    "created_time": 1551936778862,
    "format": {
      "page_full_width": true,
      "page_small_text": true
    },
    "id": "6219d19e-589b-4bb9-a989-a084c02e600d",
    "ignore_block_count": true,
    "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
    "last_edited_time": 1551936778862,
    "parent_id": "898403c6-8861-4eca-b6cf-2fee9068ecce",
    "parent_table": "block",
    "properties": {
      "title": [
        [
          "Packing structures"
        ]
      ]
    },
    "type": "page",
    "version": 3,
    "content_resolved": [
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551936778857,
        "id": "ee1df9ab-f065-445d-b1bb-5dab420bcf36",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551936778857,
        "parent_id": "6219d19e-589b-4bb9-a989-a084c02e600d",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "By default structures are padded in C. If you want to avoid this behaviour, you have to explicitly request it. Under GCC it’s "
            ],
            [
              "__attribute__((__packed__))",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              ". Consider this example on a 64-bit machine:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "By default structures are padded in C. If you want to avoid this behaviour, you have to explicitly request it. Under GCC it’s "
          },
          {
            "Text": "__attribute__((__packed__))",
            "AttrFlags": 2
          },
          {
            "Text": ". Consider this example on a 64-bit machine:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551936778859,
        "id": "ea1dfacc-208f-4e74-88e9-87dc01506e80",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551936778859,
        "parent_id": "6219d19e-589b-4bb9-a989-a084c02e600d",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "struct foo {\n    char *p;  /* 8 bytes */\n    char c;   /* 1 byte  */\n    long x;   /* 8 bytes */\n};"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "struct foo {\n    char *p;  /* 8 bytes */\n    char c;   /* 1 byte  */\n    long x;   /* 8 bytes */\n};",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551936778860,
        "id": "b5ee8b5c-71dc-4255-a6e0-47b42db9ff78",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551936778860,
        "parent_id": "6219d19e-589b-4bb9-a989-a084c02e600d",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "The structure will be automatically padded to have"
            ],
            [
              "8-byte",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " alignment and will look like this:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "The structure will be automatically padded to have"
          },
          {
            "Text": "8-byte",
            "AttrFlags": 2
          },
          {
            "Text": " alignment and will look like this:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551936778860,
        "id": "19a642e1-2a9b-4970-8b6a-10b528f2cf74",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551936778860,
        "parent_id": "6219d19e-589b-4bb9-a989-a084c02e600d",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "struct foo {\n    char *p;     /* 8 bytes */\n    char c;      /* 1 byte  */\n\n    char pad[7]; /* 7 bytes added by compiler */\n\n    long x;      /* 8 bytes */\n};"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "struct foo {\n    char *p;     /* 8 bytes */\n    char c;      /* 1 byte  */\n\n    char pad[7]; /* 7 bytes added by compiler */\n\n    long x;      /* 8 bytes */\n};",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551936778860,
        "id": "7386acb4-3e6b-4821-9c43-2fc3fb00affe",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551936778860,
        "parent_id": "6219d19e-589b-4bb9-a989-a084c02e600d",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "So "
            ],
            [
              "sizeof(struct foo)",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " will give us "
            ],
            [
              "24",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " instead of "
            ],
            [
              "17",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              ". This happened because of a 64 bit compiler read/write from/to Memory in 8 bytes of word in each step and obvious when try to write "
            ],
            [
              "char c;",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " a one byte in memory a complete 8 bytes (i.e. word) fetched and consumes only first byte of it and its seven successive of bytes remains empty and not accessible for any read and write operation for structure padding."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "So "
          },
          {
            "Text": "sizeof(struct foo)",
            "AttrFlags": 2
          },
          {
            "Text": " will give us "
          },
          {
            "Text": "24",
            "AttrFlags": 2
          },
          {
            "Text": " instead of "
          },
          {
            "Text": "17",
            "AttrFlags": 2
          },
          {
            "Text": ". This happened because of a 64 bit compiler read/write from/to Memory in 8 bytes of word in each step and obvious when try to write "
          },
          {
            "Text": "char c;",
            "AttrFlags": 2
          },
          {
            "Text": " a one byte in memory a complete 8 bytes (i.e. word) fetched and consumes only first byte of it and its seven successive of bytes remains empty and not accessible for any read and write operation for structure padding."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551936778860,
        "id": "ef0ca43c-2ed9-4720-b012-1f645690fb86",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551936778860,
        "parent_id": "6219d19e-589b-4bb9-a989-a084c02e600d",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Structure packing"
            ]
          ]
        },
        "type": "header",
        "version": 1,
        "inline_content": [
          {
            "Text": "Structure packing"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551936778860,
        "id": "ef3a3b04-c7b8-4d92-ace1-b779cb5aaf54",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551936778860,
        "parent_id": "6219d19e-589b-4bb9-a989-a084c02e600d",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "But if you add the attribute "
            ],
            [
              "packed",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              ", the compiler will not add padding:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "But if you add the attribute "
          },
          {
            "Text": "packed",
            "AttrFlags": 2
          },
          {
            "Text": ", the compiler will not add padding:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551936778860,
        "id": "33ac2685-9632-4854-ab0f-06d18d4fd484",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551936778860,
        "parent_id": "6219d19e-589b-4bb9-a989-a084c02e600d",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "struct __attribute__((__packed__)) foo {\n    char *p;  /* 8 bytes */\n    char c;   /* 1 byte  */\n    long x;   /* 8 bytes */\n};"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "struct __attribute__((__packed__)) foo {\n    char *p;  /* 8 bytes */\n    char c;   /* 1 byte  */\n    long x;   /* 8 bytes */\n};",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551936778861,
        "id": "e7a0ced9-7693-4822-a27f-be874ab20372",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551936778861,
        "parent_id": "6219d19e-589b-4bb9-a989-a084c02e600d",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Now "
            ],
            [
              "sizeof(struct foo)",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " will return "
            ],
            [
              "17",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              "."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Now "
          },
          {
            "Text": "sizeof(struct foo)",
            "AttrFlags": 2
          },
          {
            "Text": " will return "
          },
          {
            "Text": "17",
            "AttrFlags": 2
          },
          {
            "Text": "."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551936778861,
        "id": "af9b5635-4944-4867-a847-305a6bce6997",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551936778861,
        "parent_id": "6219d19e-589b-4bb9-a989-a084c02e600d",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Generally packed structures are used:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Generally packed structures are used:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551936778862,
        "id": "69320533-3855-4613-9488-b69d11dd7b9a",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551936778862,
        "parent_id": "6219d19e-589b-4bb9-a989-a084c02e600d",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "To save space."
            ]
          ]
        },
        "type": "bulleted_list",
        "version": 1,
        "inline_content": [
          {
            "Text": "To save space."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551936778862,
        "id": "2c37926a-2189-4080-9734-90788cefabf6",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551936778862,
        "parent_id": "6219d19e-589b-4bb9-a989-a084c02e600d",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "To format a data structure to transmit over network without depending on each architecture alignment of each node of the network."
            ]
          ]
        },
        "type": "bulleted_list",
        "version": 1,
        "inline_content": [
          {
            "Text": "To format a data structure to transmit over network without depending on each architecture alignment of each node of the network."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551936778862,
        "id": "f9533f7c-a120-4cb3-8fb1-5f6f4db9b009",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551936778862,
        "parent_id": "6219d19e-589b-4bb9-a989-a084c02e600d",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "It must be taken in consideration that some processors such as the ARM Cortex-M0 do not allow unaligned memory access; in such cases, structure packing can lead to "
            ],
            [
              "undefined behaviour",
              [
                [
                  "i"
                ]
              ]
            ],
            [
              " and can crash the CPU."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "It must be taken in consideration that some processors such as the ARM Cortex-M0 do not allow unaligned memory access; in such cases, structure packing can lead to "
          },
          {
            "Text": "undefined behaviour",
            "AttrFlags": 4
          },
          {
            "Text": " and can crash the CPU."
          }
        ]
      }
    ],
    "title": "Packing structures",
    "format_page": {
      "page_cover": "",
      "page_cover_position": 0,
      "page_font": "",
      "page_full_width": true,
      "page_icon": "",
      "page_small_text": true
    }
  },
  "Users": [
    {
      "email": "kkowalczyk@gmail.com",
      "family_name": "Kowalczyk",
      "given_name": "Krzysztof",
      "id": "bb760e2d-d679-4b64-b2a9-03005b21870a",
      "locale": "en",
      "mobile_onboarding_completed": true,
      "onboarding_completed": true,
      "profile_photo": "https://s3-us-west-2.amazonaws.com/public.notion-static.com/2dcaa66c-7674-4ff6-9924-601785b63561/head-bw-640x960.png",
      "time_zone": "America/Los_Angeles",
      "version": 18
    }
  ],
  "Tables": null
}