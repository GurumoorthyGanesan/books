{
  "ID": "06f99600-f316-4125-8721-242da9396d8b",
  "Root": {
    "alive": true,
    "content": [
      "bea6d13e-530c-49b7-bfd9-d52637303421",
      "19bc061e-4538-4c27-a98c-29af86936538",
      "69ef1c91-b161-4504-87ce-b61f8fd15d22",
      "25e7e72d-c82c-4ede-a968-ef34735e66a8",
      "36e21f98-1e6c-4692-92a0-cf356fbf80fa",
      "7a18e3e2-5345-480b-8369-0cb8b6e7c069",
      "3161982c-dfe2-485e-98e5-e2900fed1d57",
      "e581c5d8-8804-4848-b7a9-23a2af977dde",
      "acb59328-26c8-40df-b3e4-b9b401440444",
      "6b948deb-ccb5-462e-8319-775adbbf3da0",
      "56e66335-3bca-4cde-b5e6-2e0c3dbcae3c",
      "e1802703-6ba3-45c9-85d5-22114d9ea506",
      "63ae4e34-bac2-4100-81ff-09b3458ad835",
      "d49da043-bb86-451c-a617-7cfe249717c1",
      "aa112c50-9c94-4655-b32a-38a20434b95e",
      "6f5aade3-4991-4efb-ac21-6684869472a7",
      "e922d653-4ecb-4b79-8d57-3a8d295d7f2c",
      "1f8d9f44-7785-4653-a44f-1c7a19be4e88",
      "94e11204-f727-4291-94b9-b9a32053e910",
      "409f63df-c1cb-448e-b0a5-823ad0994ef7",
      "48e9cbed-0c92-4f86-9abf-250da72c4235",
      "d8caf0a2-7634-4271-8cd9-abd4b42dfdef",
      "11f215ea-72fe-4b46-8e6f-92ab7cf938d9",
      "eff7dfd0-71e4-45b1-b45c-a5af485f30a5",
      "7d8e7e8d-a33c-4e7c-87b7-ac23bf6a1718",
      "36a57b35-4dc2-482a-876a-49f852e96824",
      "57bf4f60-ef63-449f-a4d4-7fdf5c598fb1",
      "d63492e6-e9b8-4e7b-8c66-ade0f141c486",
      "1d50650b-c4cb-4c3a-8764-37443678bdc5",
      "3bb6dc0e-8161-4628-affd-911ba9af447b",
      "9cff5e2b-1733-4e6c-b755-c93cb4f9547c",
      "0f4311cd-d50a-44ce-8341-00e22ebcf282",
      "321b2e42-9163-4bab-92fa-2a10a85bb871",
      "997b2116-6419-4a63-b0e6-34bcdf41e79e",
      "e9310f22-4a19-4ac2-a44d-3ba5a51fb831",
      "e091a6ca-6816-44a0-9936-29153595ad5b",
      "0a9751e1-01c5-407d-88a1-7c2827f6d7fc"
    ],
    "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
    "created_time": 1551937542256,
    "format": {
      "page_full_width": true,
      "page_small_text": true
    },
    "id": "06f99600-f316-4125-8721-242da9396d8b",
    "ignore_block_count": true,
    "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
    "last_edited_time": 1551937542256,
    "parent_id": "9d53db3a-6a86-4feb-bbea-f4bfb502ed5f",
    "parent_table": "block",
    "properties": {
      "title": [
        [
          "Semaphores"
        ]
      ]
    },
    "type": "page",
    "version": 3,
    "content_resolved": [
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937542245,
        "id": "bea6d13e-530c-49b7-bfd9-d52637303421",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937542245,
        "parent_id": "06f99600-f316-4125-8721-242da9396d8b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Semaphores are used to synchronize operations between two or more processes. POSIX defines two different sets of semaphore functions:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Semaphores are used to synchronize operations between two or more processes. POSIX defines two different sets of semaphore functions:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937542248,
        "id": "19bc061e-4538-4c27-a98c-29af86936538",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937542248,
        "parent_id": "06f99600-f316-4125-8721-242da9396d8b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "‘System V IPC’ — "
            ],
            [
              "semctl()",
              [
                [
                  "c"
                ],
                [
                  "a",
                  "http://pubs.opengroup.org/onlinepubs/9699919799/functions/semctl.html"
                ]
              ]
            ],
            [
              ", "
            ],
            [
              "semop()",
              [
                [
                  "c"
                ],
                [
                  "a",
                  "http://pubs.opengroup.org/onlinepubs/9699919799/functions/semop.html"
                ]
              ]
            ],
            [
              ", "
            ],
            [
              "semget()",
              [
                [
                  "c"
                ],
                [
                  "a",
                  "http://pubs.opengroup.org/onlinepubs/9699919799/functions/semget.html"
                ]
              ]
            ],
            [
              "."
            ]
          ]
        },
        "type": "numbered_list",
        "version": 1,
        "inline_content": [
          {
            "Text": "‘System V IPC’ — "
          },
          {
            "Text": "semctl()",
            "AttrFlags": 2,
            "Link": "http://pubs.opengroup.org/onlinepubs/9699919799/functions/semctl.html"
          },
          {
            "Text": ", "
          },
          {
            "Text": "semop()",
            "AttrFlags": 2,
            "Link": "http://pubs.opengroup.org/onlinepubs/9699919799/functions/semop.html"
          },
          {
            "Text": ", "
          },
          {
            "Text": "semget()",
            "AttrFlags": 2,
            "Link": "http://pubs.opengroup.org/onlinepubs/9699919799/functions/semget.html"
          },
          {
            "Text": "."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937542251,
        "id": "69ef1c91-b161-4504-87ce-b61f8fd15d22",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937542251,
        "parent_id": "06f99600-f316-4125-8721-242da9396d8b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "‘POSIX Semaphores’ — "
            ],
            [
              "sem_close()",
              [
                [
                  "c"
                ],
                [
                  "a",
                  "http://pubs.opengroup.org/onlinepubs/9699919799/functions/sem_close.html"
                ]
              ]
            ],
            [
              ", "
            ],
            [
              "sem_destroy()",
              [
                [
                  "c"
                ],
                [
                  "a",
                  "http://pubs.opengroup.org/onlinepubs/9699919799/functions/sem_destroy.html"
                ]
              ]
            ],
            [
              ", "
            ],
            [
              "sem_getvalue()",
              [
                [
                  "c"
                ],
                [
                  "a",
                  "http://pubs.opengroup.org/onlinepubs/9699919799/functions/sem_getvalue.html"
                ]
              ]
            ],
            [
              ", "
            ],
            [
              "sem_init()",
              [
                [
                  "c"
                ],
                [
                  "a",
                  "http://pubs.opengroup.org/onlinepubs/9699919799/functions/sem_init.html"
                ]
              ]
            ],
            [
              ", "
            ],
            [
              "sem_open()",
              [
                [
                  "c"
                ],
                [
                  "a",
                  "http://pubs.opengroup.org/onlinepubs/9699919799/functions/sem_open.html"
                ]
              ]
            ],
            [
              ", "
            ],
            [
              "sem_post()",
              [
                [
                  "c"
                ],
                [
                  "a",
                  "http://pubs.opengroup.org/onlinepubs/9699919799/functions/sem_post.html"
                ]
              ]
            ],
            [
              ", "
            ],
            [
              "sem_trywait()",
              [
                [
                  "c"
                ],
                [
                  "a",
                  "http://pubs.opengroup.org/onlinepubs/9699919799/functions/sem_trywait.html"
                ]
              ]
            ],
            [
              ", "
            ],
            [
              "sem_unlink()",
              [
                [
                  "c"
                ],
                [
                  "a",
                  "http://pubs.opengroup.org/onlinepubs/9699919799/functions/sem_unlink.html"
                ]
              ]
            ],
            [
              "."
            ]
          ]
        },
        "type": "numbered_list",
        "version": 1,
        "inline_content": [
          {
            "Text": "‘POSIX Semaphores’ — "
          },
          {
            "Text": "sem_close()",
            "AttrFlags": 2,
            "Link": "http://pubs.opengroup.org/onlinepubs/9699919799/functions/sem_close.html"
          },
          {
            "Text": ", "
          },
          {
            "Text": "sem_destroy()",
            "AttrFlags": 2,
            "Link": "http://pubs.opengroup.org/onlinepubs/9699919799/functions/sem_destroy.html"
          },
          {
            "Text": ", "
          },
          {
            "Text": "sem_getvalue()",
            "AttrFlags": 2,
            "Link": "http://pubs.opengroup.org/onlinepubs/9699919799/functions/sem_getvalue.html"
          },
          {
            "Text": ", "
          },
          {
            "Text": "sem_init()",
            "AttrFlags": 2,
            "Link": "http://pubs.opengroup.org/onlinepubs/9699919799/functions/sem_init.html"
          },
          {
            "Text": ", "
          },
          {
            "Text": "sem_open()",
            "AttrFlags": 2,
            "Link": "http://pubs.opengroup.org/onlinepubs/9699919799/functions/sem_open.html"
          },
          {
            "Text": ", "
          },
          {
            "Text": "sem_post()",
            "AttrFlags": 2,
            "Link": "http://pubs.opengroup.org/onlinepubs/9699919799/functions/sem_post.html"
          },
          {
            "Text": ", "
          },
          {
            "Text": "sem_trywait()",
            "AttrFlags": 2,
            "Link": "http://pubs.opengroup.org/onlinepubs/9699919799/functions/sem_trywait.html"
          },
          {
            "Text": ", "
          },
          {
            "Text": "sem_unlink()",
            "AttrFlags": 2,
            "Link": "http://pubs.opengroup.org/onlinepubs/9699919799/functions/sem_unlink.html"
          },
          {
            "Text": "."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937542251,
        "id": "25e7e72d-c82c-4ede-a968-ef34735e66a8",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937542251,
        "parent_id": "06f99600-f316-4125-8721-242da9396d8b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "This section describes the System V IPC semaphores, so called because they originated with Unix System V."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "This section describes the System V IPC semaphores, so called because they originated with Unix System V."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937542251,
        "id": "36e21f98-1e6c-4692-92a0-cf356fbf80fa",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937542251,
        "parent_id": "06f99600-f316-4125-8721-242da9396d8b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "First, you’ll need to include the required headers. Old versions of POSIX required "
            ],
            [
              "#include \u003csys/types.h\u003e",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              "; modern POSIX and most systems do not require it."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "First, you’ll need to include the required headers. Old versions of POSIX required "
          },
          {
            "Text": "#include \u003csys/types.h\u003e",
            "AttrFlags": 2
          },
          {
            "Text": "; modern POSIX and most systems do not require it."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937542251,
        "id": "7a18e3e2-5345-480b-8369-0cb8b6e7c069",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937542251,
        "parent_id": "06f99600-f316-4125-8721-242da9396d8b",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "#include \u003csys/sem.h\u003e"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "#include \u003csys/sem.h\u003e",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937542251,
        "id": "3161982c-dfe2-485e-98e5-e2900fed1d57",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937542251,
        "parent_id": "06f99600-f316-4125-8721-242da9396d8b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Then, you’ll need to define a key in both the parent as well as the child."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Then, you’ll need to define a key in both the parent as well as the child."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937542251,
        "id": "e581c5d8-8804-4848-b7a9-23a2af977dde",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937542251,
        "parent_id": "06f99600-f316-4125-8721-242da9396d8b",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "#define KEY 0x1111"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "#define KEY 0x1111",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937542252,
        "id": "acb59328-26c8-40df-b3e4-b9b401440444",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937542252,
        "parent_id": "06f99600-f316-4125-8721-242da9396d8b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "This key needs to be the same in both programs or they will not refer to the same IPC structure. There are ways to generate an agreed key without hard-coding its value."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "This key needs to be the same in both programs or they will not refer to the same IPC structure. There are ways to generate an agreed key without hard-coding its value."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937542252,
        "id": "6b948deb-ccb5-462e-8319-775adbbf3da0",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937542252,
        "parent_id": "06f99600-f316-4125-8721-242da9396d8b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Next, depending on your compiler, you may or may not need to do this step: declare a union for the purpose of semaphore operations."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Next, depending on your compiler, you may or may not need to do this step: declare a union for the purpose of semaphore operations."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937542252,
        "id": "56e66335-3bca-4cde-b5e6-2e0c3dbcae3c",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937542252,
        "parent_id": "06f99600-f316-4125-8721-242da9396d8b",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "union semun {\n    int val;\n    struct semid_ds *buf;\n    unsigned short  *array;\n};"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "union semun {\n    int val;\n    struct semid_ds *buf;\n    unsigned short  *array;\n};",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937542252,
        "id": "e1802703-6ba3-45c9-85d5-22114d9ea506",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937542252,
        "parent_id": "06f99600-f316-4125-8721-242da9396d8b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Next, define your "
            ],
            [
              "try",
              [
                [
                  "i"
                ]
              ]
            ],
            [
              " ("
            ],
            [
              "semwait",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              ") and "
            ],
            [
              "raise",
              [
                [
                  "i"
                ]
              ]
            ],
            [
              " ("
            ],
            [
              "semsignal",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              ") structures. The names P and V originate from "
            ],
            [
              "Dutch",
              [
                [
                  "a",
                  "https://en.wikipedia.org/wiki/Semaphore_(programming)#Operation_names"
                ]
              ]
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Next, define your "
          },
          {
            "Text": "try",
            "AttrFlags": 4
          },
          {
            "Text": " ("
          },
          {
            "Text": "semwait",
            "AttrFlags": 2
          },
          {
            "Text": ") and "
          },
          {
            "Text": "raise",
            "AttrFlags": 4
          },
          {
            "Text": " ("
          },
          {
            "Text": "semsignal",
            "AttrFlags": 2
          },
          {
            "Text": ") structures. The names P and V originate from "
          },
          {
            "Text": "Dutch",
            "Link": "https://en.wikipedia.org/wiki/Semaphore_(programming)#Operation_names"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937542252,
        "id": "63ae4e34-bac2-4100-81ff-09b3458ad835",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937542252,
        "parent_id": "06f99600-f316-4125-8721-242da9396d8b",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "struct sembuf p = { 0, -1, SEM_UNDO}; # semwait\nstruct sembuf v = { 0, +1, SEM_UNDO}; # semsignal"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "struct sembuf p = { 0, -1, SEM_UNDO}; # semwait\nstruct sembuf v = { 0, +1, SEM_UNDO}; # semsignal",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937542253,
        "id": "d49da043-bb86-451c-a617-7cfe249717c1",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937542253,
        "parent_id": "06f99600-f316-4125-8721-242da9396d8b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Now, start by getting the id for your IPC semaphore."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Now, start by getting the id for your IPC semaphore."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937542253,
        "id": "aa112c50-9c94-4655-b32a-38a20434b95e",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937542253,
        "parent_id": "06f99600-f316-4125-8721-242da9396d8b",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "int id;\n// 2nd argument is number of semaphores\n// 3rd argument is the mode (IPC_CREAT creates the semaphore set if needed)\nif ((id = semget(KEY, 1, 0666 | IPC_CREAT) \u003c 0) {\n    /* error handling code */\n}"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "int id;\n// 2nd argument is number of semaphores\n// 3rd argument is the mode (IPC_CREAT creates the semaphore set if needed)\nif ((id = semget(KEY, 1, 0666 | IPC_CREAT) \u003c 0) {\n    /* error handling code */\n}",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937542253,
        "id": "6f5aade3-4991-4efb-ac21-6684869472a7",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937542253,
        "parent_id": "06f99600-f316-4125-8721-242da9396d8b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "In the parent, initialise the semaphore to have a counter of 1."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "In the parent, initialise the semaphore to have a counter of 1."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937542253,
        "id": "e922d653-4ecb-4b79-8d57-3a8d295d7f2c",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937542253,
        "parent_id": "06f99600-f316-4125-8721-242da9396d8b",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "union semun u;\nu.val = 1;\nif (semctl(id, 0, SETVAL, u) \u003c 0) { // SETVAL is a macro to specify that you're setting the value of the semaphore to that specified by the union u\n    /* error handling code */\n}"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "union semun u;\nu.val = 1;\nif (semctl(id, 0, SETVAL, u) \u003c 0) { // SETVAL is a macro to specify that you're setting the value of the semaphore to that specified by the union u\n    /* error handling code */\n}",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937542253,
        "id": "1f8d9f44-7785-4653-a44f-1c7a19be4e88",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937542253,
        "parent_id": "06f99600-f316-4125-8721-242da9396d8b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Now, you can decrement or increment the semaphore as you need. At the start of your critical section, you decrement the counter using the "
            ],
            [
              "semop()",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " function:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Now, you can decrement or increment the semaphore as you need. At the start of your critical section, you decrement the counter using the "
          },
          {
            "Text": "semop()",
            "AttrFlags": 2
          },
          {
            "Text": " function:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937542253,
        "id": "94e11204-f727-4291-94b9-b9a32053e910",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937542253,
        "parent_id": "06f99600-f316-4125-8721-242da9396d8b",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "if (semop(id, \u0026p, 1) \u003c 0) {\n    /* error handling code */\n}"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "if (semop(id, \u0026p, 1) \u003c 0) {\n    /* error handling code */\n}",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937542253,
        "id": "409f63df-c1cb-448e-b0a5-823ad0994ef7",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937542253,
        "parent_id": "06f99600-f316-4125-8721-242da9396d8b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "To increment the semaphore, you use "
            ],
            [
              "\u0026v",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " instead of "
            ],
            [
              "\u0026p",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              ":"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "To increment the semaphore, you use "
          },
          {
            "Text": "\u0026v",
            "AttrFlags": 2
          },
          {
            "Text": " instead of "
          },
          {
            "Text": "\u0026p",
            "AttrFlags": 2
          },
          {
            "Text": ":"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937542254,
        "id": "48e9cbed-0c92-4f86-9abf-250da72c4235",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937542254,
        "parent_id": "06f99600-f316-4125-8721-242da9396d8b",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "if (semop(id, \u0026v, 1) \u003c 0) {\n    /* error handling code */\n}"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "if (semop(id, \u0026v, 1) \u003c 0) {\n    /* error handling code */\n}",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937542254,
        "id": "d8caf0a2-7634-4271-8cd9-abd4b42dfdef",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937542254,
        "parent_id": "06f99600-f316-4125-8721-242da9396d8b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Note that every function returns "
            ],
            [
              "0",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " on success and "
            ],
            [
              "-1",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " on failure. Not checking these return statuses can cause devastating problems."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Note that every function returns "
          },
          {
            "Text": "0",
            "AttrFlags": 2
          },
          {
            "Text": " on success and "
          },
          {
            "Text": "-1",
            "AttrFlags": 2
          },
          {
            "Text": " on failure. Not checking these return statuses can cause devastating problems."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937542254,
        "id": "11f215ea-72fe-4b46-8e6f-92ab7cf938d9",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937542254,
        "parent_id": "06f99600-f316-4125-8721-242da9396d8b",
        "parent_table": "block",
        "type": "divider",
        "version": 1
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937542254,
        "id": "eff7dfd0-71e4-45b1-b45c-a5af485f30a5",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937542254,
        "parent_id": "06f99600-f316-4125-8721-242da9396d8b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Example 1.1: Racing with Threads"
            ]
          ]
        },
        "type": "sub_sub_header",
        "version": 1,
        "inline_content": [
          {
            "Text": "Example 1.1: Racing with Threads"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937542254,
        "id": "7d8e7e8d-a33c-4e7c-87b7-ac23bf6a1718",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937542254,
        "parent_id": "06f99600-f316-4125-8721-242da9396d8b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "The below program will have a process "
            ],
            [
              "fork",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " a child and both parent and child attempt to print characters onto the terminal without any synchronization."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "The below program will have a process "
          },
          {
            "Text": "fork",
            "AttrFlags": 2
          },
          {
            "Text": " a child and both parent and child attempt to print characters onto the terminal without any synchronization."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937542254,
        "id": "36a57b35-4dc2-482a-876a-49f852e96824",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937542254,
        "parent_id": "06f99600-f316-4125-8721-242da9396d8b",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "#include \u003cstdio.h\u003e\n#include \u003cstdlib.h\u003e\n#include \u003cunistd.h\u003e\n#include \u003cstring.h\u003e\n\nint main()\n{\n    int pid;\n    pid =  fork();\n    srand(pid);\n    if(pid \u003c 0)\n    {\n        perror(\"fork\"); exit(1);\n    }\n    else if(pid)\n    {\n        char *s = \"abcdefgh\";\n        int l = strlen(s);\n        for(int i = 0; i \u003c l; ++i)\n        {\n            putchar(s[i]);\n            fflush(stdout);\n            sleep(rand() % 2);\n            putchar(s[i]);\n            fflush(stdout);\n            sleep(rand() % 2);\n        }\n    }\n    else\n    {\n        char *s = \"ABCDEFGH\";\n        int l = strlen(s);\n        for(int i = 0; i \u003c l; ++i)\n        {\n            putchar(s[i]);\n            fflush(stdout);\n            sleep(rand() % 2);\n            putchar(s[i]);\n            fflush(stdout);\n            sleep(rand() % 2);\n        }\n    }\n}"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "#include \u003cstdio.h\u003e\n#include \u003cstdlib.h\u003e\n#include \u003cunistd.h\u003e\n#include \u003cstring.h\u003e\n\nint main()\n{\n    int pid;\n    pid =  fork();\n    srand(pid);\n    if(pid \u003c 0)\n    {\n        perror(\"fork\"); exit(1);\n    }\n    else if(pid)\n    {\n        char *s = \"abcdefgh\";\n        int l = strlen(s);\n        for(int i = 0; i \u003c l; ++i)\n        {\n            putchar(s[i]);\n            fflush(stdout);\n            sleep(rand() % 2);\n            putchar(s[i]);\n            fflush(stdout);\n            sleep(rand() % 2);\n        }\n    }\n    else\n    {\n        char *s = \"ABCDEFGH\";\n        int l = strlen(s);\n        for(int i = 0; i \u003c l; ++i)\n        {\n            putchar(s[i]);\n            fflush(stdout);\n            sleep(rand() % 2);\n            putchar(s[i]);\n            fflush(stdout);\n            sleep(rand() % 2);\n        }\n    }\n}",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937542254,
        "id": "57bf4f60-ef63-449f-a4d4-7fdf5c598fb1",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937542254,
        "parent_id": "06f99600-f316-4125-8721-242da9396d8b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Output (1st run):"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Output (1st run):"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937542254,
        "id": "d63492e6-e9b8-4e7b-8c66-ade0f141c486",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937542254,
        "parent_id": "06f99600-f316-4125-8721-242da9396d8b",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "aAABaBCbCbDDcEEcddeFFGGHHeffgghh"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "aAABaBCbCbDDcEEcddeFFGGHHeffgghh",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937542255,
        "id": "1d50650b-c4cb-4c3a-8764-37443678bdc5",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937542255,
        "parent_id": "06f99600-f316-4125-8721-242da9396d8b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "(2nd run):"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "(2nd run):"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937542255,
        "id": "3bb6dc0e-8161-4628-affd-911ba9af447b",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937542255,
        "parent_id": "06f99600-f316-4125-8721-242da9396d8b",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "aabbccAABddBCeeCffgDDghEEhFFGGHH"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "aabbccAABddBCeeCffgDDghEEhFFGGHH",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937542255,
        "id": "9cff5e2b-1733-4e6c-b755-c93cb4f9547c",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937542255,
        "parent_id": "06f99600-f316-4125-8721-242da9396d8b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Compiling and running this program should give you a different output each time ."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Compiling and running this program should give you a different output each time ."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937542255,
        "id": "0f4311cd-d50a-44ce-8341-00e22ebcf282",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937542255,
        "parent_id": "06f99600-f316-4125-8721-242da9396d8b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Example 1.2: Avoid Racing with Semaphores"
            ]
          ]
        },
        "type": "sub_sub_header",
        "version": 1,
        "inline_content": [
          {
            "Text": "Example 1.2: Avoid Racing with Semaphores"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937542255,
        "id": "321b2e42-9163-4bab-92fa-2a10a85bb871",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937542255,
        "parent_id": "06f99600-f316-4125-8721-242da9396d8b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Modifying "
            ],
            [
              "Example 1.1",
              [
                [
                  "i"
                ]
              ]
            ],
            [
              " to use semaphores, we have:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Modifying "
          },
          {
            "Text": "Example 1.1",
            "AttrFlags": 4
          },
          {
            "Text": " to use semaphores, we have:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937542255,
        "id": "997b2116-6419-4a63-b0e6-34bcdf41e79e",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937542255,
        "parent_id": "06f99600-f316-4125-8721-242da9396d8b",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "#include \u003cstdio.h\u003e\n#include \u003cstdlib.h\u003e\n#include \u003cunistd.h\u003e\n#include \u003cstring.h\u003e\n#include \u003csys/types.h\u003e\n#include \u003csys/ipc.h\u003e\n#include \u003csys/sem.h\u003e\n\n#define KEY 0x1111\n\nunion semun {\n    int val;\n    struct semid_ds *buf;\n    unsigned short  *array;\n};\n\nstruct sembuf p = { 0, -1, SEM_UNDO};\nstruct sembuf v = { 0, +1, SEM_UNDO};\n\nint main()\n{\n    int id = semget(KEY, 1, 0666 | IPC_CREAT);\n    if(id \u003c 0)\n    {\n        perror(\"semget\"); exit(11);\n    }\n    union semun u;\n    u.val = 1;\n    if(semctl(id, 0, SETVAL, u) \u003c 0)\n    {\n        perror(\"semctl\"); exit(12);\n    }\n    int pid;\n    pid =  fork();\n    srand(pid);\n    if(pid \u003c 0)\n    {\n        perror(\"fork\"); exit(1);\n    }\n    else if(pid)\n    {\n        char *s = \"abcdefgh\";\n        int l = strlen(s);\n        for(int i = 0; i \u003c l; ++i)\n        {\n            if(semop(id, \u0026p, 1) \u003c 0)\n            {\n                perror(\"semop p\"); exit(13);\n            }\n            putchar(s[i]);\n            fflush(stdout);\n            sleep(rand() % 2);\n            putchar(s[i]);\n            fflush(stdout);\n            if(semop(id, \u0026v, 1) \u003c 0)\n            {\n                perror(\"semop p\"); exit(14);\n            }\n\n            sleep(rand() % 2);\n        }\n    }\n    else\n    {\n        char *s = \"ABCDEFGH\";\n        int l = strlen(s);\n        for(int i = 0; i \u003c l; ++i)\n        {\n            if(semop(id, \u0026p, 1) \u003c 0)\n            {\n                perror(\"semop p\"); exit(15);\n            }\n            putchar(s[i]);\n            fflush(stdout);\n            sleep(rand() % 2);\n            putchar(s[i]);\n            fflush(stdout);\n            if(semop(id, \u0026v, 1) \u003c 0)\n            {\n                perror(\"semop p\"); exit(16);\n            }\n\n            sleep(rand() % 2);\n        }\n    }\n}"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "#include \u003cstdio.h\u003e\n#include \u003cstdlib.h\u003e\n#include \u003cunistd.h\u003e\n#include \u003cstring.h\u003e\n#include \u003csys/types.h\u003e\n#include \u003csys/ipc.h\u003e\n#include \u003csys/sem.h\u003e\n\n#define KEY 0x1111\n\nunion semun {\n    int val;\n    struct semid_ds *buf;\n    unsigned short  *array;\n};\n\nstruct sembuf p = { 0, -1, SEM_UNDO};\nstruct sembuf v = { 0, +1, SEM_UNDO};\n\nint main()\n{\n    int id = semget(KEY, 1, 0666 | IPC_CREAT);\n    if(id \u003c 0)\n    {\n        perror(\"semget\"); exit(11);\n    }\n    union semun u;\n    u.val = 1;\n    if(semctl(id, 0, SETVAL, u) \u003c 0)\n    {\n        perror(\"semctl\"); exit(12);\n    }\n    int pid;\n    pid =  fork();\n    srand(pid);\n    if(pid \u003c 0)\n    {\n        perror(\"fork\"); exit(1);\n    }\n    else if(pid)\n    {\n        char *s = \"abcdefgh\";\n        int l = strlen(s);\n        for(int i = 0; i \u003c l; ++i)\n        {\n            if(semop(id, \u0026p, 1) \u003c 0)\n            {\n                perror(\"semop p\"); exit(13);\n            }\n            putchar(s[i]);\n            fflush(stdout);\n            sleep(rand() % 2);\n            putchar(s[i]);\n            fflush(stdout);\n            if(semop(id, \u0026v, 1) \u003c 0)\n            {\n                perror(\"semop p\"); exit(14);\n            }\n\n            sleep(rand() % 2);\n        }\n    }\n    else\n    {\n        char *s = \"ABCDEFGH\";\n        int l = strlen(s);\n        for(int i = 0; i \u003c l; ++i)\n        {\n            if(semop(id, \u0026p, 1) \u003c 0)\n            {\n                perror(\"semop p\"); exit(15);\n            }\n            putchar(s[i]);\n            fflush(stdout);\n            sleep(rand() % 2);\n            putchar(s[i]);\n            fflush(stdout);\n            if(semop(id, \u0026v, 1) \u003c 0)\n            {\n                perror(\"semop p\"); exit(16);\n            }\n\n            sleep(rand() % 2);\n        }\n    }\n}",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937542255,
        "id": "e9310f22-4a19-4ac2-a44d-3ba5a51fb831",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937542255,
        "parent_id": "06f99600-f316-4125-8721-242da9396d8b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Output:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Output:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937542255,
        "id": "e091a6ca-6816-44a0-9936-29153595ad5b",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937542255,
        "parent_id": "06f99600-f316-4125-8721-242da9396d8b",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "aabbAABBCCccddeeDDffEEFFGGHHgghh"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "aabbAABBCCccddeeDDffEEFFGGHHgghh",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937542256,
        "id": "0a9751e1-01c5-407d-88a1-7c2827f6d7fc",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937542256,
        "parent_id": "06f99600-f316-4125-8721-242da9396d8b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Compiling and running this program will give you the same output each time."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Compiling and running this program will give you the same output each time."
          }
        ]
      }
    ],
    "title": "Semaphores",
    "format_page": {
      "page_cover": "",
      "page_cover_position": 0,
      "page_font": "",
      "page_full_width": true,
      "page_icon": "",
      "page_small_text": true
    }
  },
  "Users": [
    {
      "email": "kkowalczyk@gmail.com",
      "family_name": "Kowalczyk",
      "given_name": "Krzysztof",
      "id": "bb760e2d-d679-4b64-b2a9-03005b21870a",
      "locale": "en",
      "mobile_onboarding_completed": true,
      "onboarding_completed": true,
      "profile_photo": "https://s3-us-west-2.amazonaws.com/public.notion-static.com/2dcaa66c-7674-4ff6-9924-601785b63561/head-bw-640x960.png",
      "time_zone": "America/Los_Angeles",
      "version": 18
    }
  ],
  "Tables": null
}