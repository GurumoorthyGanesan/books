{
  "ID": "d8db7cb8-e804-48cc-9770-38def0f6bf36",
  "Root": {
    "alive": true,
    "content": [
      "90d0f380-b013-4f28-92f9-bc10cbc47829",
      "415b5b80-02d3-4dad-b275-ce846121e476",
      "419525b3-3dbb-4dc4-bf8a-1f967d8f0b6c",
      "ede0960c-5dd5-4b39-a428-9b87039a731d",
      "aaaa0156-bae7-47ed-825f-ed461af719d5",
      "115d85a7-3d32-4f75-a6f1-2b4dd5f51c11",
      "18ecc0f1-3ef1-47ee-8a35-262f1b86b3a0",
      "1532ea2f-73f1-47f8-8a61-9eaa7ab2152d",
      "e5b44b2b-a783-4d68-ba0a-5d04ff9d5ab2",
      "8e55e9d0-24d8-4555-9d32-9d6e34a22cfe",
      "8b3fda06-5aca-4e0b-a535-88788fd2d776"
    ],
    "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
    "created_time": 1551937197396,
    "format": {
      "page_full_width": true,
      "page_small_text": true
    },
    "id": "d8db7cb8-e804-48cc-9770-38def0f6bf36",
    "ignore_block_count": true,
    "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
    "last_edited_time": 1551937197396,
    "parent_id": "c45bb8ec-af6d-4f58-b094-cc6980d363e1",
    "parent_table": "block",
    "properties": {
      "title": [
        [
          "Loop Unrolling and Duffs Device"
        ]
      ]
    },
    "type": "page",
    "version": 3,
    "content_resolved": [
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937197390,
        "id": "90d0f380-b013-4f28-92f9-bc10cbc47829",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937197390,
        "parent_id": "d8db7cb8-e804-48cc-9770-38def0f6bf36",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Sometimes, the straight forward loop cannot be entirely contained within the loop body. This is because, the loop needs to be primed by some statements "
            ],
            [
              "B",
              [
                [
                  "b"
                ],
                [
                  "i"
                ]
              ]
            ],
            [
              ". Then, the iteration begins with some statements "
            ],
            [
              "A",
              [
                [
                  "b"
                ],
                [
                  "i"
                ]
              ]
            ],
            [
              ", which are then followed by "
            ],
            [
              "B",
              [
                [
                  "b"
                ],
                [
                  "i"
                ]
              ]
            ],
            [
              " again before looping."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Sometimes, the straight forward loop cannot be entirely contained within the loop body. This is because, the loop needs to be primed by some statements "
          },
          {
            "Text": "B",
            "AttrFlags": 5
          },
          {
            "Text": ". Then, the iteration begins with some statements "
          },
          {
            "Text": "A",
            "AttrFlags": 5
          },
          {
            "Text": ", which are then followed by "
          },
          {
            "Text": "B",
            "AttrFlags": 5
          },
          {
            "Text": " again before looping."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937197393,
        "id": "415b5b80-02d3-4dad-b275-ce846121e476",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937197393,
        "parent_id": "d8db7cb8-e804-48cc-9770-38def0f6bf36",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "do_B();\nwhile (condition) {\n    do_A();\n    do_B();\n}"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "do_B();\nwhile (condition) {\n    do_A();\n    do_B();\n}",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937197395,
        "id": "419525b3-3dbb-4dc4-bf8a-1f967d8f0b6c",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937197395,
        "parent_id": "d8db7cb8-e804-48cc-9770-38def0f6bf36",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "To avoid potential cut/paste problems with repeating "
            ],
            [
              "B",
              [
                [
                  "b"
                ],
                [
                  "i"
                ]
              ]
            ],
            [
              " twice in the code, "
            ],
            [
              "Duff’s Device",
              [
                [
                  "a",
                  "https://en.wikipedia.org/wiki/Duff's_device"
                ]
              ]
            ],
            [
              " could be applied to start the loop from the middle of the "
            ],
            [
              "while",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " body, using a "
            ],
            [
              "switch statement",
              [
                [
                  "a",
                  "http://stackoverflow.com/documentation/c/3073/selection-statements/14987/switch-statements"
                ]
              ]
            ],
            [
              " and fall through behavior."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "To avoid potential cut/paste problems with repeating "
          },
          {
            "Text": "B",
            "AttrFlags": 5
          },
          {
            "Text": " twice in the code, "
          },
          {
            "Text": "Duff’s Device",
            "Link": "https://en.wikipedia.org/wiki/Duff's_device"
          },
          {
            "Text": " could be applied to start the loop from the middle of the "
          },
          {
            "Text": "while",
            "AttrFlags": 2
          },
          {
            "Text": " body, using a "
          },
          {
            "Text": "switch statement",
            "Link": "http://stackoverflow.com/documentation/c/3073/selection-statements/14987/switch-statements"
          },
          {
            "Text": " and fall through behavior."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937197395,
        "id": "ede0960c-5dd5-4b39-a428-9b87039a731d",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937197395,
        "parent_id": "d8db7cb8-e804-48cc-9770-38def0f6bf36",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "switch (true) while (condition) {\ncase false: do_A(); /* FALL THROUGH */\ndefault:    do_B(); /* FALL THROUGH */\n}"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "switch (true) while (condition) {\ncase false: do_A(); /* FALL THROUGH */\ndefault:    do_B(); /* FALL THROUGH */\n}",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937197395,
        "id": "aaaa0156-bae7-47ed-825f-ed461af719d5",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937197395,
        "parent_id": "d8db7cb8-e804-48cc-9770-38def0f6bf36",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Duff’s Device was actually invented to implement loop unrolling. Imagine applying a mask to a block of memory, where "
            ],
            [
              "n",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " is a signed integral type with a positive value."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Duff’s Device was actually invented to implement loop unrolling. Imagine applying a mask to a block of memory, where "
          },
          {
            "Text": "n",
            "AttrFlags": 2
          },
          {
            "Text": " is a signed integral type with a positive value."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937197395,
        "id": "115d85a7-3d32-4f75-a6f1-2b4dd5f51c11",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937197395,
        "parent_id": "d8db7cb8-e804-48cc-9770-38def0f6bf36",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "do {\n    *ptr++ ^= mask;\n} while (--n \u003e 0);"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "do {\n    *ptr++ ^= mask;\n} while (--n \u003e 0);",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937197396,
        "id": "18ecc0f1-3ef1-47ee-8a35-262f1b86b3a0",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937197396,
        "parent_id": "d8db7cb8-e804-48cc-9770-38def0f6bf36",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "If "
            ],
            [
              "n",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " were always divisible by 4, you could unroll this easily as:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "If "
          },
          {
            "Text": "n",
            "AttrFlags": 2
          },
          {
            "Text": " were always divisible by 4, you could unroll this easily as:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937197396,
        "id": "1532ea2f-73f1-47f8-8a61-9eaa7ab2152d",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937197396,
        "parent_id": "d8db7cb8-e804-48cc-9770-38def0f6bf36",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "do {\n    *ptr++ ^= mask;\n    *ptr++ ^= mask;\n    *ptr++ ^= mask;\n    *ptr++ ^= mask;\n} while ((n -= 4) \u003e 0);"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "do {\n    *ptr++ ^= mask;\n    *ptr++ ^= mask;\n    *ptr++ ^= mask;\n    *ptr++ ^= mask;\n} while ((n -= 4) \u003e 0);",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937197396,
        "id": "e5b44b2b-a783-4d68-ba0a-5d04ff9d5ab2",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937197396,
        "parent_id": "d8db7cb8-e804-48cc-9770-38def0f6bf36",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "But, with Duff’s Device, the code can follow this unrolling idiom that jumps into the right place in the middle of the loop if "
            ],
            [
              "n",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " is not divisible by 4."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "But, with Duff’s Device, the code can follow this unrolling idiom that jumps into the right place in the middle of the loop if "
          },
          {
            "Text": "n",
            "AttrFlags": 2
          },
          {
            "Text": " is not divisible by 4."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937197396,
        "id": "8e55e9d0-24d8-4555-9d32-9d6e34a22cfe",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937197396,
        "parent_id": "d8db7cb8-e804-48cc-9770-38def0f6bf36",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "switch (n % 4) do {\ncase 0: *ptr++ ^= mask; /* FALL THROUGH */\ncase 3: *ptr++ ^= mask; /* FALL THROUGH */\ncase 2: *ptr++ ^= mask; /* FALL THROUGH */\ncase 1: *ptr++ ^= mask; /* FALL THROUGH */\n} while ((n -= 4) \u003e 0);"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "switch (n % 4) do {\ncase 0: *ptr++ ^= mask; /* FALL THROUGH */\ncase 3: *ptr++ ^= mask; /* FALL THROUGH */\ncase 2: *ptr++ ^= mask; /* FALL THROUGH */\ncase 1: *ptr++ ^= mask; /* FALL THROUGH */\n} while ((n -= 4) \u003e 0);",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1551937197396,
        "id": "8b3fda06-5aca-4e0b-a535-88788fd2d776",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1551937197396,
        "parent_id": "d8db7cb8-e804-48cc-9770-38def0f6bf36",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "This kind of manual unrolling is rarely required with modern compilers, since the compiler’s optimization engine can unroll loops on the programmer’s behalf."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "This kind of manual unrolling is rarely required with modern compilers, since the compiler’s optimization engine can unroll loops on the programmer’s behalf."
          }
        ]
      }
    ],
    "title": "Loop Unrolling and Duffs Device",
    "format_page": {
      "page_cover": "",
      "page_cover_position": 0,
      "page_font": "",
      "page_full_width": true,
      "page_icon": "",
      "page_small_text": true
    }
  },
  "Users": [
    {
      "email": "kkowalczyk@gmail.com",
      "family_name": "Kowalczyk",
      "given_name": "Krzysztof",
      "id": "bb760e2d-d679-4b64-b2a9-03005b21870a",
      "locale": "en",
      "mobile_onboarding_completed": true,
      "onboarding_completed": true,
      "profile_photo": "https://s3-us-west-2.amazonaws.com/public.notion-static.com/2dcaa66c-7674-4ff6-9924-601785b63561/head-bw-640x960.png",
      "time_zone": "America/Los_Angeles",
      "version": 18
    }
  ],
  "Tables": null
}