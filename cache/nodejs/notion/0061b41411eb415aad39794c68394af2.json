{
  "ID": "0061b414-11eb-415a-ad39-794c68394af2",
  "Root": {
    "alive": true,
    "content": [
      "e9a6bd50-0e93-40c6-b143-c6970d63cd88",
      "373a6f74-0571-408d-a610-4963a8872cb9",
      "db7972e3-2ecd-46dd-8896-f3d6938ca874",
      "3d2066b3-873e-45c5-b26e-e42c42aa66bd",
      "70ac4bb3-8a2f-4a97-bdbe-bba2701ee7fd",
      "d4a30bb4-a778-4cdf-b90a-bd2e5c714084",
      "7ce3c51f-5ad0-41ca-8cfc-3b1614486928",
      "5b301d8b-8e9f-4226-97ab-bef45d77f9d6",
      "0aa3ec3a-a546-4e4e-b31b-63d3ef1b8a42",
      "609df117-a1f1-4915-83e4-e80406cab052",
      "255898b5-d50f-475b-b854-b1731dbf2bcd",
      "0f77e0ed-90d7-41f6-8027-acee072f321a"
    ],
    "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
    "created_time": 1552019338075,
    "format": {
      "page_full_width": true,
      "page_small_text": true
    },
    "id": "0061b414-11eb-415a-ad39-794c68394af2",
    "ignore_block_count": true,
    "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
    "last_edited_time": 1552019338075,
    "parent_id": "5e1204a7-097f-4e46-81c8-cfb6d25473e3",
    "parent_table": "block",
    "properties": {
      "title": [
        [
          "Using an IIS Virtual Directory or Nested Application via appSettings"
        ]
      ]
    },
    "type": "page",
    "version": 3,
    "content_resolved": [
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552019338069,
        "id": "e9a6bd50-0e93-40c6-b143-c6970d63cd88",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552019338069,
        "parent_id": "0061b414-11eb-415a-ad39-794c68394af2",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Using a Virtual Directory or Nested Application in IIS is a common scenario and most likely one that you’ll want to take advantage of when using IISNode."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Using a Virtual Directory or Nested Application in IIS is a common scenario and most likely one that you’ll want to take advantage of when using IISNode."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552019338072,
        "id": "373a6f74-0571-408d-a610-4963a8872cb9",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552019338072,
        "parent_id": "0061b414-11eb-415a-ad39-794c68394af2",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "IISNode doesn’t provide direct support for Virtual Directories or Nested Applications via configuration so to achieve this we’ll need to take advantage of a feature of IISNode that isn’t part of the configuration and is much lesser known. All children of the "
            ],
            [
              "\u003cappSettings\u003e",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " element with the "
            ],
            [
              "Web.config",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " are added to the "
            ],
            [
              "process.env",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " object as properties using the appSetting key."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "IISNode doesn’t provide direct support for Virtual Directories or Nested Applications via configuration so to achieve this we’ll need to take advantage of a feature of IISNode that isn’t part of the configuration and is much lesser known. All children of the "
          },
          {
            "Text": "\u003cappSettings\u003e",
            "AttrFlags": 2
          },
          {
            "Text": " element with the "
          },
          {
            "Text": "Web.config",
            "AttrFlags": 2
          },
          {
            "Text": " are added to the "
          },
          {
            "Text": "process.env",
            "AttrFlags": 2
          },
          {
            "Text": " object as properties using the appSetting key."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552019338072,
        "id": "db7972e3-2ecd-46dd-8896-f3d6938ca874",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552019338072,
        "parent_id": "0061b414-11eb-415a-ad39-794c68394af2",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Lets create a Virtual Directory in our "
            ],
            [
              "\u003cappSettings\u003e",
              [
                [
                  "c"
                ]
              ]
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Lets create a Virtual Directory in our "
          },
          {
            "Text": "\u003cappSettings\u003e",
            "AttrFlags": 2
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552019338072,
        "id": "3d2066b3-873e-45c5-b26e-e42c42aa66bd",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552019338072,
        "parent_id": "0061b414-11eb-415a-ad39-794c68394af2",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "\u003cappSettings\u003e\n  \u003cadd key=\"virtualDirPath\" value=\"/foo\" /\u003e\n\u003c/appSettings\u003e"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "\u003cappSettings\u003e\n  \u003cadd key=\"virtualDirPath\" value=\"/foo\" /\u003e\n\u003c/appSettings\u003e",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552019338072,
        "id": "70ac4bb3-8a2f-4a97-bdbe-bba2701ee7fd",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552019338072,
        "parent_id": "0061b414-11eb-415a-ad39-794c68394af2",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Within our Node.js App we can access the "
            ],
            [
              "virtualDirPath",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " setting"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Within our Node.js App we can access the "
          },
          {
            "Text": "virtualDirPath",
            "AttrFlags": 2
          },
          {
            "Text": " setting"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552019338072,
        "id": "d4a30bb4-a778-4cdf-b90a-bd2e5c714084",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552019338072,
        "parent_id": "0061b414-11eb-415a-ad39-794c68394af2",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "console.log(process.env.virtualDirPath); // prints /foo"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "console.log(process.env.virtualDirPath); // prints /foo",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552019338073,
        "id": "7ce3c51f-5ad0-41ca-8cfc-3b1614486928",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552019338073,
        "parent_id": "0061b414-11eb-415a-ad39-794c68394af2",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Now that we can use the "
            ],
            [
              "\u003cappSettings\u003e",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " element for configuration, lets take advantage of that and use it in our server code."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Now that we can use the "
          },
          {
            "Text": "\u003cappSettings\u003e",
            "AttrFlags": 2
          },
          {
            "Text": " element for configuration, lets take advantage of that and use it in our server code."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552019338073,
        "id": "5b301d8b-8e9f-4226-97ab-bef45d77f9d6",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552019338073,
        "parent_id": "0061b414-11eb-415a-ad39-794c68394af2",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "// Access the virtualDirPath appSettings and give it a default value of '/'\n// in the event that it doesn't exist or isn't set\nvar virtualDirPath = process.env.virtualDirPath || '/';\n\n// We also want to make sure that our virtualDirPath \n// always starts with a forward slash\nif (!virtualDirPath.startsWith('/', 0))\n  virtualDirPath = '/' + virtualDirPath;\n\n// Setup a route at the index of our app    \nserver.get(virtualDirPath, (req, res) =\u003e {\n    return res.status(200).send('Hello World');\n});"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "// Access the virtualDirPath appSettings and give it a default value of '/'\n// in the event that it doesn't exist or isn't set\nvar virtualDirPath = process.env.virtualDirPath || '/';\n\n// We also want to make sure that our virtualDirPath \n// always starts with a forward slash\nif (!virtualDirPath.startsWith('/', 0))\n  virtualDirPath = '/' + virtualDirPath;\n\n// Setup a route at the index of our app    \nserver.get(virtualDirPath, (req, res) =\u003e {\n    return res.status(200).send('Hello World');\n});",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552019338074,
        "id": "0aa3ec3a-a546-4e4e-b31b-63d3ef1b8a42",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552019338074,
        "parent_id": "0061b414-11eb-415a-ad39-794c68394af2",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "We can use the virtualDirPath with our static resources as well"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "We can use the virtualDirPath with our static resources as well"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552019338074,
        "id": "609df117-a1f1-4915-83e4-e80406cab052",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552019338074,
        "parent_id": "0061b414-11eb-415a-ad39-794c68394af2",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "// Public Directory\nserver.use(express.static(path.join(virtualDirPath, 'public')));\n// Bower\nserver.use('/bower_components', express.static(path.join(virtualDirPath, 'bower_components')));"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "// Public Directory\nserver.use(express.static(path.join(virtualDirPath, 'public')));\n// Bower\nserver.use('/bower_components', express.static(path.join(virtualDirPath, 'bower_components')));",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552019338075,
        "id": "255898b5-d50f-475b-b854-b1731dbf2bcd",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552019338075,
        "parent_id": "0061b414-11eb-415a-ad39-794c68394af2",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Lets put all of that together"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Lets put all of that together"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552019338075,
        "id": "0f77e0ed-90d7-41f6-8027-acee072f321a",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552019338075,
        "parent_id": "0061b414-11eb-415a-ad39-794c68394af2",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "const express = require('express');\nconst server = express();\n\nconst port = process.env.PORT || 3000;\n\n// Access the virtualDirPath appSettings and give it a default value of '/'\n// in the event that it doesn't exist or isn't set\nvar virtualDirPath = process.env.virtualDirPath || '/';\n\n// We also want to make sure that our virtualDirPath \n// always starts with a forward slash\nif (!virtualDirPath.startsWith('/', 0))\n  virtualDirPath = '/' + virtualDirPath;\n\n// Public Directory\nserver.use(express.static(path.join(virtualDirPath, 'public')));\n// Bower\nserver.use('/bower_components', express.static(path.join(virtualDirPath, 'bower_components')));\n\n// Setup a route at the index of our app    \nserver.get(virtualDirPath, (req, res) =\u003e {\n    return res.status(200).send('Hello World');\n});\n\nserver.listen(port, () =\u003e {\n    console.log(`Listening on ${port}`);\n});"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "const express = require('express');\nconst server = express();\n\nconst port = process.env.PORT || 3000;\n\n// Access the virtualDirPath appSettings and give it a default value of '/'\n// in the event that it doesn't exist or isn't set\nvar virtualDirPath = process.env.virtualDirPath || '/';\n\n// We also want to make sure that our virtualDirPath \n// always starts with a forward slash\nif (!virtualDirPath.startsWith('/', 0))\n  virtualDirPath = '/' + virtualDirPath;\n\n// Public Directory\nserver.use(express.static(path.join(virtualDirPath, 'public')));\n// Bower\nserver.use('/bower_components', express.static(path.join(virtualDirPath, 'bower_components')));\n\n// Setup a route at the index of our app    \nserver.get(virtualDirPath, (req, res) =\u003e {\n    return res.status(200).send('Hello World');\n});\n\nserver.listen(port, () =\u003e {\n    console.log(`Listening on ${port}`);\n});",
        "code_language": "Plain Text"
      }
    ],
    "title": "Using an IIS Virtual Directory or Nested Application via appSettings",
    "format_page": {
      "page_cover": "",
      "page_cover_position": 0,
      "page_font": "",
      "page_full_width": true,
      "page_icon": "",
      "page_small_text": true
    }
  },
  "Users": [
    {
      "email": "kkowalczyk@gmail.com",
      "family_name": "Kowalczyk",
      "given_name": "Krzysztof",
      "id": "bb760e2d-d679-4b64-b2a9-03005b21870a",
      "locale": "en",
      "mobile_onboarding_completed": true,
      "onboarding_completed": true,
      "profile_photo": "https://s3-us-west-2.amazonaws.com/public.notion-static.com/2dcaa66c-7674-4ff6-9924-601785b63561/head-bw-640x960.png",
      "time_zone": "America/Los_Angeles",
      "version": 18
    }
  ],
  "Tables": null
}