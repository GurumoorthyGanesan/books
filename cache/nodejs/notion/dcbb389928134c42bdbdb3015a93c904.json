{
  "ID": "dcbb3899-2813-4c42-bdbd-b3015a93c904",
  "Root": {
    "alive": true,
    "content": [
      "99596f2f-7176-49b0-8508-dc6a690a0a64",
      "22c778e8-d5f2-4826-93bd-05b8fb50025d",
      "a6dfb561-cab2-48c1-aad6-772f77aefd97",
      "f57e3472-064f-4d28-ab03-6cbe012b250c",
      "c6e4bc65-6c51-4298-9361-00e703556eaf",
      "96d3c970-ada4-46e7-b75b-23e7501c9fa8",
      "89169ed5-8b8f-4fd9-93fa-bc3775157a66",
      "3b4970c2-19aa-4c37-8243-23eac4ab19c5",
      "8057ca1b-efec-4202-b338-376fb005ecb4"
    ],
    "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
    "created_time": 1552019927043,
    "format": {
      "page_full_width": true,
      "page_small_text": true
    },
    "id": "dcbb3899-2813-4c42-bdbd-b3015a93c904",
    "ignore_block_count": true,
    "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
    "last_edited_time": 1552019927043,
    "parent_id": "513bcc5d-2a59-4d0e-b96b-00eb1237d7dd",
    "parent_table": "block",
    "properties": {
      "title": [
        [
          "Google Passport authentication"
        ]
      ]
    },
    "type": "page",
    "version": 3,
    "content_resolved": [
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552019927042,
        "id": "99596f2f-7176-49b0-8508-dc6a690a0a64",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552019927042,
        "parent_id": "dcbb3899-2813-4c42-bdbd-b3015a93c904",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "We have simple module available in npm for goggle authetication name "
            ],
            [
              "passport-google-oauth20",
              [
                [
                  "b"
                ]
              ]
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "We have simple module available in npm for goggle authetication name "
          },
          {
            "Text": "passport-google-oauth20",
            "AttrFlags": 1
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552019927043,
        "id": "22c778e8-d5f2-4826-93bd-05b8fb50025d",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552019927043,
        "parent_id": "dcbb3899-2813-4c42-bdbd-b3015a93c904",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Consider the following example In this example have created a folder namely config having the passport.js and google.js file in the root directory. In your app.js include the following"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Consider the following example In this example have created a folder namely config having the passport.js and google.js file in the root directory. In your app.js include the following"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552019927043,
        "id": "a6dfb561-cab2-48c1-aad6-772f77aefd97",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552019927043,
        "parent_id": "dcbb3899-2813-4c42-bdbd-b3015a93c904",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "var express = require('express');\nvar session = require('express-session');\nvar passport = require('./config/passport'); // path where the passport file placed  \nvar app = express();\npassport(app);"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "var express = require('express');\nvar session = require('express-session');\nvar passport = require('./config/passport'); // path where the passport file placed  \nvar app = express();\npassport(app);",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552019927043,
        "id": "f57e3472-064f-4d28-ab03-6cbe012b250c",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552019927043,
        "parent_id": "dcbb3899-2813-4c42-bdbd-b3015a93c904",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "// other code to initailize the server , error handle"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "// other code to initailize the server , error handle"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552019927043,
        "id": "c6e4bc65-6c51-4298-9361-00e703556eaf",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552019927043,
        "parent_id": "dcbb3899-2813-4c42-bdbd-b3015a93c904",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "In the passport.js file in the config folder include the following code"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "In the passport.js file in the config folder include the following code"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552019927043,
        "id": "96d3c970-ada4-46e7-b75b-23e7501c9fa8",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552019927043,
        "parent_id": "dcbb3899-2813-4c42-bdbd-b3015a93c904",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "var passport = require  ('passport'),\ngoogle = require('./google'),\nUser = require('./../model/user'); // User is the  mongoose model\n\nmodule.exports = function(app){\n  app.use(passport.initialize());\n  app.use(passport.session());\n  passport.serializeUser(function(user, done){\n      done(null, user);\n  });\n  passport.deserializeUser(function (user, done) {\n     done(null, user);\n  });\n  google();\n};"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "var passport = require  ('passport'),\ngoogle = require('./google'),\nUser = require('./../model/user'); // User is the  mongoose model\n\nmodule.exports = function(app){\n  app.use(passport.initialize());\n  app.use(passport.session());\n  passport.serializeUser(function(user, done){\n      done(null, user);\n  });\n  passport.deserializeUser(function (user, done) {\n     done(null, user);\n  });\n  google();\n};",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552019927043,
        "id": "89169ed5-8b8f-4fd9-93fa-bc3775157a66",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552019927043,
        "parent_id": "dcbb3899-2813-4c42-bdbd-b3015a93c904",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "In the google.js file in the same config folder include following"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "In the google.js file in the same config folder include following"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552019927043,
        "id": "3b4970c2-19aa-4c37-8243-23eac4ab19c5",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552019927043,
        "parent_id": "dcbb3899-2813-4c42-bdbd-b3015a93c904",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "var passport = require('passport'),\nGoogleStrategy = require('passport-google-oauth20').Strategy,\nUser = require('./../model/user');\nmodule.exports = function () {\npassport.use(new GoogleStrategy({\n        clientID: 'CLIENT ID',\n        clientSecret: 'CLIENT SECRET',\n        callbackURL: \"http://localhost:3000/auth/google/callback\"\n    },\n    function(accessToken, refreshToken, profile, cb) {\n        User.findOne({ googleId : profile.id }, function (err, user) {\n            if(err){\n                return cb(err, false, {message : err});\n            }else {\n                if (user != '' \u0026\u0026 user != null) {\n                    return cb(null, user, {message : \"User \"});\n                } else {\n                    var username  = profile.displayName.split(' ');\n                    var userData = new User({\n                        name : profile.displayName,\n                        username : username[0],\n                        password : username[0],\n                        facebookId : '',\n                        googleId : profile.id,\n                    });\n                    // send email to user just in case required to send the newly created\n                    // credentails to user for future login without using google login\n                    userData.save(function (err, newuser) {\n                        if (err) {\n                            return cb(null, false, {message : err + \" !!! Please try again\"});\n                        }else{\n                            return cb(null, newuser);\n                        }\n                    });\n                }\n            }\n        });\n      }\n  ));\n};"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "var passport = require('passport'),\nGoogleStrategy = require('passport-google-oauth20').Strategy,\nUser = require('./../model/user');\nmodule.exports = function () {\npassport.use(new GoogleStrategy({\n        clientID: 'CLIENT ID',\n        clientSecret: 'CLIENT SECRET',\n        callbackURL: \"http://localhost:3000/auth/google/callback\"\n    },\n    function(accessToken, refreshToken, profile, cb) {\n        User.findOne({ googleId : profile.id }, function (err, user) {\n            if(err){\n                return cb(err, false, {message : err});\n            }else {\n                if (user != '' \u0026\u0026 user != null) {\n                    return cb(null, user, {message : \"User \"});\n                } else {\n                    var username  = profile.displayName.split(' ');\n                    var userData = new User({\n                        name : profile.displayName,\n                        username : username[0],\n                        password : username[0],\n                        facebookId : '',\n                        googleId : profile.id,\n                    });\n                    // send email to user just in case required to send the newly created\n                    // credentails to user for future login without using google login\n                    userData.save(function (err, newuser) {\n                        if (err) {\n                            return cb(null, false, {message : err + \" !!! Please try again\"});\n                        }else{\n                            return cb(null, newuser);\n                        }\n                    });\n                }\n            }\n        });\n      }\n  ));\n};",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552019927043,
        "id": "8057ca1b-efec-4202-b338-376fb005ecb4",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552019927043,
        "parent_id": "dcbb3899-2813-4c42-bdbd-b3015a93c904",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Here in this example, if user is not in DB then creating a new user in DB for local reference using the field name googleId in user model."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Here in this example, if user is not in DB then creating a new user in DB for local reference using the field name googleId in user model."
          }
        ]
      }
    ],
    "title": "Google Passport authentication",
    "format_page": {
      "page_cover": "",
      "page_cover_position": 0,
      "page_font": "",
      "page_full_width": true,
      "page_icon": "",
      "page_small_text": true
    }
  },
  "Users": [
    {
      "email": "kkowalczyk@gmail.com",
      "family_name": "Kowalczyk",
      "given_name": "Krzysztof",
      "id": "bb760e2d-d679-4b64-b2a9-03005b21870a",
      "locale": "en",
      "mobile_onboarding_completed": true,
      "onboarding_completed": true,
      "profile_photo": "https://s3-us-west-2.amazonaws.com/public.notion-static.com/2dcaa66c-7674-4ff6-9924-601785b63561/head-bw-640x960.png",
      "time_zone": "America/Los_Angeles",
      "version": 18
    }
  ],
  "Tables": null
}