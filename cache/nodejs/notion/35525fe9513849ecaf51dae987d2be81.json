{
  "ID": "35525fe9-5138-49ec-af51-dae987d2be81",
  "Root": {
    "alive": true,
    "content": [
      "a24b62a2-7265-4cff-b797-86d72c783989",
      "aceb91f0-698c-4a71-ae29-1888c0dfef6f",
      "952cda66-074a-43a2-914b-61610f205635",
      "bce6b6ed-c31b-48bb-91cf-de81bb13c1fb",
      "4dea3d43-9da7-4662-9887-0a661cd5ae3a",
      "667fbc99-957e-4a0d-a8ee-4304017f0054",
      "5510aae6-37ab-4fcc-b1a3-9cd223393526",
      "12be8985-81f7-4017-8340-12248fc11a50",
      "b40029ab-9b89-4960-af55-4472aee2f5d0",
      "c649672e-2aa9-4fe3-b42d-37feca4c113b",
      "c2e37f5c-c18e-4f1d-8a5a-2ad063572f98",
      "12567f03-fc4f-4f1c-8ff5-9eeeb5ae0bad",
      "cf3a9081-c560-4691-93ea-b46f8e01b95d",
      "4caea33d-9da9-4819-b422-130998069327",
      "c35c1575-7647-4b25-a957-dd2f45b92d2b",
      "1063e32d-8602-4775-983c-4e60f79cedc2",
      "64f29b06-f2bb-4b9c-bd37-d14407f0222c",
      "7ff704d7-15f5-4a2d-a307-5fc96a3a08c9",
      "03ac0ad9-c6b3-4d16-8ab6-9404a35e6497",
      "08d6e8f8-8f16-465e-9a9c-7cf3edf77693"
    ],
    "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
    "created_time": 1552018304090,
    "format": {
      "page_full_width": true,
      "page_small_text": true
    },
    "id": "35525fe9-5138-49ec-af51-dae987d2be81",
    "ignore_block_count": true,
    "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
    "last_edited_time": 1552018304090,
    "parent_id": "c942f083-51ce-480b-81b7-3d0096c12500",
    "parent_table": "block",
    "properties": {
      "title": [
        [
          "Single File Upload using multer"
        ]
      ]
    },
    "type": "page",
    "version": 3,
    "content_resolved": [
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552018304085,
        "id": "a24b62a2-7265-4cff-b797-86d72c783989",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552018304085,
        "parent_id": "35525fe9-5138-49ec-af51-dae987d2be81",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Remember to"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Remember to"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552018304087,
        "id": "aceb91f0-698c-4a71-ae29-1888c0dfef6f",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552018304087,
        "parent_id": "35525fe9-5138-49ec-af51-dae987d2be81",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "create folder for upload ("
            ],
            [
              "uploads",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " in example)."
            ]
          ]
        },
        "type": "bulleted_list",
        "version": 1,
        "inline_content": [
          {
            "Text": "create folder for upload ("
          },
          {
            "Text": "uploads",
            "AttrFlags": 2
          },
          {
            "Text": " in example)."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552018304087,
        "id": "952cda66-074a-43a2-914b-61610f205635",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552018304087,
        "parent_id": "35525fe9-5138-49ec-af51-dae987d2be81",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "install multer "
            ],
            [
              "npm i -S multer",
              [
                [
                  "c"
                ]
              ]
            ]
          ]
        },
        "type": "bulleted_list",
        "version": 1,
        "inline_content": [
          {
            "Text": "install multer "
          },
          {
            "Text": "npm i -S multer",
            "AttrFlags": 2
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552018304088,
        "id": "bce6b6ed-c31b-48bb-91cf-de81bb13c1fb",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552018304088,
        "parent_id": "35525fe9-5138-49ec-af51-dae987d2be81",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "server.js",
              [
                [
                  "b"
                ],
                [
                  "c"
                ]
              ]
            ],
            [
              ":"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "server.js",
            "AttrFlags": 3
          },
          {
            "Text": ":"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552018304088,
        "id": "4dea3d43-9da7-4662-9887-0a661cd5ae3a",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552018304088,
        "parent_id": "35525fe9-5138-49ec-af51-dae987d2be81",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "var express =   require(\"express\");\nvar multer  =   require('multer');\nvar app         =   express();\nvar fs = require('fs');\n\napp.get('/',function(req,res){\n      res.sendFile(__dirname + \"/index.html\");\n});\n\nvar storage =   multer.diskStorage({\n  destination: function (req, file, callback) {\n    fs.mkdir('./uploads', function(err) {\n        if(err) {\n            console.log(err.stack)\n        } else {\n            callback(null, './uploads');\n        }\n    })\n  },\n  filename: function (req, file, callback) {\n    callback(null, file.fieldname + '-' + Date.now());\n  }\n});\n\napp.post('/api/file',function(req,res){\n    var upload = multer({ storage : storage}).single('userFile');\n    upload(req,res,function(err) {\n        if(err) {\n            return res.end(\"Error uploading file.\");\n        }\n        res.end(\"File is uploaded\");\n    });\n});\n\napp.listen(3000,function(){\n    console.log(\"Working on port 3000\");\n});"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "var express =   require(\"express\");\nvar multer  =   require('multer');\nvar app         =   express();\nvar fs = require('fs');\n\napp.get('/',function(req,res){\n      res.sendFile(__dirname + \"/index.html\");\n});\n\nvar storage =   multer.diskStorage({\n  destination: function (req, file, callback) {\n    fs.mkdir('./uploads', function(err) {\n        if(err) {\n            console.log(err.stack)\n        } else {\n            callback(null, './uploads');\n        }\n    })\n  },\n  filename: function (req, file, callback) {\n    callback(null, file.fieldname + '-' + Date.now());\n  }\n});\n\napp.post('/api/file',function(req,res){\n    var upload = multer({ storage : storage}).single('userFile');\n    upload(req,res,function(err) {\n        if(err) {\n            return res.end(\"Error uploading file.\");\n        }\n        res.end(\"File is uploaded\");\n    });\n});\n\napp.listen(3000,function(){\n    console.log(\"Working on port 3000\");\n});",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552018304088,
        "id": "667fbc99-957e-4a0d-a8ee-4304017f0054",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552018304088,
        "parent_id": "35525fe9-5138-49ec-af51-dae987d2be81",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "index.html",
              [
                [
                  "b"
                ],
                [
                  "c"
                ]
              ]
            ],
            [
              ":"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "index.html",
            "AttrFlags": 3
          },
          {
            "Text": ":"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552018304088,
        "id": "5510aae6-37ab-4fcc-b1a3-9cd223393526",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552018304088,
        "parent_id": "35525fe9-5138-49ec-af51-dae987d2be81",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "\u003cform id        =  \"uploadForm\"\n     enctype   =  \"multipart/form-data\"\n     action    =  \"/api/file\"\n     method    =  \"post\"\n\u003e\n\u003cinput type=\"file\" name=\"userFile\" /\u003e\n\u003cinput type=\"submit\" value=\"Upload File\" name=\"submit\"\u003e\n\u003c/form\u003e"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "\u003cform id        =  \"uploadForm\"\n     enctype   =  \"multipart/form-data\"\n     action    =  \"/api/file\"\n     method    =  \"post\"\n\u003e\n\u003cinput type=\"file\" name=\"userFile\" /\u003e\n\u003cinput type=\"submit\" value=\"Upload File\" name=\"submit\"\u003e\n\u003c/form\u003e",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552018304088,
        "id": "12be8985-81f7-4017-8340-12248fc11a50",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552018304088,
        "parent_id": "35525fe9-5138-49ec-af51-dae987d2be81",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Note:"
            ]
          ]
        },
        "type": "header",
        "version": 1,
        "inline_content": [
          {
            "Text": "Note:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552018304089,
        "id": "b40029ab-9b89-4960-af55-4472aee2f5d0",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552018304089,
        "parent_id": "35525fe9-5138-49ec-af51-dae987d2be81",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "To upload file with extension you can use Node.js "
            ],
            [
              "path",
              [
                [
                  "a",
                  "https://nodejs.org/api/path.html#path_path"
                ]
              ]
            ],
            [
              " built-in library"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "To upload file with extension you can use Node.js "
          },
          {
            "Text": "path",
            "Link": "https://nodejs.org/api/path.html#path_path"
          },
          {
            "Text": " built-in library"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552018304089,
        "id": "c649672e-2aa9-4fe3-b42d-37feca4c113b",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552018304089,
        "parent_id": "35525fe9-5138-49ec-af51-dae987d2be81",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "For that just require "
            ],
            [
              "path",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " to "
            ],
            [
              "server.js",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " file:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "For that just require "
          },
          {
            "Text": "path",
            "AttrFlags": 2
          },
          {
            "Text": " to "
          },
          {
            "Text": "server.js",
            "AttrFlags": 2
          },
          {
            "Text": " file:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552018304089,
        "id": "c2e37f5c-c18e-4f1d-8a5a-2ad063572f98",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552018304089,
        "parent_id": "35525fe9-5138-49ec-af51-dae987d2be81",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "var path = require('path');"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "var path = require('path');",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552018304089,
        "id": "12567f03-fc4f-4f1c-8ff5-9eeeb5ae0bad",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552018304089,
        "parent_id": "35525fe9-5138-49ec-af51-dae987d2be81",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "and change:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "and change:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552018304089,
        "id": "cf3a9081-c560-4691-93ea-b46f8e01b95d",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552018304089,
        "parent_id": "35525fe9-5138-49ec-af51-dae987d2be81",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "callback(null, file.fieldname + '-' + Date.now());"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "callback(null, file.fieldname + '-' + Date.now());",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552018304089,
        "id": "4caea33d-9da9-4819-b422-130998069327",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552018304089,
        "parent_id": "35525fe9-5138-49ec-af51-dae987d2be81",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "adding a file extension in the following way:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "adding a file extension in the following way:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552018304089,
        "id": "c35c1575-7647-4b25-a957-dd2f45b92d2b",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552018304089,
        "parent_id": "35525fe9-5138-49ec-af51-dae987d2be81",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "callback(null, file.fieldname + '-' + Date.now() + path.extname(file.originalname));"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "callback(null, file.fieldname + '-' + Date.now() + path.extname(file.originalname));",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552018304089,
        "id": "1063e32d-8602-4775-983c-4e60f79cedc2",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552018304089,
        "parent_id": "35525fe9-5138-49ec-af51-dae987d2be81",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "How to filter upload by extension:"
            ]
          ]
        },
        "type": "header",
        "version": 1,
        "inline_content": [
          {
            "Text": "How to filter upload by extension:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552018304090,
        "id": "64f29b06-f2bb-4b9c-bd37-d14407f0222c",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552018304090,
        "parent_id": "35525fe9-5138-49ec-af51-dae987d2be81",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "In this example, view how to upload files to allow only certain extensions."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "In this example, view how to upload files to allow only certain extensions."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552018304090,
        "id": "7ff704d7-15f5-4a2d-a307-5fc96a3a08c9",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552018304090,
        "parent_id": "35525fe9-5138-49ec-af51-dae987d2be81",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "For example only images extensions. Just add to "
            ],
            [
              "var upload = multer({ storage : storage}).single('userFile');",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " fileFilter condition"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "For example only images extensions. Just add to "
          },
          {
            "Text": "var upload = multer({ storage : storage}).single('userFile');",
            "AttrFlags": 2
          },
          {
            "Text": " fileFilter condition"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552018304090,
        "id": "03ac0ad9-c6b3-4d16-8ab6-9404a35e6497",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552018304090,
        "parent_id": "35525fe9-5138-49ec-af51-dae987d2be81",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "var upload = multer({\n    storage: storage,\n    fileFilter: function (req, file, callback) {\n        var ext = path.extname(file.originalname);\n        if(ext !== '.png' \u0026\u0026 ext !== '.jpg' \u0026\u0026 ext !== '.gif' \u0026\u0026 ext !== '.jpeg') {\n            return callback(new Error('Only images are allowed'))\n        }\n        callback(null, true)\n    }\n}).single('userFile');"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "var upload = multer({\n    storage: storage,\n    fileFilter: function (req, file, callback) {\n        var ext = path.extname(file.originalname);\n        if(ext !== '.png' \u0026\u0026 ext !== '.jpg' \u0026\u0026 ext !== '.gif' \u0026\u0026 ext !== '.jpeg') {\n            return callback(new Error('Only images are allowed'))\n        }\n        callback(null, true)\n    }\n}).single('userFile');",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552018304090,
        "id": "08d6e8f8-8f16-465e-9a9c-7cf3edf77693",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552018304090,
        "parent_id": "35525fe9-5138-49ec-af51-dae987d2be81",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Now you can upload only image files with "
            ],
            [
              "png",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              ", "
            ],
            [
              "jpg",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              ", "
            ],
            [
              "gif",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " or "
            ],
            [
              "jpeg",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " extensions"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Now you can upload only image files with "
          },
          {
            "Text": "png",
            "AttrFlags": 2
          },
          {
            "Text": ", "
          },
          {
            "Text": "jpg",
            "AttrFlags": 2
          },
          {
            "Text": ", "
          },
          {
            "Text": "gif",
            "AttrFlags": 2
          },
          {
            "Text": " or "
          },
          {
            "Text": "jpeg",
            "AttrFlags": 2
          },
          {
            "Text": " extensions"
          }
        ]
      }
    ],
    "title": "Single File Upload using multer",
    "format_page": {
      "page_cover": "",
      "page_cover_position": 0,
      "page_font": "",
      "page_full_width": true,
      "page_icon": "",
      "page_small_text": true
    }
  },
  "Users": [
    {
      "email": "kkowalczyk@gmail.com",
      "family_name": "Kowalczyk",
      "given_name": "Krzysztof",
      "id": "bb760e2d-d679-4b64-b2a9-03005b21870a",
      "locale": "en",
      "mobile_onboarding_completed": true,
      "onboarding_completed": true,
      "profile_photo": "https://s3-us-west-2.amazonaws.com/public.notion-static.com/2dcaa66c-7674-4ff6-9924-601785b63561/head-bw-640x960.png",
      "time_zone": "America/Los_Angeles",
      "version": 19
    }
  ],
  "Tables": null
}