{
  "ID": "44d1e1a5-63d2-48ab-b20a-c4354bb68c7b",
  "Root": {
    "alive": true,
    "content": [
      "4f802347-8caf-45ab-9e35-017e2bffcdcf",
      "e89d19ab-0764-45dd-99ff-13144b229753",
      "89f95564-0bf8-42f4-83df-afc34c0a2519",
      "64ab74e6-9364-4083-91f1-3093ee644402",
      "533dd26c-0ad9-44f7-9755-7f0d97c6b9a9",
      "22c90f26-bf03-4803-b060-c3c31f4b104f",
      "e6b51932-d3ba-4a50-8727-998af7dae4fd",
      "6225f882-38c0-46f2-ac0b-18dfc6cac1ce",
      "d72fc723-54d1-445e-ac77-0532f4bde5d4",
      "4b927a31-cd36-49dd-bd22-a09a64d1063c",
      "9d66cd4f-db3d-4cbf-bbb9-b7512f7c950c",
      "08ff24cc-df72-4949-96bc-edca316d4993",
      "18323f23-68bd-4041-b070-5567a7381d98",
      "409bc371-0dc4-4b72-af93-5037fc93a9dc",
      "dfbc3c93-64a1-4d67-aa6c-7d40c99f4c21",
      "8f182963-2173-4fcc-81ed-99f7d9469c09"
    ],
    "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
    "created_time": 1550396343604,
    "format": {
      "page_full_width": true,
      "page_small_text": true
    },
    "id": "44d1e1a5-63d2-48ab-b20a-c4354bb68c7b",
    "ignore_block_count": true,
    "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
    "last_edited_time": 1550652060000,
    "parent_id": "464e82a4-9e05-4202-a5c5-14dceff8619b",
    "parent_table": "block",
    "properties": {
      "title": [
        [
          "Single IAP in Swift 2"
        ]
      ]
    },
    "type": "page",
    "version": 8,
    "content_resolved": [
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550396343599,
        "id": "4f802347-8caf-45ab-9e35-017e2bffcdcf",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550396343599,
        "parent_id": "44d1e1a5-63d2-48ab-b20a-c4354bb68c7b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "After creating an IAP in iTunesConnect:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "After creating an IAP in iTunesConnect:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550396343602,
        "id": "e89d19ab-0764-45dd-99ff-13144b229753",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550396343602,
        "parent_id": "44d1e1a5-63d2-48ab-b20a-c4354bb68c7b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "In the view controller that you want to buy in"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "In the view controller that you want to buy in"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550396343602,
        "id": "89f95564-0bf8-42f4-83df-afc34c0a2519",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550396343602,
        "parent_id": "44d1e1a5-63d2-48ab-b20a-c4354bb68c7b",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "import StoreKit"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "import StoreKit",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550396343603,
        "id": "64ab74e6-9364-4083-91f1-3093ee644402",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550396343603,
        "parent_id": "44d1e1a5-63d2-48ab-b20a-c4354bb68c7b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "and add the relevant delegates"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "and add the relevant delegates"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550396343603,
        "id": "533dd26c-0ad9-44f7-9755-7f0d97c6b9a9",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550396343603,
        "parent_id": "44d1e1a5-63d2-48ab-b20a-c4354bb68c7b",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "class ViewController: UIViewController, SKProductsRequestDelegate, SKPaymentTransactionObserver {"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "class ViewController: UIViewController, SKProductsRequestDelegate, SKPaymentTransactionObserver {",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550396343603,
        "id": "22c90f26-bf03-4803-b060-c3c31f4b104f",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550396343603,
        "parent_id": "44d1e1a5-63d2-48ab-b20a-c4354bb68c7b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "declare a variable with the product id from iTunesConnect"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "declare a variable with the product id from iTunesConnect"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550396343603,
        "id": "e6b51932-d3ba-4a50-8727-998af7dae4fd",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550396343603,
        "parent_id": "44d1e1a5-63d2-48ab-b20a-c4354bb68c7b",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "var product_id: NSString?\n\noverride func viewDidLoad() {\n    \n    \n    product_id = \"YOUR_PRODUCT_ID\"\n    super.viewDidLoad()\n    SKPaymentQueue.defaultQueue().addTransactionObserver(self)\n\n   //Check if product is purchased\n   if (NSUserDefaults.standardUserDefaults().boolForKey(\"purchased\")){\n   \n       // Hide ads\n       adView.hidden = true\n        \n   } else {\n       print(\"Should show ads...\")\n        \n   }\n\n}"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "var product_id: NSString?\n\noverride func viewDidLoad() {\n    \n    \n    product_id = \"YOUR_PRODUCT_ID\"\n    super.viewDidLoad()\n    SKPaymentQueue.defaultQueue().addTransactionObserver(self)\n\n   //Check if product is purchased\n   if (NSUserDefaults.standardUserDefaults().boolForKey(\"purchased\")){\n   \n       // Hide ads\n       adView.hidden = true\n        \n   } else {\n       print(\"Should show ads...\")\n        \n   }\n\n}",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550396343603,
        "id": "6225f882-38c0-46f2-ac0b-18dfc6cac1ce",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550396343603,
        "parent_id": "44d1e1a5-63d2-48ab-b20a-c4354bb68c7b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "wire a button to a function to purchase the IAP"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "wire a button to a function to purchase the IAP"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550396343603,
        "id": "d72fc723-54d1-445e-ac77-0532f4bde5d4",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550396343603,
        "parent_id": "44d1e1a5-63d2-48ab-b20a-c4354bb68c7b",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "@IBAction func unlockAction(sender: AnyObject) {\n    \n   print(\"About to fetch the product...\")\n\n// Can make payments\nif (SKPaymentQueue.canMakePayments())\n    {\n        let productID:NSSet = NSSet(object: self.product_id!);\n        let productsRequest:SKProductsRequest = SKProductsRequest(productIdentifiers: productID as! Set\u003cNSString\u003e);\n        productsRequest.delegate = self;\n        productsRequest.start();\n        println(\"Fetching Products\");\n    }else{\n        print(\"Can't make purchases\");\n    }\n\n}"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "@IBAction func unlockAction(sender: AnyObject) {\n    \n   print(\"About to fetch the product...\")\n\n// Can make payments\nif (SKPaymentQueue.canMakePayments())\n    {\n        let productID:NSSet = NSSet(object: self.product_id!);\n        let productsRequest:SKProductsRequest = SKProductsRequest(productIdentifiers: productID as! Set\u003cNSString\u003e);\n        productsRequest.delegate = self;\n        productsRequest.start();\n        println(\"Fetching Products\");\n    }else{\n        print(\"Can't make purchases\");\n    }\n\n}",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550396343603,
        "id": "4b927a31-cd36-49dd-bd22-a09a64d1063c",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550396343603,
        "parent_id": "44d1e1a5-63d2-48ab-b20a-c4354bb68c7b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "And here are some helper methods"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "And here are some helper methods"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550396343603,
        "id": "9d66cd4f-db3d-4cbf-bbb9-b7512f7c950c",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550396343603,
        "parent_id": "44d1e1a5-63d2-48ab-b20a-c4354bb68c7b",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "func buyProduct(product: SKProduct){\n    println(\"Sending the Payment Request to Apple\");\n    let payment = SKPayment(product: product)\n    SKPaymentQueue.defaultQueue().addPayment(payment);\n    \n }"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "func buyProduct(product: SKProduct){\n    println(\"Sending the Payment Request to Apple\");\n    let payment = SKPayment(product: product)\n    SKPaymentQueue.defaultQueue().addPayment(payment);\n    \n }",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550396343603,
        "id": "08ff24cc-df72-4949-96bc-edca316d4993",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550396343603,
        "parent_id": "44d1e1a5-63d2-48ab-b20a-c4354bb68c7b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "the delegate methods that must be declared"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "the delegate methods that must be declared"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550396343603,
        "id": "18323f23-68bd-4041-b070-5567a7381d98",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550396343603,
        "parent_id": "44d1e1a5-63d2-48ab-b20a-c4354bb68c7b",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "func productsRequest (request: SKProductsRequest, didReceiveResponse response: SKProductsResponse) {\n\n    let count : Int = response.products.count\n    if (count\u003e0) {\n        var validProduct: SKProduct = response.products[0] as SKProduct\n        if (validProduct.productIdentifier == self.product_id) {\n            print(validProduct.localizedTitle)\n            print(validProduct.localizedDescription)\n            print(validProduct.price)\n            buyProduct(validProduct);\n        } else {\n            print(validProduct.productIdentifier)\n        }\n    } else {\n        print(\"nothing\")\n    }\n}\n\n\nfunc request(request: SKRequest!, didFailWithError error: NSError!) {\n    print(\"Error Fetching product information\");\n}\n\n    func paymentQueue(_ queue: SKPaymentQueue,\nupdatedTransactions transactions: [SKPaymentTransaction])\n\n{\n    print(\"Received Payment Transaction Response from Apple\");\n    \n    for transaction:AnyObject in transactions {\n        if let trans:SKPaymentTransaction = transaction as? SKPaymentTransaction{\n            switch trans.transactionState {\n            case .Purchased:\n                print(\"Product Purchased\");\n                SKPaymentQueue.defaultQueue().finishTransaction(transaction as! SKPaymentTransaction)\n                // Handle the purchase\n                NSUserDefaults.standardUserDefaults().setBool(true , forKey: \"purchased\")\n                adView.hidden = true\n                break;\n            case .Failed:\n                print(\"Purchased Failed\");\n                SKPaymentQueue.defaultQueue().finishTransaction(transaction as! SKPaymentTransaction)\n                break;\n                \n        \n\n            case .Restored:\n                print(\"Already Purchased\");\n               SKPaymentQueue.defaultQueue().restoreCompletedTransactions()"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "func productsRequest (request: SKProductsRequest, didReceiveResponse response: SKProductsResponse) {\n\n    let count : Int = response.products.count\n    if (count\u003e0) {\n        var validProduct: SKProduct = response.products[0] as SKProduct\n        if (validProduct.productIdentifier == self.product_id) {\n            print(validProduct.localizedTitle)\n            print(validProduct.localizedDescription)\n            print(validProduct.price)\n            buyProduct(validProduct);\n        } else {\n            print(validProduct.productIdentifier)\n        }\n    } else {\n        print(\"nothing\")\n    }\n}\n\n\nfunc request(request: SKRequest!, didFailWithError error: NSError!) {\n    print(\"Error Fetching product information\");\n}\n\n    func paymentQueue(_ queue: SKPaymentQueue,\nupdatedTransactions transactions: [SKPaymentTransaction])\n\n{\n    print(\"Received Payment Transaction Response from Apple\");\n    \n    for transaction:AnyObject in transactions {\n        if let trans:SKPaymentTransaction = transaction as? SKPaymentTransaction{\n            switch trans.transactionState {\n            case .Purchased:\n                print(\"Product Purchased\");\n                SKPaymentQueue.defaultQueue().finishTransaction(transaction as! SKPaymentTransaction)\n                // Handle the purchase\n                NSUserDefaults.standardUserDefaults().setBool(true , forKey: \"purchased\")\n                adView.hidden = true\n                break;\n            case .Failed:\n                print(\"Purchased Failed\");\n                SKPaymentQueue.defaultQueue().finishTransaction(transaction as! SKPaymentTransaction)\n                break;\n                \n        \n\n            case .Restored:\n                print(\"Already Purchased\");\n               SKPaymentQueue.defaultQueue().restoreCompletedTransactions()",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550396343604,
        "id": "409bc371-0dc4-4b72-af93-5037fc93a9dc",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550396343604,
        "parent_id": "44d1e1a5-63d2-48ab-b20a-c4354bb68c7b",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "// Handle the purchase\n   NSUserDefaults.standardUserDefaults().setBool(true , forKey: \"purchased\")\n   adView.hidden = true\n   break;\ndefault:\nbreak;\n}\n}\n}\n\n}"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "// Handle the purchase\n   NSUserDefaults.standardUserDefaults().setBool(true , forKey: \"purchased\")\n   adView.hidden = true\n   break;\ndefault:\nbreak;\n}\n}\n}\n\n}",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550396343604,
        "id": "dfbc3c93-64a1-4d67-aa6c-7d40c99f4c21",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550396343604,
        "parent_id": "44d1e1a5-63d2-48ab-b20a-c4354bb68c7b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "And then the code to restore a non-consumable in app purchase"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "And then the code to restore a non-consumable in app purchase"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550396343604,
        "id": "8f182963-2173-4fcc-81ed-99f7d9469c09",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550396343604,
        "parent_id": "44d1e1a5-63d2-48ab-b20a-c4354bb68c7b",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "if (SKPaymentQueue.canMakePayments()) {\n  SKPaymentQueue.defaultQueue().restoreCompletedTransactions()\n}"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "if (SKPaymentQueue.canMakePayments()) {\n  SKPaymentQueue.defaultQueue().restoreCompletedTransactions()\n}",
        "code_language": "Plain Text"
      }
    ],
    "title": "Single IAP in Swift 2",
    "format_page": {
      "page_cover": "",
      "page_cover_position": 0,
      "page_font": "",
      "page_full_width": true,
      "page_icon": "",
      "page_small_text": true
    }
  },
  "Users": [
    {
      "email": "kkowalczyk@gmail.com",
      "family_name": "Kowalczyk",
      "given_name": "Krzysztof",
      "id": "bb760e2d-d679-4b64-b2a9-03005b21870a",
      "locale": "en",
      "mobile_onboarding_completed": true,
      "onboarding_completed": true,
      "profile_photo": "https://s3-us-west-2.amazonaws.com/public.notion-static.com/2dcaa66c-7674-4ff6-9924-601785b63561/head-bw-640x960.png",
      "time_zone": "America/Los_Angeles",
      "version": 18
    }
  ],
  "Tables": null
}