{
  "ID": "71f1cdf3-ba6e-40e9-8273-e4e7bd94e04c",
  "Root": {
    "alive": true,
    "content": [
      "3f89aed7-6448-45a2-815e-f5aa0234fd46",
      "b69331ec-eca8-4f92-9325-4546ca7342e1",
      "d984f57a-fe26-47d0-9749-6ce629a7d69d",
      "b5ada256-fcb8-41d5-afa4-e8723012b68e",
      "770629e1-4f36-447a-8461-6abd888b9e3c",
      "c2371e53-7090-48f0-8111-101176d36b5e",
      "d23d46e4-b1c9-45e4-a26c-7ea869b3a9f2",
      "d85c02e0-d809-4dd7-9397-a14006f78b59",
      "4a70c088-d5c6-4cc8-9552-70719eeb667f",
      "a87131e2-e3ca-453c-86c7-2d79b4440583",
      "41a2020a-3080-4e2d-bf60-7349e32fc1ce"
    ],
    "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
    "created_time": 1550396186958,
    "format": {
      "page_full_width": true,
      "page_small_text": true
    },
    "id": "71f1cdf3-ba6e-40e9-8273-e4e7bd94e04c",
    "ignore_block_count": true,
    "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
    "last_edited_time": 1550650260000,
    "parent_id": "2ea198f9-ccd0-48dc-8c00-885293d6cd73",
    "parent_table": "block",
    "properties": {
      "title": [
        [
          "Setting up background configuration"
        ]
      ]
    },
    "type": "page",
    "version": 8,
    "content_resolved": [
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550396186954,
        "id": "3f89aed7-6448-45a2-815e-f5aa0234fd46",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550396186954,
        "parent_id": "71f1cdf3-ba6e-40e9-8273-e4e7bd94e04c",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "To create a background session"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "To create a background session"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550396186956,
        "id": "b69331ec-eca8-4f92-9325-4546ca7342e1",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550396186956,
        "parent_id": "71f1cdf3-ba6e-40e9-8273-e4e7bd94e04c",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "// Swift:\nlet mySessionID = \"com.example.bgSession\"\nlet bgSessionConfig = NSURLSessionConfiguration.backgroundSessionConfigurationWithIdentifier(mySessionID)\n\nlet session = NSURLSession(configuration: bgSessionConfig)\n\n// add tasks here"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "// Swift:\nlet mySessionID = \"com.example.bgSession\"\nlet bgSessionConfig = NSURLSessionConfiguration.backgroundSessionConfigurationWithIdentifier(mySessionID)\n\nlet session = NSURLSession(configuration: bgSessionConfig)\n\n// add tasks here",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550396186956,
        "id": "d984f57a-fe26-47d0-9749-6ce629a7d69d",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550396186956,
        "parent_id": "71f1cdf3-ba6e-40e9-8273-e4e7bd94e04c",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "// Objective-C:\nNSString *mySessionID = @\"com.example.bgSession\";\nNSURLSessionConfiguration *configuration =\n    [NSURLSessionConfiguration backgroundSessionConfigurationWithIdentifier: mySessionID];\nNSURLSession *session = [NSURLSession sessionWithConfiguration:configuration\n                                                      delegate:self]"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "// Objective-C:\nNSString *mySessionID = @\"com.example.bgSession\";\nNSURLSessionConfiguration *configuration =\n    [NSURLSessionConfiguration backgroundSessionConfigurationWithIdentifier: mySessionID];\nNSURLSession *session = [NSURLSession sessionWithConfiguration:configuration\n                                                      delegate:self]",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550396186957,
        "id": "b5ada256-fcb8-41d5-afa4-e8723012b68e",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550396186957,
        "parent_id": "71f1cdf3-ba6e-40e9-8273-e4e7bd94e04c",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Additionally, in iOS, you must set up support for handling background app relaunch. When your app’s "
            ],
            [
              "application:handleEventsForBackgroundURLSession:completionHandler:",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " method (Objective-C) or "
            ],
            [
              "application(_:handleEventsForBackgroundURLSession:completionHandler:)",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " method (Swift) gets called, it means your app has been relaunched in the background to handle activity on a session."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Additionally, in iOS, you must set up support for handling background app relaunch. When your app’s "
          },
          {
            "Text": "application:handleEventsForBackgroundURLSession:completionHandler:",
            "AttrFlags": 2
          },
          {
            "Text": " method (Objective-C) or "
          },
          {
            "Text": "application(_:handleEventsForBackgroundURLSession:completionHandler:)",
            "AttrFlags": 2
          },
          {
            "Text": " method (Swift) gets called, it means your app has been relaunched in the background to handle activity on a session."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550396186957,
        "id": "770629e1-4f36-447a-8461-6abd888b9e3c",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550396186957,
        "parent_id": "71f1cdf3-ba6e-40e9-8273-e4e7bd94e04c",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "In that method, you should create a new session with the provided identifier and configure it with a delegate to handle events just like you normally would in the foreground. Additionally, you should store the provided completion handler in a dictionary, using the session as the key."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "In that method, you should create a new session with the provided identifier and configure it with a delegate to handle events just like you normally would in the foreground. Additionally, you should store the provided completion handler in a dictionary, using the session as the key."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550396186957,
        "id": "c2371e53-7090-48f0-8111-101176d36b5e",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550396186957,
        "parent_id": "71f1cdf3-ba6e-40e9-8273-e4e7bd94e04c",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "When the delegate’s "
            ],
            [
              "URLSessionDidFinishEventsForBackgroundURLSession:",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " (Obj-C) / "
            ],
            [
              "URLSessionDidFinishEventsForBackgroundURLSession",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " (Swift) method gets called to tell you that there are no more events to handle, your app should look up the completion handler for that session, remove the session from the dictionary, and call the completion handler, thus telling the operating system that you no longer have any outstanding processing related to the session. (If you are still doing something for some reason when you get that delegate call, wait until done.) As soon as you call that method, the background session immediately gets invalidated."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "When the delegate’s "
          },
          {
            "Text": "URLSessionDidFinishEventsForBackgroundURLSession:",
            "AttrFlags": 2
          },
          {
            "Text": " (Obj-C) / "
          },
          {
            "Text": "URLSessionDidFinishEventsForBackgroundURLSession",
            "AttrFlags": 2
          },
          {
            "Text": " (Swift) method gets called to tell you that there are no more events to handle, your app should look up the completion handler for that session, remove the session from the dictionary, and call the completion handler, thus telling the operating system that you no longer have any outstanding processing related to the session. (If you are still doing something for some reason when you get that delegate call, wait until done.) As soon as you call that method, the background session immediately gets invalidated."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550396186957,
        "id": "d23d46e4-b1c9-45e4-a26c-7ea869b3a9f2",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550396186957,
        "parent_id": "71f1cdf3-ba6e-40e9-8273-e4e7bd94e04c",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "If your application then receives an "
            ],
            [
              "application:application:didFinishLaunchingWithOptions:",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " call (likely indicating that the user foregrounded your app while you were busy processing background events), it is safe to create a background session with that same identifier, because the old session with that identifier no longer exists."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "If your application then receives an "
          },
          {
            "Text": "application:application:didFinishLaunchingWithOptions:",
            "AttrFlags": 2
          },
          {
            "Text": " call (likely indicating that the user foregrounded your app while you were busy processing background events), it is safe to create a background session with that same identifier, because the old session with that identifier no longer exists."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550396186957,
        "id": "d85c02e0-d809-4dd7-9397-a14006f78b59",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550396186957,
        "parent_id": "71f1cdf3-ba6e-40e9-8273-e4e7bd94e04c",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "If you’re curious about the details, at a high level, when you create a background session, you’re doing two things:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "If you’re curious about the details, at a high level, when you create a background session, you’re doing two things:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550396186958,
        "id": "4a70c088-d5c6-4cc8-9552-70719eeb667f",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550396186958,
        "parent_id": "71f1cdf3-ba6e-40e9-8273-e4e7bd94e04c",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Creating a session in an external daemon (nsurlsessiond) to handle the downloads"
            ]
          ]
        },
        "type": "bulleted_list",
        "version": 1,
        "inline_content": [
          {
            "Text": "Creating a session in an external daemon (nsurlsessiond) to handle the downloads"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550396186958,
        "id": "a87131e2-e3ca-453c-86c7-2d79b4440583",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550396186958,
        "parent_id": "71f1cdf3-ba6e-40e9-8273-e4e7bd94e04c",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Creating a session within your app that talks to that external daemon via NSXPC"
            ]
          ]
        },
        "type": "bulleted_list",
        "version": 1,
        "inline_content": [
          {
            "Text": "Creating a session within your app that talks to that external daemon via NSXPC"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550396186958,
        "id": "41a2020a-3080-4e2d-bf60-7349e32fc1ce",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550396186958,
        "parent_id": "71f1cdf3-ba6e-40e9-8273-e4e7bd94e04c",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Normally, it is dangerous to create two sessions with the same session ID in a single launch of the app, because they both are trying to talk to the same session in the background daemon. This is why the official documentation says to never create multiple sessions with the same identifier. However, if the first session was a temporary session created as part of a "
            ],
            [
              "handleEventsForBackgroundURLSession",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " call, the association between the now-invalidated in-app session and the session in the background daemon no longer exists."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Normally, it is dangerous to create two sessions with the same session ID in a single launch of the app, because they both are trying to talk to the same session in the background daemon. This is why the official documentation says to never create multiple sessions with the same identifier. However, if the first session was a temporary session created as part of a "
          },
          {
            "Text": "handleEventsForBackgroundURLSession",
            "AttrFlags": 2
          },
          {
            "Text": " call, the association between the now-invalidated in-app session and the session in the background daemon no longer exists."
          }
        ]
      }
    ],
    "title": "Setting up background configuration",
    "format_page": {
      "page_cover": "",
      "page_cover_position": 0,
      "page_font": "",
      "page_full_width": true,
      "page_icon": "",
      "page_small_text": true
    }
  },
  "Users": [
    {
      "email": "kkowalczyk@gmail.com",
      "family_name": "Kowalczyk",
      "given_name": "Krzysztof",
      "id": "bb760e2d-d679-4b64-b2a9-03005b21870a",
      "locale": "en",
      "mobile_onboarding_completed": true,
      "onboarding_completed": true,
      "profile_photo": "https://s3-us-west-2.amazonaws.com/public.notion-static.com/2dcaa66c-7674-4ff6-9924-601785b63561/head-bw-640x960.png",
      "time_zone": "America/Los_Angeles",
      "version": 18
    }
  ],
  "Tables": null
}