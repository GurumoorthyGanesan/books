{
  "ID": "ccff9f97-4729-4a7d-b429-b53e256d017c",
  "Root": {
    "alive": true,
    "content": [
      "50cbb493-560a-4f87-98cc-d4fe1613936c",
      "edb7fa40-359f-40b4-8775-12b7dd69c70c",
      "4ff14d51-29f6-45e8-8fe2-9b2eb3ef5eee",
      "b55ed312-2a94-41d4-874c-9917b9b79abb",
      "f5443427-bf24-4fa6-a52a-468a22c8ef20",
      "4e8f77e0-52b4-454a-a929-8d4c13820426",
      "8ff4eb8d-d51e-4eaa-a450-d9b7899327bd",
      "d37b72a4-9c4b-4960-91a4-da34b3dbda32",
      "88cbf6ea-889d-4ec6-b5ae-77acffdcd92a",
      "c8b4ee8b-e367-4e65-ae14-d65616c2eed5",
      "fba2fd0e-c32b-4f5a-b852-ece91a6f74e8",
      "d8e45647-15b3-4f8b-afb4-cc2797d54b46",
      "4ee54432-fa13-4cf8-bcda-f5d0973254d6",
      "078571c0-5208-4b94-8dcf-93efef9aaa0f",
      "dd9f80a9-60a8-4254-bbbc-10f38d4df602",
      "e231d41b-4243-42df-81d9-08cc7e58489c",
      "7f64004e-0882-41fe-840d-841581ec3d72",
      "c4d2c665-3ba7-426d-b9e8-f6e9e44066f5",
      "d374fc80-f8a0-4542-bc1d-f72b3fa12e62",
      "3df953d3-070e-4488-ace6-d8371fd72393"
    ],
    "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
    "created_time": 1552104067883,
    "format": {
      "page_full_width": true,
      "page_small_text": true
    },
    "id": "ccff9f97-4729-4a7d-b429-b53e256d017c",
    "ignore_block_count": true,
    "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
    "last_edited_time": 1552104067883,
    "parent_id": "8c285f84-6f1f-4af6-bd00-a9516a0dbaac",
    "parent_table": "block",
    "properties": {
      "title": [
        [
          "Basic state with AASM"
        ]
      ]
    },
    "type": "page",
    "version": 3,
    "content_resolved": [
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552104067876,
        "id": "50cbb493-560a-4f87-98cc-d4fe1613936c",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552104067876,
        "parent_id": "ccff9f97-4729-4a7d-b429-b53e256d017c",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Usually you’ll end up creating models which will contain a state, and that state will be changing during the lifespan of the object."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Usually you’ll end up creating models which will contain a state, and that state will be changing during the lifespan of the object."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552104067880,
        "id": "edb7fa40-359f-40b4-8775-12b7dd69c70c",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552104067880,
        "parent_id": "ccff9f97-4729-4a7d-b429-b53e256d017c",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "AASM",
              [
                [
                  "a",
                  "https://github.com/aasm/aasm"
                ]
              ]
            ],
            [
              " is a finite state machine enabler library that can help you out with dealing with having an easy passing through the process design of your objects."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "AASM",
            "Link": "https://github.com/aasm/aasm"
          },
          {
            "Text": " is a finite state machine enabler library that can help you out with dealing with having an easy passing through the process design of your objects."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552104067881,
        "id": "4ff14d51-29f6-45e8-8fe2-9b2eb3ef5eee",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552104067881,
        "parent_id": "ccff9f97-4729-4a7d-b429-b53e256d017c",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Having something like this in your model goes pretty aligned with the "
            ],
            [
              "Fat Model, Skinny Controller",
              [
                [
                  "a",
                  "http://stackoverflow.com/documentation/ruby-on-rails/1207/rails-best-practices/9609/fat-model-skinny-controller#t=201611091524540826623"
                ]
              ]
            ],
            [
              " idea, one of Rails best practices. The model is the sole responsible of managing its state, its changes and of generating the events triggered by those changes."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Having something like this in your model goes pretty aligned with the "
          },
          {
            "Text": "Fat Model, Skinny Controller",
            "Link": "http://stackoverflow.com/documentation/ruby-on-rails/1207/rails-best-practices/9609/fat-model-skinny-controller#t=201611091524540826623"
          },
          {
            "Text": " idea, one of Rails best practices. The model is the sole responsible of managing its state, its changes and of generating the events triggered by those changes."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552104067881,
        "id": "b55ed312-2a94-41d4-874c-9917b9b79abb",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552104067881,
        "parent_id": "ccff9f97-4729-4a7d-b429-b53e256d017c",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "To install, in Gemfile"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "To install, in Gemfile"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552104067881,
        "id": "f5443427-bf24-4fa6-a52a-468a22c8ef20",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552104067881,
        "parent_id": "ccff9f97-4729-4a7d-b429-b53e256d017c",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "gem 'aasm'"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "gem 'aasm'",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552104067881,
        "id": "4e8f77e0-52b4-454a-a929-8d4c13820426",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552104067881,
        "parent_id": "ccff9f97-4729-4a7d-b429-b53e256d017c",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Consider an App where the user Quotes a product for a price."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Consider an App where the user Quotes a product for a price."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552104067881,
        "id": "8ff4eb8d-d51e-4eaa-a450-d9b7899327bd",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552104067881,
        "parent_id": "ccff9f97-4729-4a7d-b429-b53e256d017c",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "class Quote\n\n  include AASM\n\n  aasm do\n    state :requested, initial: true  # User sees a product and requests a quote\n    state :priced                    # Seller sets the price \n    state :payed                     # Buyer pays the price\n    state :canceled                  # The buyer is not willing to pay the price\n    state :completed                 # The product has been delivered.\n\n    event :price do\n        transitions from: requested, to: :priced\n    end\n\n    event :pay do\n        transitions from: :priced, to: :payed, success: :set_payment_date\n    end\n\n    event :complete do\n        transitions from: :payed, to: :completed, guard: product_delivered?\n    end\n\n    event :cancel do\n        transitions from: [:requested, :priced], to: :canceled\n        transitions from: :payed, to: canceled, success: :reverse_charges\n    end\n\n   \n  end\n\n  private\n\n  def set_payment_date\n    update payed_at: Time.zone.now\n  end\nend"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "class Quote\n\n  include AASM\n\n  aasm do\n    state :requested, initial: true  # User sees a product and requests a quote\n    state :priced                    # Seller sets the price \n    state :payed                     # Buyer pays the price\n    state :canceled                  # The buyer is not willing to pay the price\n    state :completed                 # The product has been delivered.\n\n    event :price do\n        transitions from: requested, to: :priced\n    end\n\n    event :pay do\n        transitions from: :priced, to: :payed, success: :set_payment_date\n    end\n\n    event :complete do\n        transitions from: :payed, to: :completed, guard: product_delivered?\n    end\n\n    event :cancel do\n        transitions from: [:requested, :priced], to: :canceled\n        transitions from: :payed, to: canceled, success: :reverse_charges\n    end\n\n   \n  end\n\n  private\n\n  def set_payment_date\n    update payed_at: Time.zone.now\n  end\nend",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552104067881,
        "id": "d37b72a4-9c4b-4960-91a4-da34b3dbda32",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552104067881,
        "parent_id": "ccff9f97-4729-4a7d-b429-b53e256d017c",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "The Quote class’ states can go however it’s best for your process."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "The Quote class’ states can go however it’s best for your process."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552104067882,
        "id": "88cbf6ea-889d-4ec6-b5ae-77acffdcd92a",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552104067882,
        "parent_id": "ccff9f97-4729-4a7d-b429-b53e256d017c",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "You can think of the states as being past, like in the previous example or algo in other tense, for example: pricing, paying, delivering, etc. The naming of the states depends on you. From a personal point a view, past states work better because your end state will surely be a past action and links up better with the event names, which will be explained later."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "You can think of the states as being past, like in the previous example or algo in other tense, for example: pricing, paying, delivering, etc. The naming of the states depends on you. From a personal point a view, past states work better because your end state will surely be a past action and links up better with the event names, which will be explained later."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552104067882,
        "id": "c8b4ee8b-e367-4e65-ae14-d65616c2eed5",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552104067882,
        "parent_id": "ccff9f97-4729-4a7d-b429-b53e256d017c",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "NOTE:",
              [
                [
                  "b"
                ]
              ]
            ],
            [
              " Be careful what names you use, you have to worry about not using Ruby or Ruby on Rails reserved keywords, like "
            ],
            [
              "valid",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              ", "
            ],
            [
              "end",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              ", "
            ],
            [
              "being",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              ", etc."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "NOTE:",
            "AttrFlags": 1
          },
          {
            "Text": " Be careful what names you use, you have to worry about not using Ruby or Ruby on Rails reserved keywords, like "
          },
          {
            "Text": "valid",
            "AttrFlags": 2
          },
          {
            "Text": ", "
          },
          {
            "Text": "end",
            "AttrFlags": 2
          },
          {
            "Text": ", "
          },
          {
            "Text": "being",
            "AttrFlags": 2
          },
          {
            "Text": ", etc."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552104067882,
        "id": "fba2fd0e-c32b-4f5a-b852-ece91a6f74e8",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552104067882,
        "parent_id": "ccff9f97-4729-4a7d-b429-b53e256d017c",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Having defined the states and transitions we can now access some methods created by AASM."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Having defined the states and transitions we can now access some methods created by AASM."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552104067882,
        "id": "d8e45647-15b3-4f8b-afb4-cc2797d54b46",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552104067882,
        "parent_id": "ccff9f97-4729-4a7d-b429-b53e256d017c",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "For example:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "For example:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552104067882,
        "id": "4ee54432-fa13-4cf8-bcda-f5d0973254d6",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552104067882,
        "parent_id": "ccff9f97-4729-4a7d-b429-b53e256d017c",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "Quote.priced  # Shows all Quotes with priced events\nquote.priced? # Indicates if that specific quote has been priced\nquote.price!  # Triggers the event the would transition from requested to priced."
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "Quote.priced  # Shows all Quotes with priced events\nquote.priced? # Indicates if that specific quote has been priced\nquote.price!  # Triggers the event the would transition from requested to priced.",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552104067882,
        "id": "078571c0-5208-4b94-8dcf-93efef9aaa0f",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552104067882,
        "parent_id": "ccff9f97-4729-4a7d-b429-b53e256d017c",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "As you can see the event has transitions, this transitions determine the way the state will change upon the event call. If the event is invalid due to the current state an Error will be raised."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "As you can see the event has transitions, this transitions determine the way the state will change upon the event call. If the event is invalid due to the current state an Error will be raised."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552104067882,
        "id": "dd9f80a9-60a8-4254-bbbc-10f38d4df602",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552104067882,
        "parent_id": "ccff9f97-4729-4a7d-b429-b53e256d017c",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "The events and transitions also have some other callbacks, for example"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "The events and transitions also have some other callbacks, for example"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552104067883,
        "id": "e231d41b-4243-42df-81d9-08cc7e58489c",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552104067883,
        "parent_id": "ccff9f97-4729-4a7d-b429-b53e256d017c",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "guard: product_delivered?"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "guard: product_delivered?",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552104067883,
        "id": "7f64004e-0882-41fe-840d-841581ec3d72",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552104067883,
        "parent_id": "ccff9f97-4729-4a7d-b429-b53e256d017c",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Will call the "
            ],
            [
              "product_delivered?",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " method which will return a boolean. If it turns out false, the transition will not be applied and if the no other transitions are available, the state won’t change."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Will call the "
          },
          {
            "Text": "product_delivered?",
            "AttrFlags": 2
          },
          {
            "Text": " method which will return a boolean. If it turns out false, the transition will not be applied and if the no other transitions are available, the state won’t change."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552104067883,
        "id": "c4d2c665-3ba7-426d-b9e8-f6e9e44066f5",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552104067883,
        "parent_id": "ccff9f97-4729-4a7d-b429-b53e256d017c",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "success: :reverse_charges"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "success: :reverse_charges",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552104067883,
        "id": "d374fc80-f8a0-4542-bc1d-f72b3fa12e62",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552104067883,
        "parent_id": "ccff9f97-4729-4a7d-b429-b53e256d017c",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "If that translation successfully happens the "
            ],
            [
              ":reverse_charges",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " method will be invoked."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "If that translation successfully happens the "
          },
          {
            "Text": ":reverse_charges",
            "AttrFlags": 2
          },
          {
            "Text": " method will be invoked."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552104067883,
        "id": "3df953d3-070e-4488-ace6-d8371fd72393",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552104067883,
        "parent_id": "ccff9f97-4729-4a7d-b429-b53e256d017c",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "There are several other methods in AASM with more callbacks in the process but this will help you creating your first models with finite states."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "There are several other methods in AASM with more callbacks in the process but this will help you creating your first models with finite states."
          }
        ]
      }
    ],
    "title": "Basic state with AASM",
    "format_page": {
      "page_cover": "",
      "page_cover_position": 0,
      "page_font": "",
      "page_full_width": true,
      "page_icon": "",
      "page_small_text": true
    }
  },
  "Users": [
    {
      "email": "kkowalczyk@gmail.com",
      "family_name": "Kowalczyk",
      "given_name": "Krzysztof",
      "id": "bb760e2d-d679-4b64-b2a9-03005b21870a",
      "locale": "en",
      "mobile_onboarding_completed": true,
      "onboarding_completed": true,
      "profile_photo": "https://s3-us-west-2.amazonaws.com/public.notion-static.com/2dcaa66c-7674-4ff6-9924-601785b63561/head-bw-640x960.png",
      "time_zone": "America/Los_Angeles",
      "version": 19
    }
  ],
  "Tables": null
}