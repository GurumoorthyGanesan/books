{
  "ID": "280ee419-ba93-4318-91f1-3ad23ccf792b",
  "Root": {
    "alive": true,
    "content": [
      "e2a64ac7-28c3-4cac-8b42-53aebbd9f27f",
      "90e0ef9c-b4c0-48e8-9918-713f26a96909",
      "605166f1-cd87-417f-aeac-dc31d76a5472",
      "fb30d647-61ca-40be-a2fd-443ec06b7ced",
      "ba12ee5f-833b-4eb0-a11a-5953a0e8d372",
      "d7fa18cc-fd7f-451f-8bf5-9f7ac7794095",
      "154668b8-c47e-4b2f-a049-e7ac600f6547",
      "0fe83c6c-73e4-451e-a545-9c8bac089cbc",
      "75d19918-4d7d-4b29-9e2a-437ff09c65ef",
      "493b7a68-abb5-4504-9f6c-ce500ff5e4a3",
      "bb9f2d5c-0652-4a02-8fab-8f9c227a4ce0",
      "07b98b45-fafb-46f8-90ae-31b9a7fb4298"
    ],
    "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
    "created_time": 1550518474752,
    "format": {
      "page_full_width": true,
      "page_small_text": true
    },
    "id": "280ee419-ba93-4318-91f1-3ad23ccf792b",
    "ignore_block_count": true,
    "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
    "last_edited_time": 1551751631208,
    "parent_id": "bac27a47-c983-46b6-ac55-bf131c4ab1ec",
    "parent_table": "block",
    "properties": {
      "title": [
        [
          "Pitfall - Too many threads makes an application slower."
        ]
      ]
    },
    "type": "page",
    "version": 5,
    "content_resolved": [
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550518474747,
        "id": "e2a64ac7-28c3-4cac-8b42-53aebbd9f27f",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550518474747,
        "parent_id": "280ee419-ba93-4318-91f1-3ad23ccf792b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "A lot of people who are new to multi-threading think that using threads automatically make an application go faster. In fact, it is a lot more complicated than that. But one thing that we can state with certainty is that for any computer there is a limit on the number of threads that can be run at the same time:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "A lot of people who are new to multi-threading think that using threads automatically make an application go faster. In fact, it is a lot more complicated than that. But one thing that we can state with certainty is that for any computer there is a limit on the number of threads that can be run at the same time:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550518474750,
        "id": "90e0ef9c-b4c0-48e8-9918-713f26a96909",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550518474750,
        "parent_id": "280ee419-ba93-4318-91f1-3ad23ccf792b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "A computer has a fixed number of "
            ],
            [
              "cores",
              [
                [
                  "i"
                ]
              ]
            ],
            [
              " (or "
            ],
            [
              "hyperthreads",
              [
                [
                  "i"
                ]
              ]
            ],
            [
              ")."
            ]
          ]
        },
        "type": "bulleted_list",
        "version": 1,
        "inline_content": [
          {
            "Text": "A computer has a fixed number of "
          },
          {
            "Text": "cores",
            "AttrFlags": 4
          },
          {
            "Text": " (or "
          },
          {
            "Text": "hyperthreads",
            "AttrFlags": 4
          },
          {
            "Text": ")."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550518474750,
        "id": "605166f1-cd87-417f-aeac-dc31d76a5472",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550518474750,
        "parent_id": "280ee419-ba93-4318-91f1-3ad23ccf792b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "A Java thread has to be "
            ],
            [
              "scheduled",
              [
                [
                  "i"
                ]
              ]
            ],
            [
              " to a core or hyperthread in order to run."
            ]
          ]
        },
        "type": "bulleted_list",
        "version": 1,
        "inline_content": [
          {
            "Text": "A Java thread has to be "
          },
          {
            "Text": "scheduled",
            "AttrFlags": 4
          },
          {
            "Text": " to a core or hyperthread in order to run."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550518474751,
        "id": "fb30d647-61ca-40be-a2fd-443ec06b7ced",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550518474751,
        "parent_id": "280ee419-ba93-4318-91f1-3ad23ccf792b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "If there are more runnable Java threads than (available) cores / hyperthreads, some of them must wait."
            ]
          ]
        },
        "type": "bulleted_list",
        "version": 1,
        "inline_content": [
          {
            "Text": "If there are more runnable Java threads than (available) cores / hyperthreads, some of them must wait."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550518474751,
        "id": "ba12ee5f-833b-4eb0-a11a-5953a0e8d372",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550518474751,
        "parent_id": "280ee419-ba93-4318-91f1-3ad23ccf792b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "This tells us that simply creating more and more Java threads "
            ],
            [
              "cannot",
              [
                [
                  "i"
                ]
              ]
            ],
            [
              " make the application go faster and faster. But there are other considerations as well:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "This tells us that simply creating more and more Java threads "
          },
          {
            "Text": "cannot",
            "AttrFlags": 4
          },
          {
            "Text": " make the application go faster and faster. But there are other considerations as well:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550518474751,
        "id": "d7fa18cc-fd7f-451f-8bf5-9f7ac7794095",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550518474751,
        "parent_id": "280ee419-ba93-4318-91f1-3ad23ccf792b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Each thread requires an off-heap memory region for its thread stack. The typical (default) thread stack size is 512Kbytes or 1Mbytes. If you have a significant number of threads, the memory usage can be significant."
            ]
          ]
        },
        "type": "bulleted_list",
        "version": 1,
        "inline_content": [
          {
            "Text": "Each thread requires an off-heap memory region for its thread stack. The typical (default) thread stack size is 512Kbytes or 1Mbytes. If you have a significant number of threads, the memory usage can be significant."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550518474751,
        "id": "154668b8-c47e-4b2f-a049-e7ac600f6547",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550518474751,
        "parent_id": "280ee419-ba93-4318-91f1-3ad23ccf792b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Each active thread will refer to a number of objects in the heap. That increases the working set of "
            ],
            [
              "reachable",
              [
                [
                  "i"
                ]
              ]
            ],
            [
              " objects, which impacts on garbage collection and on physical memory usage."
            ]
          ]
        },
        "type": "bulleted_list",
        "version": 1,
        "inline_content": [
          {
            "Text": "Each active thread will refer to a number of objects in the heap. That increases the working set of "
          },
          {
            "Text": "reachable",
            "AttrFlags": 4
          },
          {
            "Text": " objects, which impacts on garbage collection and on physical memory usage."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550518474752,
        "id": "0fe83c6c-73e4-451e-a545-9c8bac089cbc",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550518474752,
        "parent_id": "280ee419-ba93-4318-91f1-3ad23ccf792b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "The overheads of switching between threads is non-trivial. It typically entails a switch into the OS kernel space to make a thread scheduling decision."
            ]
          ]
        },
        "type": "bulleted_list",
        "version": 1,
        "inline_content": [
          {
            "Text": "The overheads of switching between threads is non-trivial. It typically entails a switch into the OS kernel space to make a thread scheduling decision."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550518474752,
        "id": "75d19918-4d7d-4b29-9e2a-437ff09c65ef",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550518474752,
        "parent_id": "280ee419-ba93-4318-91f1-3ad23ccf792b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "The overheads of thread synchronization and inter-thread signaling (e.g. wait(), notify() / notifyAll) "
            ],
            [
              "can be",
              [
                [
                  "i"
                ]
              ]
            ],
            [
              " significant."
            ]
          ]
        },
        "type": "bulleted_list",
        "version": 1,
        "inline_content": [
          {
            "Text": "The overheads of thread synchronization and inter-thread signaling (e.g. wait(), notify() / notifyAll) "
          },
          {
            "Text": "can be",
            "AttrFlags": 4
          },
          {
            "Text": " significant."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550518474752,
        "id": "493b7a68-abb5-4504-9f6c-ce500ff5e4a3",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550518474752,
        "parent_id": "280ee419-ba93-4318-91f1-3ad23ccf792b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Depending on the details of your application, these factors generally mean that there is a “sweet spot” for the number of threads. Beyond that, adding more threads gives minimal performance improvement, and can make performance worse."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Depending on the details of your application, these factors generally mean that there is a “sweet spot” for the number of threads. Beyond that, adding more threads gives minimal performance improvement, and can make performance worse."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550518474752,
        "id": "bb9f2d5c-0652-4a02-8fab-8f9c227a4ce0",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550518474752,
        "parent_id": "280ee419-ba93-4318-91f1-3ad23ccf792b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "If your application create for each new task, then an unexpected increase in the workload (e.g. a high request rate) can lead to catastrophic behavior."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "If your application create for each new task, then an unexpected increase in the workload (e.g. a high request rate) can lead to catastrophic behavior."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550518474752,
        "id": "07b98b45-fafb-46f8-90ae-31b9a7fb4298",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550518474752,
        "parent_id": "280ee419-ba93-4318-91f1-3ad23ccf792b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "A better way to deal with this is to use bounded thread pool whose size you can control (statically or dynamically). When there is too much work to do, the application needs to queue the requests. If you use an "
            ],
            [
              "ExecutorService",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              ", it will take care of the thread pool management and task queuing."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "A better way to deal with this is to use bounded thread pool whose size you can control (statically or dynamically). When there is too much work to do, the application needs to queue the requests. If you use an "
          },
          {
            "Text": "ExecutorService",
            "AttrFlags": 2
          },
          {
            "Text": ", it will take care of the thread pool management and task queuing."
          }
        ]
      }
    ],
    "title": "Pitfall - Too many threads makes an application slower.",
    "format_page": {
      "page_cover": "",
      "page_cover_position": 0,
      "page_font": "",
      "page_full_width": true,
      "page_icon": "",
      "page_small_text": true
    }
  },
  "Users": [
    {
      "email": "kkowalczyk@gmail.com",
      "family_name": "Kowalczyk",
      "given_name": "Krzysztof",
      "id": "bb760e2d-d679-4b64-b2a9-03005b21870a",
      "locale": "en",
      "mobile_onboarding_completed": true,
      "onboarding_completed": true,
      "profile_photo": "https://s3-us-west-2.amazonaws.com/public.notion-static.com/2dcaa66c-7674-4ff6-9924-601785b63561/head-bw-640x960.png",
      "time_zone": "America/Los_Angeles",
      "version": 18
    }
  ],
  "Tables": null
}