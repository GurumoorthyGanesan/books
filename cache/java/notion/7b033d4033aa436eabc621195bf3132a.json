{
  "ID": "7b033d40-33aa-436e-abc6-21195bf3132a",
  "Root": {
    "alive": true,
    "content": [
      "e54c1a04-beef-4064-9e84-d80dae1332f0",
      "7d62664e-2296-41ca-9d03-19afb901231e",
      "08d46f8a-8fb5-4802-a545-ffb61acf4f35",
      "0431bbab-5e4c-40a1-a974-9e7111e626a7",
      "84b97fdf-b201-43c1-b047-bcfa52318bb0",
      "67a2bdfc-f11e-4563-8ed0-edb8ea3d238c",
      "c01c77fc-28de-45b9-867b-2c45a593e85f",
      "d70360b4-47c7-428d-ac97-9965b7f68591",
      "af3542c7-bd54-4bcb-90a1-777c78c89759",
      "6acdb7bf-f9f2-456c-95cf-5e1128d64b9a",
      "81d1455f-c899-46c0-9085-5bedb5d07f89",
      "98a3b11a-2624-4d32-9ed1-fd1414a858a3",
      "b98c3d9f-202f-4366-a980-bf0560b8eb3d",
      "6dc60518-43b0-4c8d-9640-3f3441ace8d3"
    ],
    "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
    "created_time": 1550460529230,
    "id": "7b033d40-33aa-436e-abc6-21195bf3132a",
    "ignore_block_count": true,
    "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
    "last_edited_time": 1550460529230,
    "parent_id": "596cd51e-237c-46bd-a4df-28e4d338582d",
    "parent_table": "block",
    "properties": {
      "title": [
        [
          "010 Comparing floating point values"
        ]
      ]
    },
    "type": "page",
    "version": 1,
    "content_resolved": [
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550460529226,
        "id": "e54c1a04-beef-4064-9e84-d80dae1332f0",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550460529226,
        "parent_id": "7b033d40-33aa-436e-abc6-21195bf3132a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "You should be careful when comparing floating-point values ("
            ],
            [
              "float",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " or "
            ],
            [
              "double",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              ") using relational operators: "
            ],
            [
              "==",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              ", "
            ],
            [
              "!=",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              ", "
            ],
            [
              "\\\u003c",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " and so on. These operators give results according to the binary representations of the floating point values. For example:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "You should be careful when comparing floating-point values ("
          },
          {
            "Text": "float",
            "AttrFlags": 2
          },
          {
            "Text": " or "
          },
          {
            "Text": "double",
            "AttrFlags": 2
          },
          {
            "Text": ") using relational operators: "
          },
          {
            "Text": "==",
            "AttrFlags": 2
          },
          {
            "Text": ", "
          },
          {
            "Text": "!=",
            "AttrFlags": 2
          },
          {
            "Text": ", "
          },
          {
            "Text": "\\\u003c",
            "AttrFlags": 2
          },
          {
            "Text": " and so on. These operators give results according to the binary representations of the floating point values. For example:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550460529229,
        "id": "7d62664e-2296-41ca-9d03-19afb901231e",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550460529229,
        "parent_id": "7b033d40-33aa-436e-abc6-21195bf3132a",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "public class CompareTest {\n    public static void main(String[] args) {\n        double oneThird = 1.0 / 3.0;\n        double one = oneThird * 3;\n        System.out.println(one == 1.0);      // prints \"false\"\n    }\n}"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "public class CompareTest {\n    public static void main(String[] args) {\n        double oneThird = 1.0 / 3.0;\n        double one = oneThird * 3;\n        System.out.println(one == 1.0);      // prints \"false\"\n    }\n}",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550460529229,
        "id": "08d46f8a-8fb5-4802-a545-ffb61acf4f35",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550460529229,
        "parent_id": "7b033d40-33aa-436e-abc6-21195bf3132a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "The calculation "
            ],
            [
              "oneThird",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " has introduced a tiny rounding error, and when we multiply "
            ],
            [
              "oneThird",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " by "
            ],
            [
              "3",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " we get a result that is slightly different to "
            ],
            [
              "1.0",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              "."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "The calculation "
          },
          {
            "Text": "oneThird",
            "AttrFlags": 2
          },
          {
            "Text": " has introduced a tiny rounding error, and when we multiply "
          },
          {
            "Text": "oneThird",
            "AttrFlags": 2
          },
          {
            "Text": " by "
          },
          {
            "Text": "3",
            "AttrFlags": 2
          },
          {
            "Text": " we get a result that is slightly different to "
          },
          {
            "Text": "1.0",
            "AttrFlags": 2
          },
          {
            "Text": "."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550460529229,
        "id": "0431bbab-5e4c-40a1-a974-9e7111e626a7",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550460529229,
        "parent_id": "7b033d40-33aa-436e-abc6-21195bf3132a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "This problem of inexact representations is more stark when we attempt to mix "
            ],
            [
              "double",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " and "
            ],
            [
              "float",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " in calculations. For example:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "This problem of inexact representations is more stark when we attempt to mix "
          },
          {
            "Text": "double",
            "AttrFlags": 2
          },
          {
            "Text": " and "
          },
          {
            "Text": "float",
            "AttrFlags": 2
          },
          {
            "Text": " in calculations. For example:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550460529229,
        "id": "84b97fdf-b201-43c1-b047-bcfa52318bb0",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550460529229,
        "parent_id": "7b033d40-33aa-436e-abc6-21195bf3132a",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "public class CompareTest2 {\n    public static void main(String[] args) {\n        float floatVal = 0.1f;\n        double doubleVal = 0.1;\n        double doubleValCopy = floatVal;\n\n        System.out.println(floatVal);      // 0.1\n        System.out.println(doubleVal);     // 0.1\n        System.out.println(doubleValCopy); // 0.10000000149011612\n        \n        System.out.println(floatVal == doubleVal); // false\n        System.out.println(doubleVal == doubleValCopy); // false\n    }\n}"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "public class CompareTest2 {\n    public static void main(String[] args) {\n        float floatVal = 0.1f;\n        double doubleVal = 0.1;\n        double doubleValCopy = floatVal;\n\n        System.out.println(floatVal);      // 0.1\n        System.out.println(doubleVal);     // 0.1\n        System.out.println(doubleValCopy); // 0.10000000149011612\n        \n        System.out.println(floatVal == doubleVal); // false\n        System.out.println(doubleVal == doubleValCopy); // false\n    }\n}",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550460529229,
        "id": "67a2bdfc-f11e-4563-8ed0-edb8ea3d238c",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550460529229,
        "parent_id": "7b033d40-33aa-436e-abc6-21195bf3132a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "The floating point representations used in Java for the "
            ],
            [
              "float",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " and "
            ],
            [
              "double",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " types have limited number of digits of precision. For the "
            ],
            [
              "float",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " type, the precision is 23 binary digits or about 8 decimal digits. For the "
            ],
            [
              "double",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " type, it is 52 bits or about 15 decimal digits. On top of that, some arithmetical operations will introduce rounding errors. Therefore, when a program compares floating point values, it standard practice to define an "
            ],
            [
              "acceptable delta",
              [
                [
                  "b"
                ]
              ]
            ],
            [
              " for the comparison. If the difference between the two numbers is less than the delta, they are deemed to be equal. For example"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "The floating point representations used in Java for the "
          },
          {
            "Text": "float",
            "AttrFlags": 2
          },
          {
            "Text": " and "
          },
          {
            "Text": "double",
            "AttrFlags": 2
          },
          {
            "Text": " types have limited number of digits of precision. For the "
          },
          {
            "Text": "float",
            "AttrFlags": 2
          },
          {
            "Text": " type, the precision is 23 binary digits or about 8 decimal digits. For the "
          },
          {
            "Text": "double",
            "AttrFlags": 2
          },
          {
            "Text": " type, it is 52 bits or about 15 decimal digits. On top of that, some arithmetical operations will introduce rounding errors. Therefore, when a program compares floating point values, it standard practice to define an "
          },
          {
            "Text": "acceptable delta",
            "AttrFlags": 1
          },
          {
            "Text": " for the comparison. If the difference between the two numbers is less than the delta, they are deemed to be equal. For example"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550460529230,
        "id": "c01c77fc-28de-45b9-867b-2c45a593e85f",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550460529230,
        "parent_id": "7b033d40-33aa-436e-abc6-21195bf3132a",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "if (Math.abs(v1 - v2) \u003c delta)"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "if (Math.abs(v1 - v2) \u003c delta)",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550460529230,
        "id": "d70360b4-47c7-428d-ac97-9965b7f68591",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550460529230,
        "parent_id": "7b033d40-33aa-436e-abc6-21195bf3132a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Delta compare example:",
              [
                [
                  "b"
                ]
              ]
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Delta compare example:",
            "AttrFlags": 1
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550460529230,
        "id": "af3542c7-bd54-4bcb-90a1-777c78c89759",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550460529230,
        "parent_id": "7b033d40-33aa-436e-abc6-21195bf3132a",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "public class DeltaCompareExample {\n\n    private static boolean deltaCompare(double v1, double v2, double delta) {\n        // return true iff the difference between v1 and v2 is less than delta\n        return Math.abs(v1 - v2) \u003c delta;\n    }\n    \n    public static void main(String[] args) {\n        double[] doubles = {1.0, 1.0001, 1.0000001, 1.000000001, 1.0000000000001};\n        double[] deltas = {0.01, 0.00001, 0.0000001, 0.0000000001, 0};\n\n        // loop through all of deltas initialized above\n        for (int j = 0; j \u003c deltas.length; j++) {\n            double delta = deltas[j];\n            System.out.println(\"delta: \" + delta);\n\n            // loop through all of the doubles initialized above\n            for (int i = 0; i \u003c doubles.length - 1; i++) {\n                double d1 = doubles[i];\n                double d2 = doubles[i + 1];\n                boolean result = deltaCompare(d1, d2, delta);\n\n                System.out.println(\"\" + d1 + \" == \" + d2 + \" ? \" + result);\n                \n            }\n\n            System.out.println();\n        }\n    }\n}"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "public class DeltaCompareExample {\n\n    private static boolean deltaCompare(double v1, double v2, double delta) {\n        // return true iff the difference between v1 and v2 is less than delta\n        return Math.abs(v1 - v2) \u003c delta;\n    }\n    \n    public static void main(String[] args) {\n        double[] doubles = {1.0, 1.0001, 1.0000001, 1.000000001, 1.0000000000001};\n        double[] deltas = {0.01, 0.00001, 0.0000001, 0.0000000001, 0};\n\n        // loop through all of deltas initialized above\n        for (int j = 0; j \u003c deltas.length; j++) {\n            double delta = deltas[j];\n            System.out.println(\"delta: \" + delta);\n\n            // loop through all of the doubles initialized above\n            for (int i = 0; i \u003c doubles.length - 1; i++) {\n                double d1 = doubles[i];\n                double d2 = doubles[i + 1];\n                boolean result = deltaCompare(d1, d2, delta);\n\n                System.out.println(\"\" + d1 + \" == \" + d2 + \" ? \" + result);\n                \n            }\n\n            System.out.println();\n        }\n    }\n}",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550460529230,
        "id": "6acdb7bf-f9f2-456c-95cf-5e1128d64b9a",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550460529230,
        "parent_id": "7b033d40-33aa-436e-abc6-21195bf3132a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Result:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Result:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550460529230,
        "id": "81d1455f-c899-46c0-9085-5bedb5d07f89",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550460529230,
        "parent_id": "7b033d40-33aa-436e-abc6-21195bf3132a",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "delta: 0.01\n1.0 == 1.0001 ? true\n1.0001 == 1.0000001 ? true\n1.0000001 == 1.000000001 ? true\n1.000000001 == 1.0000000000001 ? true\n\ndelta: 1.0E-5\n1.0 == 1.0001 ? false\n1.0001 == 1.0000001 ? false\n1.0000001 == 1.000000001 ? true\n1.000000001 == 1.0000000000001 ? true\n\ndelta: 1.0E-7\n1.0 == 1.0001 ? false\n1.0001 == 1.0000001 ? false\n1.0000001 == 1.000000001 ? true\n1.000000001 == 1.0000000000001 ? true\n\ndelta: 1.0E-10\n1.0 == 1.0001 ? false\n1.0001 == 1.0000001 ? false\n1.0000001 == 1.000000001 ? false\n1.000000001 == 1.0000000000001 ? false\n\ndelta: 0.0\n1.0 == 1.0001 ? false\n1.0001 == 1.0000001 ? false\n1.0000001 == 1.000000001 ? false\n1.000000001 == 1.0000000000001 ? false"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "delta: 0.01\n1.0 == 1.0001 ? true\n1.0001 == 1.0000001 ? true\n1.0000001 == 1.000000001 ? true\n1.000000001 == 1.0000000000001 ? true\n\ndelta: 1.0E-5\n1.0 == 1.0001 ? false\n1.0001 == 1.0000001 ? false\n1.0000001 == 1.000000001 ? true\n1.000000001 == 1.0000000000001 ? true\n\ndelta: 1.0E-7\n1.0 == 1.0001 ? false\n1.0001 == 1.0000001 ? false\n1.0000001 == 1.000000001 ? true\n1.000000001 == 1.0000000000001 ? true\n\ndelta: 1.0E-10\n1.0 == 1.0001 ? false\n1.0001 == 1.0000001 ? false\n1.0000001 == 1.000000001 ? false\n1.000000001 == 1.0000000000001 ? false\n\ndelta: 0.0\n1.0 == 1.0001 ? false\n1.0001 == 1.0000001 ? false\n1.0000001 == 1.000000001 ? false\n1.000000001 == 1.0000000000001 ? false",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550460529230,
        "id": "98a3b11a-2624-4d32-9ed1-fd1414a858a3",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550460529230,
        "parent_id": "7b033d40-33aa-436e-abc6-21195bf3132a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Also for comparison of "
            ],
            [
              "double",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " and "
            ],
            [
              "float",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " primitive types static "
            ],
            [
              "compare",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " method of corresponding boxing type can be used. For example:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Also for comparison of "
          },
          {
            "Text": "double",
            "AttrFlags": 2
          },
          {
            "Text": " and "
          },
          {
            "Text": "float",
            "AttrFlags": 2
          },
          {
            "Text": " primitive types static "
          },
          {
            "Text": "compare",
            "AttrFlags": 2
          },
          {
            "Text": " method of corresponding boxing type can be used. For example:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550460529230,
        "id": "b98c3d9f-202f-4366-a980-bf0560b8eb3d",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550460529230,
        "parent_id": "7b033d40-33aa-436e-abc6-21195bf3132a",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "double a = 1.0;\ndouble b = 1.0001;\n\nSystem.out.println(Double.compare(a, b));//-1\nSystem.out.println(Double.compare(b, a));//1"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "double a = 1.0;\ndouble b = 1.0001;\n\nSystem.out.println(Double.compare(a, b));//-1\nSystem.out.println(Double.compare(b, a));//1",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550460529230,
        "id": "6dc60518-43b0-4c8d-9640-3f3441ace8d3",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550460529230,
        "parent_id": "7b033d40-33aa-436e-abc6-21195bf3132a",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Finally, determining what deltas are most appropriate for a comparison can be tricky. A commonly used approach is to pick delta values that are our intuition says are about right. However, if you know scale and (true) accuracy of the input values, and the calculations performed, it may be possible to come up with mathematically sound bounds on the accuracy of the results, and hence for the deltas. (There is a formal branch of Mathematics known as Numerical Analysis that used to be taught to computational scientists that covered this kind of analysis.)"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Finally, determining what deltas are most appropriate for a comparison can be tricky. A commonly used approach is to pick delta values that are our intuition says are about right. However, if you know scale and (true) accuracy of the input values, and the calculations performed, it may be possible to come up with mathematically sound bounds on the accuracy of the results, and hence for the deltas. (There is a formal branch of Mathematics known as Numerical Analysis that used to be taught to computational scientists that covered this kind of analysis.)"
          }
        ]
      }
    ],
    "title": "010 Comparing floating point values"
  },
  "Users": [
    {
      "email": "kkowalczyk@gmail.com",
      "family_name": "Kowalczyk",
      "given_name": "Krzysztof",
      "id": "bb760e2d-d679-4b64-b2a9-03005b21870a",
      "locale": "en",
      "mobile_onboarding_completed": true,
      "onboarding_completed": true,
      "profile_photo": "https://s3-us-west-2.amazonaws.com/public.notion-static.com/2dcaa66c-7674-4ff6-9924-601785b63561/head-bw-640x960.png",
      "time_zone": "America/Los_Angeles",
      "version": 18
    }
  ],
  "Tables": null
}