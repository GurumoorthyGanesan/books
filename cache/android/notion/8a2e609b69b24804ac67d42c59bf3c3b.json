{
  "ID": "8a2e609b-69b2-4804-ac67-d42c59bf3c3b",
  "Root": {
    "alive": true,
    "content": [
      "f87d7d7b-da89-4aa6-b210-78002238f957",
      "3b411db7-de99-4558-a49e-d749e9b1fa07",
      "4ac32076-b582-4f29-910b-1defdb2d75b1",
      "89731d1e-8b05-4b01-bbb2-7033aef19450",
      "e8b399e5-3b4c-4d3d-a7bd-94d02bcbd38a",
      "0b159eac-59be-427d-9373-51575d1d4a36",
      "45fe7afd-c5f2-469c-8788-ed117d2e2d95",
      "71bb7869-d53f-49c2-9979-857780ee1505",
      "98b31375-05f4-4a36-8a61-211815f5818f",
      "b0e84807-582a-4b86-a3dc-03dee8657f6f",
      "46c1cdde-7e1f-4570-92a4-414b44481d07"
    ],
    "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
    "created_time": 1550445157824,
    "format": {
      "page_full_width": true,
      "page_small_text": true
    },
    "id": "8a2e609b-69b2-4804-ac67-d42c59bf3c3b",
    "ignore_block_count": true,
    "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
    "last_edited_time": 1550445157824,
    "parent_id": "7145866f-7d62-48b0-a57b-66c494eb5a9f",
    "parent_table": "block",
    "properties": {
      "title": [
        [
          "Download a file from Server using Retrofit2"
        ]
      ]
    },
    "type": "page",
    "version": 3,
    "content_resolved": [
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550445157820,
        "id": "f87d7d7b-da89-4aa6-b210-78002238f957",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550445157820,
        "parent_id": "8a2e609b-69b2-4804-ac67-d42c59bf3c3b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Interface declaration for downloading a file"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Interface declaration for downloading a file"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550445157822,
        "id": "3b411db7-de99-4558-a49e-d749e9b1fa07",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550445157822,
        "parent_id": "8a2e609b-69b2-4804-ac67-d42c59bf3c3b",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "public interface ApiInterface {\n    @GET(\"movie/now_playing\")\n    Call\u003cMovieResponse\u003e getNowPlayingMovies(@Query(\"api_key\") String apiKey, @Query(\"page\") int page);\n\n    // option 1: a resource relative to your base URL\n    @GET(\"resource/example.zip\")\n    Call\u003cResponseBody\u003e downloadFileWithFixedUrl();\n\n    // option 2: using a dynamic URL\n    @GET\n    Call\u003cResponseBody\u003e downloadFileWithDynamicUrl(@Url String fileUrl);\n}"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "public interface ApiInterface {\n    @GET(\"movie/now_playing\")\n    Call\u003cMovieResponse\u003e getNowPlayingMovies(@Query(\"api_key\") String apiKey, @Query(\"page\") int page);\n\n    // option 1: a resource relative to your base URL\n    @GET(\"resource/example.zip\")\n    Call\u003cResponseBody\u003e downloadFileWithFixedUrl();\n\n    // option 2: using a dynamic URL\n    @GET\n    Call\u003cResponseBody\u003e downloadFileWithDynamicUrl(@Url String fileUrl);\n}",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550445157823,
        "id": "4ac32076-b582-4f29-910b-1defdb2d75b1",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550445157823,
        "parent_id": "8a2e609b-69b2-4804-ac67-d42c59bf3c3b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "The option 1 is used for downloading a file from Server which is having fixed URL. and option 2 is used to pass a dynamic value as full URL to request call. This can be helpful when downloading files, which are dependent of parameters like user or time."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "The option 1 is used for downloading a file from Server which is having fixed URL. and option 2 is used to pass a dynamic value as full URL to request call. This can be helpful when downloading files, which are dependent of parameters like user or time."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550445157823,
        "id": "89731d1e-8b05-4b01-bbb2-7033aef19450",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550445157823,
        "parent_id": "8a2e609b-69b2-4804-ac67-d42c59bf3c3b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Setup retrofit for making api calls"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Setup retrofit for making api calls"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550445157823,
        "id": "e8b399e5-3b4c-4d3d-a7bd-94d02bcbd38a",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550445157823,
        "parent_id": "8a2e609b-69b2-4804-ac67-d42c59bf3c3b",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "public class ServiceGenerator {\n\n    public static final String API_BASE_URL = \"http://your.api-base.url/\";\n\n    private static OkHttpClient.Builder httpClient = new OkHttpClient.Builder();\n\n    private static Retrofit.Builder builder =\n            new Retrofit.Builder()\n            .baseUrl(API_BASE_URL)\n            .addConverterFactory(GsonConverterFactory.create());\n\n    public static \u003cS\u003e S createService(Class\u003cS\u003e serviceClass){\n        Retrofit retrofit = builder.client(httpClient.build()).build();\n        return retrofit.create(serviceClass);\n    }\n\n}"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "public class ServiceGenerator {\n\n    public static final String API_BASE_URL = \"http://your.api-base.url/\";\n\n    private static OkHttpClient.Builder httpClient = new OkHttpClient.Builder();\n\n    private static Retrofit.Builder builder =\n            new Retrofit.Builder()\n            .baseUrl(API_BASE_URL)\n            .addConverterFactory(GsonConverterFactory.create());\n\n    public static \u003cS\u003e S createService(Class\u003cS\u003e serviceClass){\n        Retrofit retrofit = builder.client(httpClient.build()).build();\n        return retrofit.create(serviceClass);\n    }\n\n}",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550445157823,
        "id": "0b159eac-59be-427d-9373-51575d1d4a36",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550445157823,
        "parent_id": "8a2e609b-69b2-4804-ac67-d42c59bf3c3b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Now, make implementation of api for downloading file from server"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Now, make implementation of api for downloading file from server"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550445157823,
        "id": "45fe7afd-c5f2-469c-8788-ed117d2e2d95",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550445157823,
        "parent_id": "8a2e609b-69b2-4804-ac67-d42c59bf3c3b",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "private void downloadFile(){\n        ApiInterface apiInterface = ServiceGenerator.createService(ApiInterface.class);\n\n        Call\u003cResponseBody\u003e call = apiInterface.downloadFileWithFixedUrl();\n\n        call.enqueue(new Callback\u003cResponseBody\u003e() {\n            @Override\n            public void onResponse(Call\u003cResponseBody\u003e call, Response\u003cResponseBody\u003e response) {\n                if (response.isSuccessful()){\n                    boolean writtenToDisk = writeResponseBodyToDisk(response.body());\n\n                    Log.d(\"File download was a success? \", String.valueOf(writtenToDisk));\n                }\n            }\n\n            @Override\n            public void onFailure(Call\u003cResponseBody\u003e call, Throwable t) {\n\n            }\n        });\n    }"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "private void downloadFile(){\n        ApiInterface apiInterface = ServiceGenerator.createService(ApiInterface.class);\n\n        Call\u003cResponseBody\u003e call = apiInterface.downloadFileWithFixedUrl();\n\n        call.enqueue(new Callback\u003cResponseBody\u003e() {\n            @Override\n            public void onResponse(Call\u003cResponseBody\u003e call, Response\u003cResponseBody\u003e response) {\n                if (response.isSuccessful()){\n                    boolean writtenToDisk = writeResponseBodyToDisk(response.body());\n\n                    Log.d(\"File download was a success? \", String.valueOf(writtenToDisk));\n                }\n            }\n\n            @Override\n            public void onFailure(Call\u003cResponseBody\u003e call, Throwable t) {\n\n            }\n        });\n    }",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550445157823,
        "id": "71bb7869-d53f-49c2-9979-857780ee1505",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550445157823,
        "parent_id": "8a2e609b-69b2-4804-ac67-d42c59bf3c3b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "And after getting response in the callback, code some standard IO for saving file to disk. Here is the code:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "And after getting response in the callback, code some standard IO for saving file to disk. Here is the code:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550445157823,
        "id": "98b31375-05f4-4a36-8a61-211815f5818f",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550445157823,
        "parent_id": "8a2e609b-69b2-4804-ac67-d42c59bf3c3b",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "private boolean writeResponseBodyToDisk(ResponseBody body) {\n        try {\n            // todo change the file location/name according to your needs\n            File futureStudioIconFile = new File(getExternalFilesDir(null) + File.separator + \"Future Studio Icon.png\");\n\n            InputStream inputStream = null;\n            OutputStream outputStream = null;\n\n            try {\n                byte[] fileReader = new byte[4096];\n\n                long fileSize = body.contentLength();\n                long fileSizeDownloaded = 0;\n\n                inputStream = body.byteStream();\n                outputStream = new FileOutputStream(futureStudioIconFile);\n\n                while (true) {\n                    int read = inputStream.read(fileReader);\n\n                    if (read == -1) {\n                        break;\n                    }\n\n                    outputStream.write(fileReader, 0, read);\n\n                    fileSizeDownloaded += read;\n\n                    Log.d(\"File Download: \" , fileSizeDownloaded + \" of \" + fileSize);\n                }\n\n                outputStream.flush();\n\n                return true;\n            } catch (IOException e) {\n                return false;\n            } finally {\n                if (inputStream != null) {\n                    inputStream.close();\n                }\n\n                if (outputStream != null) {\n                    outputStream.close();\n                }\n            }\n        } catch (IOException e) {\n            return false;\n        }\n    }"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "private boolean writeResponseBodyToDisk(ResponseBody body) {\n        try {\n            // todo change the file location/name according to your needs\n            File futureStudioIconFile = new File(getExternalFilesDir(null) + File.separator + \"Future Studio Icon.png\");\n\n            InputStream inputStream = null;\n            OutputStream outputStream = null;\n\n            try {\n                byte[] fileReader = new byte[4096];\n\n                long fileSize = body.contentLength();\n                long fileSizeDownloaded = 0;\n\n                inputStream = body.byteStream();\n                outputStream = new FileOutputStream(futureStudioIconFile);\n\n                while (true) {\n                    int read = inputStream.read(fileReader);\n\n                    if (read == -1) {\n                        break;\n                    }\n\n                    outputStream.write(fileReader, 0, read);\n\n                    fileSizeDownloaded += read;\n\n                    Log.d(\"File Download: \" , fileSizeDownloaded + \" of \" + fileSize);\n                }\n\n                outputStream.flush();\n\n                return true;\n            } catch (IOException e) {\n                return false;\n            } finally {\n                if (inputStream != null) {\n                    inputStream.close();\n                }\n\n                if (outputStream != null) {\n                    outputStream.close();\n                }\n            }\n        } catch (IOException e) {\n            return false;\n        }\n    }",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550445157824,
        "id": "b0e84807-582a-4b86-a3dc-03dee8657f6f",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550445157824,
        "parent_id": "8a2e609b-69b2-4804-ac67-d42c59bf3c3b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Note we have specified "
            ],
            [
              "ResponseBody",
              [
                [
                  "b"
                ]
              ]
            ],
            [
              " as return type, otherwise Retrofit will try to parse and convert it, which doesn’t make sense when you are downloading file."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Note we have specified "
          },
          {
            "Text": "ResponseBody",
            "AttrFlags": 1
          },
          {
            "Text": " as return type, otherwise Retrofit will try to parse and convert it, which doesn’t make sense when you are downloading file."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550445157824,
        "id": "46c1cdde-7e1f-4570-92a4-414b44481d07",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550445157824,
        "parent_id": "8a2e609b-69b2-4804-ac67-d42c59bf3c3b",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "If you want more on Retrofit stuffs, got to this link as it is very useful. [1]: https://futurestud.io/blog/retrofit-getting-started-and-android-client"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "If you want more on Retrofit stuffs, got to this link as it is very useful. [1]: https://futurestud.io/blog/retrofit-getting-started-and-android-client"
          }
        ]
      }
    ],
    "title": "Download a file from Server using Retrofit2",
    "format_page": {
      "page_cover": "",
      "page_cover_position": 0,
      "page_font": "",
      "page_full_width": true,
      "page_icon": "",
      "page_small_text": true
    }
  },
  "Users": [
    {
      "email": "kkowalczyk@gmail.com",
      "family_name": "Kowalczyk",
      "given_name": "Krzysztof",
      "id": "bb760e2d-d679-4b64-b2a9-03005b21870a",
      "locale": "en",
      "mobile_onboarding_completed": true,
      "onboarding_completed": true,
      "profile_photo": "https://s3-us-west-2.amazonaws.com/public.notion-static.com/2dcaa66c-7674-4ff6-9924-601785b63561/head-bw-640x960.png",
      "time_zone": "America/Los_Angeles",
      "version": 18
    }
  ],
  "Tables": null
}