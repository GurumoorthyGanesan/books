{
  "ID": "752478aa-2ea5-4fa5-97da-d66df1aadecc",
  "Root": {
    "id": "752478aa-2ea5-4fa5-97da-d66df1aadecc",
    "alive": true,
    "content": [
      "456b821e-3a6a-443b-8f86-b133c344b3e0",
      "fd80a307-7a3c-47a7-90a1-bc97b216a698",
      "a9018ec1-690b-4949-a9a0-40a8faf79a2c",
      "1b6f8390-4e7d-42ea-bc45-a4f033b958ee",
      "8c4c6dce-9871-492f-82cf-aea7f8f51d02",
      "dc818a6b-0018-4cbd-a4c6-9fc1f60c71a3",
      "7a1d37b8-964a-4343-8aa0-d9492ff0c153",
      "8cdbd6dc-d4cc-44d2-9874-124cd624cc89",
      "ac76c04e-cb79-4205-baf0-417d74e29a7a",
      "f79aab50-1e13-4051-b8ba-8301341fd2db",
      "832f9c9f-3df4-449f-8a36-8446fc69d504",
      "45b064f7-7022-4a7d-b4f4-d4031bfaca8e",
      "3ce15d34-6a5d-40ae-8764-36af0a3985cb",
      "12577c85-7d9a-4333-96ca-4d8a19670d67",
      "e49a2808-e561-408f-8147-624cb06e2297",
      "a532e619-8d2e-48f2-8b6e-7552472546db",
      "47dda796-5fe2-4e7f-a28f-40672b0c4899",
      "55a48f1d-5b7a-44da-a58f-c56b4c631778",
      "dbccc9a3-eccf-4a91-b99f-c2a66fec197e",
      "6daaa970-16fb-406e-9239-9e6572764ac1"
    ],
    "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
    "created_time": 1549527261548,
    "format": {
      "page_full_width": true,
      "page_small_text": true
    },
    "ignore_block_count": true,
    "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
    "last_edited_time": 1550202180000,
    "parent_id": "ae23cb97-ee8a-4ca7-887f-57c7afb5dfd8",
    "parent_table": "block",
    "properties": {
      "title": [
        [
          "Weak References"
        ]
      ]
    },
    "type": "page",
    "version": 9,
    "content_resolved": [
      {
        "id": "456b821e-3a6a-443b-8f86-b133c344b3e0",
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1549527261541,
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1549527261541,
        "parent_id": "752478aa-2ea5-4fa5-97da-d66df1aadecc",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "In .NET, the GC allocates objects when there are no references left to them. Therefore, while an object can still be reached from code (there is a strong reference to it), the GC will not allocate this object. This can become a problem if there are a lot of large objects."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "In .NET, the GC allocates objects when there are no references left to them. Therefore, while an object can still be reached from code (there is a strong reference to it), the GC will not allocate this object. This can become a problem if there are a lot of large objects."
          }
        ]
      },
      {
        "id": "fd80a307-7a3c-47a7-90a1-bc97b216a698",
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1549527261543,
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1549527261543,
        "parent_id": "752478aa-2ea5-4fa5-97da-d66df1aadecc",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "A weak reference is a reference, that allows the GC to collect the object while still allowing to access the object. A weak reference is valid only during the indeterminate amount of time until the object is collected when no strong references exist. When you use a weak reference, the application can still obtain a strong reference to the object, which prevents it from being collected. So weak references can be useful for holding on to large objects that are expensive to initialize, but should be available for garbage collection if they are not actively in use."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "A weak reference is a reference, that allows the GC to collect the object while still allowing to access the object. A weak reference is valid only during the indeterminate amount of time until the object is collected when no strong references exist. When you use a weak reference, the application can still obtain a strong reference to the object, which prevents it from being collected. So weak references can be useful for holding on to large objects that are expensive to initialize, but should be available for garbage collection if they are not actively in use."
          }
        ]
      },
      {
        "id": "a9018ec1-690b-4949-a9a0-40a8faf79a2c",
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1549527261543,
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1549527261543,
        "parent_id": "752478aa-2ea5-4fa5-97da-d66df1aadecc",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Simple usage:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Simple usage:"
          }
        ]
      },
      {
        "id": "1b6f8390-4e7d-42ea-bc45-a4f033b958ee",
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1549527261544,
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550202180000,
        "parent_id": "752478aa-2ea5-4fa5-97da-d66df1aadecc",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "C#"
            ]
          ],
          "title": [
            [
              "WeakReference reference = new WeakReference(new object(), false);\n\nGC.Collect();\n\nobject target = reference.Target;\nif (target != null)\n  DoSomething(target);"
            ]
          ]
        },
        "type": "code",
        "version": 3,
        "code": "WeakReference reference = new WeakReference(new object(), false);\n\nGC.Collect();\n\nobject target = reference.Target;\nif (target != null)\n  DoSomething(target);",
        "code_language": "C#"
      },
      {
        "id": "8c4c6dce-9871-492f-82cf-aea7f8f51d02",
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1549527261544,
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1549527261544,
        "parent_id": "752478aa-2ea5-4fa5-97da-d66df1aadecc",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "So weak references could be used to maintain, for example, a cache of objects. However, it is important to remember that there is always the risk that the garbage collector will get to the object before a strong reference is reestablished."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "So weak references could be used to maintain, for example, a cache of objects. However, it is important to remember that there is always the risk that the garbage collector will get to the object before a strong reference is reestablished."
          }
        ]
      },
      {
        "id": "dc818a6b-0018-4cbd-a4c6-9fc1f60c71a3",
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1549527261544,
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1549527261544,
        "parent_id": "752478aa-2ea5-4fa5-97da-d66df1aadecc",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Weak references are also handy for avoiding memory leaks. A typical use case is with events."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Weak references are also handy for avoiding memory leaks. A typical use case is with events."
          }
        ]
      },
      {
        "id": "7a1d37b8-964a-4343-8aa0-d9492ff0c153",
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1549527261544,
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1549527261544,
        "parent_id": "752478aa-2ea5-4fa5-97da-d66df1aadecc",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Suppose we have some handler to an event on a source:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Suppose we have some handler to an event on a source:"
          }
        ]
      },
      {
        "id": "8cdbd6dc-d4cc-44d2-9874-124cd624cc89",
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1549527261544,
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550202180000,
        "parent_id": "752478aa-2ea5-4fa5-97da-d66df1aadecc",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "C#"
            ]
          ],
          "title": [
            [
              "Source.Event += new EventHandler(Handler)"
            ]
          ]
        },
        "type": "code",
        "version": 3,
        "code": "Source.Event += new EventHandler(Handler)",
        "code_language": "C#"
      },
      {
        "id": "ac76c04e-cb79-4205-baf0-417d74e29a7a",
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1549527261544,
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1549527261544,
        "parent_id": "752478aa-2ea5-4fa5-97da-d66df1aadecc",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "This code registers an event handler and creates a strong reference from the event source to the listening object. If the source object has a longer lifetime than the listener, and the listener doesn’t need the event anymore when there are no other references to it, using normal .NET events causes a memory leak: the source object holds listener objects in memory that should be garbage collected."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "This code registers an event handler and creates a strong reference from the event source to the listening object. If the source object has a longer lifetime than the listener, and the listener doesn’t need the event anymore when there are no other references to it, using normal .NET events causes a memory leak: the source object holds listener objects in memory that should be garbage collected."
          }
        ]
      },
      {
        "id": "f79aab50-1e13-4051-b8ba-8301341fd2db",
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1549527261546,
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1549527261546,
        "parent_id": "752478aa-2ea5-4fa5-97da-d66df1aadecc",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "In this case, it may be a good idea is to use the "
            ],
            [
              "Weak Event Pattern",
              [
                [
                  "a",
                  "https://msdn.microsoft.com/en-us/library/aa970850(v=vs.110).aspx"
                ]
              ]
            ],
            [
              "."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "In this case, it may be a good idea is to use the "
          },
          {
            "Text": "Weak Event Pattern",
            "Link": "https://msdn.microsoft.com/en-us/library/aa970850(v=vs.110).aspx"
          },
          {
            "Text": "."
          }
        ]
      },
      {
        "id": "832f9c9f-3df4-449f-8a36-8446fc69d504",
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1549527261546,
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1549527261546,
        "parent_id": "752478aa-2ea5-4fa5-97da-d66df1aadecc",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Something like:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Something like:"
          }
        ]
      },
      {
        "id": "45b064f7-7022-4a7d-b4f4-d4031bfaca8e",
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1549527261546,
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550202180000,
        "parent_id": "752478aa-2ea5-4fa5-97da-d66df1aadecc",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "C#"
            ]
          ],
          "title": [
            [
              "public static class WeakEventManager\n    {\n    public static void SetHandler\u003cS, TArgs\u003e(\n    Action\u003cEventHandler\u003cTArgs\u003e\u003e add,\n    Action\u003cEventHandler\u003cTArgs\u003e\u003e remove,\n    S subscriber,\n    Action\u003cS, TArgs\u003e action)\n    where TArgs : EventArgs\n    where S : class\n        {\n            var subscrWeakRef = new WeakReference(subscriber);\n            EventHandler\u003cTArgs\u003e handler = null;\n\n            handler = (s, e) =\u003e\n            {\n                var subscrStrongRef = subscrWeakRef.Target as S;\n                if (subscrStrongRef != null)\n                {\n                    action(subscrStrongRef, e);\n                }\n                else\n                {\n                    remove(handler);\n                    handler = null;\n                }\n            };\n\n            add(handler);\n        }\n    }"
            ]
          ]
        },
        "type": "code",
        "version": 3,
        "code": "public static class WeakEventManager\n    {\n    public static void SetHandler\u003cS, TArgs\u003e(\n    Action\u003cEventHandler\u003cTArgs\u003e\u003e add,\n    Action\u003cEventHandler\u003cTArgs\u003e\u003e remove,\n    S subscriber,\n    Action\u003cS, TArgs\u003e action)\n    where TArgs : EventArgs\n    where S : class\n        {\n            var subscrWeakRef = new WeakReference(subscriber);\n            EventHandler\u003cTArgs\u003e handler = null;\n\n            handler = (s, e) =\u003e\n            {\n                var subscrStrongRef = subscrWeakRef.Target as S;\n                if (subscrStrongRef != null)\n                {\n                    action(subscrStrongRef, e);\n                }\n                else\n                {\n                    remove(handler);\n                    handler = null;\n                }\n            };\n\n            add(handler);\n        }\n    }",
        "code_language": "C#"
      },
      {
        "id": "3ce15d34-6a5d-40ae-8764-36af0a3985cb",
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1549527261546,
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1549527261546,
        "parent_id": "752478aa-2ea5-4fa5-97da-d66df1aadecc",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "and used like this:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "and used like this:"
          }
        ]
      },
      {
        "id": "12577c85-7d9a-4333-96ca-4d8a19670d67",
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1549527261546,
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550202180000,
        "parent_id": "752478aa-2ea5-4fa5-97da-d66df1aadecc",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "C#"
            ]
          ],
          "title": [
            [
              "EventSource s = new EventSource();\n Subscriber subscriber = new Subscriber();\n WeakEventManager.SetHandler\u003cSubscriber, SomeEventArgs\u003e(a =\u003e s.Event += a, r =\u003e s.Event -= r, subscriber, (s,e) =\u003e { s.HandleEvent(e); });"
            ]
          ]
        },
        "type": "code",
        "version": 3,
        "code": "EventSource s = new EventSource();\n Subscriber subscriber = new Subscriber();\n WeakEventManager.SetHandler\u003cSubscriber, SomeEventArgs\u003e(a =\u003e s.Event += a, r =\u003e s.Event -= r, subscriber, (s,e) =\u003e { s.HandleEvent(e); });",
        "code_language": "C#"
      },
      {
        "id": "e49a2808-e561-408f-8147-624cb06e2297",
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1549527261546,
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1549527261546,
        "parent_id": "752478aa-2ea5-4fa5-97da-d66df1aadecc",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "In this case of course we have some restrictions - the event must be a"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "In this case of course we have some restrictions - the event must be a"
          }
        ]
      },
      {
        "id": "a532e619-8d2e-48f2-8b6e-7552472546db",
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1549527261546,
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550202180000,
        "parent_id": "752478aa-2ea5-4fa5-97da-d66df1aadecc",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "C#"
            ]
          ],
          "title": [
            [
              "public event EventHandler\u003cSomeEventArgs\u003e Event;"
            ]
          ]
        },
        "type": "code",
        "version": 3,
        "code": "public event EventHandler\u003cSomeEventArgs\u003e Event;",
        "code_language": "C#"
      },
      {
        "id": "47dda796-5fe2-4e7f-a28f-40672b0c4899",
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1549527261547,
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1549527261547,
        "parent_id": "752478aa-2ea5-4fa5-97da-d66df1aadecc",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "As "
            ],
            [
              "MSDN",
              [
                [
                  "a",
                  "https://msdn.microsoft.com/en-us/library/ms404247(v=vs.110).aspx#Anchor_1"
                ]
              ]
            ],
            [
              " suggests:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "As "
          },
          {
            "Text": "MSDN",
            "Link": "https://msdn.microsoft.com/en-us/library/ms404247(v=vs.110).aspx#Anchor_1"
          },
          {
            "Text": " suggests:"
          }
        ]
      },
      {
        "id": "55a48f1d-5b7a-44da-a58f-c56b4c631778",
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1549527261547,
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1549527261547,
        "parent_id": "752478aa-2ea5-4fa5-97da-d66df1aadecc",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Use long weak references only when necessary as the state of the object is unpredictable after finalization."
            ]
          ]
        },
        "type": "bulleted_list",
        "version": 1,
        "inline_content": [
          {
            "Text": "Use long weak references only when necessary as the state of the object is unpredictable after finalization."
          }
        ]
      },
      {
        "id": "dbccc9a3-eccf-4a91-b99f-c2a66fec197e",
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1549527261547,
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1549527261547,
        "parent_id": "752478aa-2ea5-4fa5-97da-d66df1aadecc",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Avoid using weak references to small objects because the pointer itself may be as large or larger."
            ]
          ]
        },
        "type": "bulleted_list",
        "version": 1,
        "inline_content": [
          {
            "Text": "Avoid using weak references to small objects because the pointer itself may be as large or larger."
          }
        ]
      },
      {
        "id": "6daaa970-16fb-406e-9239-9e6572764ac1",
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1549527261548,
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1549527261548,
        "parent_id": "752478aa-2ea5-4fa5-97da-d66df1aadecc",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Avoid using weak references as an automatic solution to memory management problems. Instead, develop an effective caching policy for handling your application’s objects."
            ]
          ]
        },
        "type": "bulleted_list",
        "version": 1,
        "inline_content": [
          {
            "Text": "Avoid using weak references as an automatic solution to memory management problems. Instead, develop an effective caching policy for handling your application’s objects."
          }
        ]
      }
    ],
    "title": "Weak References",
    "format_page": {
      "page_cover": "",
      "page_cover_position": 0,
      "page_font": "",
      "page_full_width": true,
      "page_icon": "",
      "page_small_text": true
    }
  },
  "Users": [
    {
      "email": "kkowalczyk@gmail.com",
      "family_name": "Kowalczyk",
      "given_name": "Krzysztof",
      "id": "bb760e2d-d679-4b64-b2a9-03005b21870a",
      "locale": "",
      "mobile_onboarding_completed": true,
      "onboarding_completed": true,
      "profile_photo": "https://s3-us-west-2.amazonaws.com/public.notion-static.com/2dcaa66c-7674-4ff6-9924-601785b63561/head-bw-640x960.png",
      "time_zone": "",
      "version": 94
    }
  ],
  "Tables": null
}