{
  "ID": "32577fa5-65b9-4897-9d21-df01f693302d",
  "Root": {
    "alive": true,
    "content": [
      "f5e92c0f-2007-4c84-90dd-692e37f8ee07",
      "4ebbde24-cfd5-43cd-b417-6a453af6e1ff",
      "e5b6824d-c217-4439-a678-ffc85602917d",
      "49916e05-8729-405e-b0bf-15b29a250796",
      "e7920eef-fd87-4d66-aa17-d13c482e2214",
      "2f4ec0f2-9b48-4308-970f-f21499d136e7",
      "5a348244-bb26-4463-9bc4-135925a58ac2",
      "5744a9d8-e9e6-45d2-8bd0-2e6237972ca9",
      "e2180706-ea0c-4831-a310-37978fc44fb7",
      "e03ff82f-b6dc-4795-bbfd-34b35c1d8c35",
      "5803b778-a04f-402e-827a-9ab82796e94e",
      "9918a359-97ec-4bce-a7bc-238a734fb764",
      "c4bb9bf3-0a14-4bf0-8026-dd02ebef61e4",
      "0b4e450f-704d-4a9f-a6fa-3287af30eaed",
      "97ab27e4-87a1-459c-801b-dee5e6319265",
      "47322de6-303c-4015-881a-6749febd10db"
    ],
    "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
    "created_time": 1552023055126,
    "format": {
      "page_full_width": true,
      "page_small_text": true
    },
    "id": "32577fa5-65b9-4897-9d21-df01f693302d",
    "ignore_block_count": true,
    "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
    "last_edited_time": 1552023055126,
    "parent_id": "c09beb38-7179-42f3-a2d1-f4b433238aa0",
    "parent_table": "block",
    "properties": {
      "title": [
        [
          "MySQLi Insert ID"
        ]
      ]
    },
    "type": "page",
    "version": 3,
    "content_resolved": [
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552023055124,
        "id": "f5e92c0f-2007-4c84-90dd-692e37f8ee07",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552023055124,
        "parent_id": "32577fa5-65b9-4897-9d21-df01f693302d",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Retrieve the last ID generated by an "
            ],
            [
              "INSERT",
              [
                [
                  "c"
                ],
                [
                  "a",
                  "http://stackoverflow.com/documentation/sql/465/insert#t=20160725153942900947"
                ]
              ]
            ],
            [
              " query on a table with an "
            ],
            [
              "AUTO_INCREMENT",
              [
                [
                  "a",
                  "http://stackoverflow.com/documentation/sql/505/primary-keys/1664/using-auto-increment#t=201607251534302898415"
                ]
              ]
            ],
            [
              " column."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Retrieve the last ID generated by an "
          },
          {
            "Text": "INSERT",
            "AttrFlags": 2,
            "Link": "http://stackoverflow.com/documentation/sql/465/insert#t=20160725153942900947"
          },
          {
            "Text": " query on a table with an "
          },
          {
            "Text": "AUTO_INCREMENT",
            "Link": "http://stackoverflow.com/documentation/sql/505/primary-keys/1664/using-auto-increment#t=201607251534302898415"
          },
          {
            "Text": " column."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552023055124,
        "id": "4ebbde24-cfd5-43cd-b417-6a453af6e1ff",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552023055124,
        "parent_id": "32577fa5-65b9-4897-9d21-df01f693302d",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Object-oriented Style",
              [
                [
                  "b"
                ]
              ]
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Object-oriented Style",
            "AttrFlags": 1
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552023055124,
        "id": "e5b6824d-c217-4439-a678-ffc85602917d",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552023055124,
        "parent_id": "32577fa5-65b9-4897-9d21-df01f693302d",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "$id = $conn-\u003einsert_id;"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "$id = $conn-\u003einsert_id;",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552023055124,
        "id": "49916e05-8729-405e-b0bf-15b29a250796",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552023055124,
        "parent_id": "32577fa5-65b9-4897-9d21-df01f693302d",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Procedural Style",
              [
                [
                  "b"
                ]
              ]
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Procedural Style",
            "AttrFlags": 1
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552023055124,
        "id": "e7920eef-fd87-4d66-aa17-d13c482e2214",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552023055124,
        "parent_id": "32577fa5-65b9-4897-9d21-df01f693302d",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "$id = mysqli_insert_id($conn);"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "$id = mysqli_insert_id($conn);",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552023055124,
        "id": "2f4ec0f2-9b48-4308-970f-f21499d136e7",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552023055124,
        "parent_id": "32577fa5-65b9-4897-9d21-df01f693302d",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Returns zero if there was no previous query on the connection or if the query did not update an AUTO_INCREMENT value."
            ]
          ]
        },
        "type": "quote",
        "version": 1,
        "inline_content": [
          {
            "Text": "Returns zero if there was no previous query on the connection or if the query did not update an AUTO_INCREMENT value."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552023055125,
        "id": "5a348244-bb26-4463-9bc4-135925a58ac2",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552023055125,
        "parent_id": "32577fa5-65b9-4897-9d21-df01f693302d",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Insert id when updating rows",
              [
                [
                  "b"
                ]
              ]
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Insert id when updating rows",
            "AttrFlags": 1
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552023055125,
        "id": "5744a9d8-e9e6-45d2-8bd0-2e6237972ca9",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552023055125,
        "parent_id": "32577fa5-65b9-4897-9d21-df01f693302d",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Normally an "
            ],
            [
              "UPDATE",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " statement does not return an insert id, since an "
            ],
            [
              "AUTO_INCREMENT",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " id is only returned when a new row has been saved (or inserted). One way of making updates to the new id is to use "
            ],
            [
              "INSERT ... ON DUPLICATE KEY UPDATE",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " syntax for updating."
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Normally an "
          },
          {
            "Text": "UPDATE",
            "AttrFlags": 2
          },
          {
            "Text": " statement does not return an insert id, since an "
          },
          {
            "Text": "AUTO_INCREMENT",
            "AttrFlags": 2
          },
          {
            "Text": " id is only returned when a new row has been saved (or inserted). One way of making updates to the new id is to use "
          },
          {
            "Text": "INSERT ... ON DUPLICATE KEY UPDATE",
            "AttrFlags": 2
          },
          {
            "Text": " syntax for updating."
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552023055125,
        "id": "e2180706-ea0c-4831-a310-37978fc44fb7",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552023055125,
        "parent_id": "32577fa5-65b9-4897-9d21-df01f693302d",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Setup for examples to follow:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Setup for examples to follow:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552023055125,
        "id": "e03ff82f-b6dc-4795-bbfd-34b35c1d8c35",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552023055125,
        "parent_id": "32577fa5-65b9-4897-9d21-df01f693302d",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "CREATE TABLE iodku (\n    id INT AUTO_INCREMENT NOT NULL,\n    name VARCHAR(99) NOT NULL,\n    misc INT NOT NULL,\n    PRIMARY KEY(id),\n    UNIQUE(name)\n) ENGINE=InnoDB;\n\nINSERT INTO iodku (name, misc)\n    VALUES\n    ('Leslie', 123),\n    ('Sally', 456);\nQuery OK, 2 rows affected (0.00 sec)\nRecords: 2  Duplicates: 0  Warnings: 0\n+----+--------+------+\n| id | name   | misc |\n+----+--------+------+\n|  1 | Leslie |  123 |\n|  2 | Sally  |  456 |\n+----+--------+------+"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "CREATE TABLE iodku (\n    id INT AUTO_INCREMENT NOT NULL,\n    name VARCHAR(99) NOT NULL,\n    misc INT NOT NULL,\n    PRIMARY KEY(id),\n    UNIQUE(name)\n) ENGINE=InnoDB;\n\nINSERT INTO iodku (name, misc)\n    VALUES\n    ('Leslie', 123),\n    ('Sally', 456);\nQuery OK, 2 rows affected (0.00 sec)\nRecords: 2  Duplicates: 0  Warnings: 0\n+----+--------+------+\n| id | name   | misc |\n+----+--------+------+\n|  1 | Leslie |  123 |\n|  2 | Sally  |  456 |\n+----+--------+------+",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552023055125,
        "id": "5803b778-a04f-402e-827a-9ab82796e94e",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552023055125,
        "parent_id": "32577fa5-65b9-4897-9d21-df01f693302d",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "The case of IODKU performing an “update” and "
            ],
            [
              "LAST_INSERT_ID()",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " retrieving the relevant "
            ],
            [
              "id",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              ":"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "The case of IODKU performing an “update” and "
          },
          {
            "Text": "LAST_INSERT_ID()",
            "AttrFlags": 2
          },
          {
            "Text": " retrieving the relevant "
          },
          {
            "Text": "id",
            "AttrFlags": 2
          },
          {
            "Text": ":"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552023055125,
        "id": "9918a359-97ec-4bce-a7bc-238a734fb764",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552023055125,
        "parent_id": "32577fa5-65b9-4897-9d21-df01f693302d",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "$sql = \"INSERT INTO iodku (name, misc)\n    VALUES\n    ('Sally', 3333)            -- should update\n    ON DUPLICATE KEY UPDATE    -- `name` will trigger \"duplicate key\"\n    id = LAST_INSERT_ID(id),\n    misc = VALUES(misc)\";\n$conn-\u003equery($sql);\n$id = $conn-\u003einsert_id;        -- picking up existing value (2)"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "$sql = \"INSERT INTO iodku (name, misc)\n    VALUES\n    ('Sally', 3333)            -- should update\n    ON DUPLICATE KEY UPDATE    -- `name` will trigger \"duplicate key\"\n    id = LAST_INSERT_ID(id),\n    misc = VALUES(misc)\";\n$conn-\u003equery($sql);\n$id = $conn-\u003einsert_id;        -- picking up existing value (2)",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552023055126,
        "id": "c4bb9bf3-0a14-4bf0-8026-dd02ebef61e4",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552023055126,
        "parent_id": "32577fa5-65b9-4897-9d21-df01f693302d",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "The case where IODKU performs an “insert” and "
            ],
            [
              "LAST_INSERT_ID()",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              " retrieves the new "
            ],
            [
              "id",
              [
                [
                  "c"
                ]
              ]
            ],
            [
              ":"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "The case where IODKU performs an “insert” and "
          },
          {
            "Text": "LAST_INSERT_ID()",
            "AttrFlags": 2
          },
          {
            "Text": " retrieves the new "
          },
          {
            "Text": "id",
            "AttrFlags": 2
          },
          {
            "Text": ":"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552023055126,
        "id": "0b4e450f-704d-4a9f-a6fa-3287af30eaed",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552023055126,
        "parent_id": "32577fa5-65b9-4897-9d21-df01f693302d",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "$sql = \"INSERT INTO iodku (name, misc)\n    VALUES\n    ('Dana', 789)            -- Should insert\n    ON DUPLICATE KEY UPDATE\n    id = LAST_INSERT_ID(id),\n    misc = VALUES(misc);\n$conn-\u003equery($sql);\n$id = $conn-\u003einsert_id;      -- picking up new value (3)"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "$sql = \"INSERT INTO iodku (name, misc)\n    VALUES\n    ('Dana', 789)            -- Should insert\n    ON DUPLICATE KEY UPDATE\n    id = LAST_INSERT_ID(id),\n    misc = VALUES(misc);\n$conn-\u003equery($sql);\n$id = $conn-\u003einsert_id;      -- picking up new value (3)",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552023055126,
        "id": "97ab27e4-87a1-459c-801b-dee5e6319265",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552023055126,
        "parent_id": "32577fa5-65b9-4897-9d21-df01f693302d",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Resulting table contents:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Resulting table contents:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1552023055126,
        "id": "47322de6-303c-4015-881a-6749febd10db",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1552023055126,
        "parent_id": "32577fa5-65b9-4897-9d21-df01f693302d",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "SELECT * FROM iodku;\n+----+--------+------+\n| id | name   | misc |\n+----+--------+------+\n|  1 | Leslie |  123 |\n|  2 | Sally  | 3333 |  -- IODKU changed this\n|  3 | Dana   |  789 |  -- IODKU added this\n+----+--------+------+"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "SELECT * FROM iodku;\n+----+--------+------+\n| id | name   | misc |\n+----+--------+------+\n|  1 | Leslie |  123 |\n|  2 | Sally  | 3333 |  -- IODKU changed this\n|  3 | Dana   |  789 |  -- IODKU added this\n+----+--------+------+",
        "code_language": "Plain Text"
      }
    ],
    "title": "MySQLi Insert ID",
    "format_page": {
      "page_cover": "",
      "page_cover_position": 0,
      "page_font": "",
      "page_full_width": true,
      "page_icon": "",
      "page_small_text": true
    }
  },
  "Users": [
    {
      "email": "kkowalczyk@gmail.com",
      "family_name": "Kowalczyk",
      "given_name": "Krzysztof",
      "id": "bb760e2d-d679-4b64-b2a9-03005b21870a",
      "locale": "en",
      "mobile_onboarding_completed": true,
      "onboarding_completed": true,
      "profile_photo": "https://s3-us-west-2.amazonaws.com/public.notion-static.com/2dcaa66c-7674-4ff6-9924-601785b63561/head-bw-640x960.png",
      "time_zone": "America/Los_Angeles",
      "version": 18
    }
  ],
  "Tables": null
}