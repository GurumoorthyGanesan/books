{
  "ID": "5fc83ac8-32cc-4897-8f6a-95aad4dc431f",
  "Root": {
    "alive": true,
    "content": [
      "aaca6156-0fe9-47e5-a706-b02780b54c66",
      "03f272ef-564c-494f-b1a9-83f8c768c27e",
      "648ae704-cc6b-4f59-a5dd-42a9b636cd8a",
      "4d5cdfa1-8961-45b8-9305-4f65d25ade6f",
      "602f483d-c9df-4d5c-b051-071e1c199a15",
      "fa28e46e-1732-4157-96c9-6a972a69da72",
      "14464bbb-332d-4dfa-8b61-54585a7963c0",
      "c8c9b8f4-0337-40c4-a882-a0fde099e9c0",
      "36d118c8-c136-4673-8b89-d03168ef6738"
    ],
    "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
    "created_time": 1550382587056,
    "format": {
      "page_full_width": true,
      "page_small_text": true
    },
    "id": "5fc83ac8-32cc-4897-8f6a-95aad4dc431f",
    "ignore_block_count": true,
    "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
    "last_edited_time": 1550568420000,
    "parent_id": "60daf2eb-78d1-42f7-a880-e0fabf971391",
    "parent_table": "block",
    "properties": {
      "title": [
        [
          "Setting Variables"
        ]
      ]
    },
    "type": "page",
    "version": 8,
    "content_resolved": [
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550382587052,
        "id": "aaca6156-0fe9-47e5-a706-b02780b54c66",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550382587052,
        "parent_id": "5fc83ac8-32cc-4897-8f6a-95aad4dc431f",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "Here are some ways to set variables:"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "Here are some ways to set variables:"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550382587055,
        "id": "03f272ef-564c-494f-b1a9-83f8c768c27e",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550382587055,
        "parent_id": "5fc83ac8-32cc-4897-8f6a-95aad4dc431f",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "You can set a variable to a specific, string, number, date using SET"
            ]
          ]
        },
        "type": "numbered_list",
        "version": 1,
        "inline_content": [
          {
            "Text": "You can set a variable to a specific, string, number, date using SET"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550382587055,
        "id": "648ae704-cc6b-4f59-a5dd-42a9b636cd8a",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550382587055,
        "parent_id": "5fc83ac8-32cc-4897-8f6a-95aad4dc431f",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "EX: SET @var_string = 'my_var';\n    SET @var_num = '2'\n    SET @var_date = '2015-07-20';"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "EX: SET @var_string = 'my_var';\n    SET @var_num = '2'\n    SET @var_date = '2015-07-20';",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550382587056,
        "id": "4d5cdfa1-8961-45b8-9305-4f65d25ade6f",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550382587056,
        "parent_id": "5fc83ac8-32cc-4897-8f6a-95aad4dc431f",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "you can set a variable to be the result of a select statement using :="
            ]
          ]
        },
        "type": "numbered_list",
        "version": 1,
        "inline_content": [
          {
            "Text": "you can set a variable to be the result of a select statement using :="
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550382587056,
        "id": "602f483d-c9df-4d5c-b051-071e1c199a15",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550382587056,
        "parent_id": "5fc83ac8-32cc-4897-8f6a-95aad4dc431f",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "EX: Select @var := '123';\n(Note: You need to use := when assigning a variable not using the SET syntax, because in other statements, (select, update...) the \"=\" is used to compare, so when you add a colon before the \"=\", you are saying \"This is not a comparison, this is a SET\".)"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "EX: Select @var := '123';\n(Note: You need to use := when assigning a variable not using the SET syntax, because in other statements, (select, update...) the \"=\" is used to compare, so when you add a colon before the \"=\", you are saying \"This is not a comparison, this is a SET\".)",
        "code_language": "Plain Text"
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550382587056,
        "id": "fa28e46e-1732-4157-96c9-6a972a69da72",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550382587056,
        "parent_id": "5fc83ac8-32cc-4897-8f6a-95aad4dc431f",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "You can set a variable to be the result of a select statement using INTO"
            ]
          ]
        },
        "type": "numbered_list",
        "version": 1,
        "inline_content": [
          {
            "Text": "You can set a variable to be the result of a select statement using INTO"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550382587056,
        "id": "14464bbb-332d-4dfa-8b61-54585a7963c0",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550382587056,
        "parent_id": "5fc83ac8-32cc-4897-8f6a-95aad4dc431f",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "(This was particularly helpful when I needed to dynamically choose which Partitions to query from)"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "(This was particularly helpful when I needed to dynamically choose which Partitions to query from)"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550382587056,
        "id": "c8c9b8f4-0337-40c4-a882-a0fde099e9c0",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550382587056,
        "parent_id": "5fc83ac8-32cc-4897-8f6a-95aad4dc431f",
        "parent_table": "block",
        "properties": {
          "title": [
            [
              "EX: SET @start_date = ‘2015-07-20’;"
            ]
          ]
        },
        "type": "text",
        "version": 1,
        "inline_content": [
          {
            "Text": "EX: SET @start_date = ‘2015-07-20’;"
          }
        ]
      },
      {
        "alive": true,
        "created_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "created_time": 1550382587056,
        "id": "36d118c8-c136-4673-8b89-d03168ef6738",
        "ignore_block_count": true,
        "last_edited_by": "bb760e2d-d679-4b64-b2a9-03005b21870a",
        "last_edited_time": 1550382587056,
        "parent_id": "5fc83ac8-32cc-4897-8f6a-95aad4dc431f",
        "parent_table": "block",
        "properties": {
          "language": [
            [
              "Plain Text"
            ]
          ],
          "title": [
            [
              "SET @end_date = '2016-01-31';\n\n#this gets the year month value to use as the partition names\nSET @start_yearmonth = (SELECT EXTRACT(YEAR_MONTH FROM @start_date));\nSET @end_yearmonth = (SELECT EXTRACT(YEAR_MONTH FROM @end_date));\n\n#put the partitions into a variable\nSELECT GROUP_CONCAT(partition_name)\nFROM information_schema.partitions p \nWHERE table_name = 'partitioned_table'\nAND SUBSTRING_INDEX(partition_name,'P',-1) BETWEEN @start_yearmonth AND @end_yearmonth\nINTO @partitions;\n\n#put the query in a variable. You need to do this, because mysql did not recognize my variable as a variable in that position. You need to concat the value of the variable together with the rest of the query and then execute it as a stmt.\nSET @query =\nCONCAT('CREATE TABLE part_of_partitioned_table (PRIMARY KEY(id))\nSELECT partitioned_table.*\nFROM partitioned_table PARTITION(', @partitions,')\nJOIN users u USING(user_id)\nWHERE date(partitioned_table.date) BETWEEN ', @start_date,' AND ', @end_date);\n\n#prepare the statement from @query\nPREPARE stmt FROM @query;\n#drop table\nDROP TABLE IF EXISTS tech.part_of_partitioned_table;\n#create table using statement\nEXECUTE stmt;"
            ]
          ]
        },
        "type": "code",
        "version": 1,
        "code": "SET @end_date = '2016-01-31';\n\n#this gets the year month value to use as the partition names\nSET @start_yearmonth = (SELECT EXTRACT(YEAR_MONTH FROM @start_date));\nSET @end_yearmonth = (SELECT EXTRACT(YEAR_MONTH FROM @end_date));\n\n#put the partitions into a variable\nSELECT GROUP_CONCAT(partition_name)\nFROM information_schema.partitions p \nWHERE table_name = 'partitioned_table'\nAND SUBSTRING_INDEX(partition_name,'P',-1) BETWEEN @start_yearmonth AND @end_yearmonth\nINTO @partitions;\n\n#put the query in a variable. You need to do this, because mysql did not recognize my variable as a variable in that position. You need to concat the value of the variable together with the rest of the query and then execute it as a stmt.\nSET @query =\nCONCAT('CREATE TABLE part_of_partitioned_table (PRIMARY KEY(id))\nSELECT partitioned_table.*\nFROM partitioned_table PARTITION(', @partitions,')\nJOIN users u USING(user_id)\nWHERE date(partitioned_table.date) BETWEEN ', @start_date,' AND ', @end_date);\n\n#prepare the statement from @query\nPREPARE stmt FROM @query;\n#drop table\nDROP TABLE IF EXISTS tech.part_of_partitioned_table;\n#create table using statement\nEXECUTE stmt;",
        "code_language": "Plain Text"
      }
    ],
    "title": "Setting Variables",
    "format_page": {
      "page_cover": "",
      "page_cover_position": 0,
      "page_font": "",
      "page_full_width": true,
      "page_icon": "",
      "page_small_text": true
    }
  },
  "Users": [
    {
      "email": "kkowalczyk@gmail.com",
      "family_name": "Kowalczyk",
      "given_name": "Krzysztof",
      "id": "bb760e2d-d679-4b64-b2a9-03005b21870a",
      "locale": "en",
      "mobile_onboarding_completed": true,
      "onboarding_completed": true,
      "profile_photo": "https://s3-us-west-2.amazonaws.com/public.notion-static.com/2dcaa66c-7674-4ff6-9924-601785b63561/head-bw-640x960.png",
      "time_zone": "America/Los_Angeles",
      "version": 18
    }
  ],
  "Tables": null
}